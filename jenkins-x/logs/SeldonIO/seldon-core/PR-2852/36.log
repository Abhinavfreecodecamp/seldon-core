
Showing logs for build [32mseldonio-seldon-core-pr-2852-in-fglq7-36[0m stage [32mpr-build-comment[0m and container [32mstep-credential-initializer-5h8cw[0m
{"level":"info","ts":1611348144.6204169,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/refs/heads/0.8.0-ns-support: no such file or directory"}
{"level":"info","ts":1611348144.6208465,"logger":"fallback-logger","caller":"creds-init/main.go:40","msg":"Credentials initialized."}

Showing logs for build [32mseldonio-seldon-core-pr-2852-in-fglq7-36[0m stage [32mpr-build-comment[0m and container [32mstep-working-dir-initializer-rn2px[0m
{"level":"info","ts":1611348145.2000036,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/HEAD: no such file or directory"}
{"level":"info","ts":1611348145.2013924,"logger":"fallback-logger","caller":"bash/main.go:64","msg":"Successfully executed command \"sh -c mkdir -p /workspace/source\"; output "}

Showing logs for build [32mseldonio-seldon-core-pr-2852-in-fglq7-36[0m stage [32mpr-build-comment[0m and container [32mstep-place-tools[0m

Showing logs for build [32mseldonio-seldon-core-pr-2852-in-fglq7-36[0m stage [32mpr-build-comment[0m and container [32mstep-create-dir-workspace-8ddwb[0m
{"level":"info","ts":1611348151.3095417,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/HEAD: no such file or directory"}
{"level":"info","ts":1611348151.3112261,"logger":"fallback-logger","caller":"bash/main.go:64","msg":"Successfully executed command \"sh -c mkdir -p source\"; output "}

Showing logs for build [32mseldonio-seldon-core-pr-2852-in-fglq7-36[0m stage [32mpr-build-comment[0m and container [32mstep-git-source-seldonio-seldon-core-pr-2852-in-fglq7-nrprx[0m
{"level":"info","ts":1611348151.564079,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/refs/heads/0.8.0-ns-support: no such file or directory"}
{"level":"info","ts":1611348156.7577572,"logger":"fallback-logger","caller":"git/git.go:103","msg":"Successfully cloned https://github.com/SeldonIO/seldon-core.git @ master in path /workspace/source"}

Showing logs for build [32mseldonio-seldon-core-pr-2852-in-fglq7-36[0m stage [32mpr-build-comment[0m and container [32mstep-setup-builder-home[0m

Showing logs for build [32mseldonio-seldon-core-pr-2852-in-fglq7-36[0m stage [32mpr-build-comment[0m and container [32mstep-git-merge[0m
Using SHAs from PULL_REFS=master:b881f99ebc1f73651a0c96164e84ea9f7b8c152e,2852:2888070e3caa728600883b655e3a326a0278fe7b
DEBUG: LC_ALL=C JX_LOG_LEVEL=error git fetch origin --unshallow 2888070e3caa728600883b655e3a326a0278fe7b: b881f99ebc1f73651a0c96164e84ea9f7b8c152e:
DEBUG: ran git fetch --unshallow origin 2888070e3caa728600883b655e3a326a0278fe7b: b881f99ebc1f73651a0c96164e84ea9f7b8c152e: in 
DEBUG: LC_ALL=C JX_LOG_LEVEL=error git branch
DEBUG: LC_ALL=C JX_LOG_LEVEL=error git checkout master
DEBUG: ran git checkout master in 
DEBUG: LC_ALL=C JX_LOG_LEVEL=error git reset --hard b881f99ebc1f73651a0c96164e84ea9f7b8c152e
DEBUG: ran git reset --hard b881f99ebc1f73651a0c96164e84ea9f7b8c152e in 
DEBUG: LC_ALL=C JX_LOG_LEVEL=error git clean -fd .
DEBUG: ran clean --force -d . in 
DEBUG: LC_ALL=C JX_LOG_LEVEL=error git merge 2888070e3caa728600883b655e3a326a0278fe7b
DEBUG: ran git merge 2888070e3caa728600883b655e3a326a0278fe7b in 
DEBUG: LC_ALL=C JX_LOG_LEVEL=error git log --format=%H%x1f%an%x1f%ae%x1f%cn%x1f%ce%x1f%s%n%b%x1e b881f99ebc1f73651a0c96164e84ea9f7b8c152e..HEAD
Merged SHA ee2aaa7257aa3ec6847dac1a0a0e328ca27d00aa with commit message 'Merge commit '2888070e3caa728600883b655e3a326a0278fe7b'' into base branch master
Merged SHA 2888070e3caa728600883b655e3a326a0278fe7b with commit message 'update auto-generated file in operator tests' into base branch master
Merged SHA cbed1629a41b21fe5569eee53961030aa1ba7d0e with commit message 'apply code review suggestions' into base branch master
Merged SHA e331fa3682bf13c69ffb9dc6fd7351d0ce1e9de3 with commit message 'move defaulting code out of webhook file' into base branch master
Merged SHA e9594e852861b38240379776cb9128b2ae292254 with commit message 'fix validating webhooks to act on raw resource from etcd' into base branch master
Merged SHA e0dbdea7977b93d26a1104f08072ab310a626eff with commit message 'fix explainer notebook' into base branch master
Merged SHA 5ec1a7cd0204535f2518dba00ad9acf8b9079824 with commit message 'adjust validating webhooks so they do not expect defaulted resource' into base branch master
Merged SHA d697735ccb0f0d6b45340150a25abd4520b89c8b with commit message 'complete removal of mutatingwebhook' into base branch master
Merged SHA 30f696018a6f7f8b305981a103fe1824a38997bf with commit message 'initial attempt to remove mutating webhook' into base branch master

Showing logs for build [32mseldonio-seldon-core-pr-2852-in-fglq7-36[0m stage [32mpr-build-comment[0m and container [32mstep-step2[0m
+++ dirname ./add-pr-build-comment
++ cd .
++ pwd
+ STARTUP_DIR=/workspace/source/ci
+ REPO_OWNER=SeldonIO
+ REPO_NAME=seldon-core
+ PULL_NUMBER=2852
+ BUILD_NUMBER=36
+ PIPELINE_CONTEXT=integration
++ cat
+++ date
+ COMMENT_MSG='Fri Jan 22 20:42:46 UTC 2021
The logs for [integration] [36] will show after the pipeline context has finished.  
https://github.com/SeldonIO/seldon-core/blob/gh-pages/jenkins-x/logs/SeldonIO/seldon-core/PR-2852/36.log

impatient try  
** get build logs SeldonIO/seldon-core/PR-2852 --build=36'
+ ** step pr comment --owner=SeldonIO --repository=seldon-core --pull-request=2852 '--comment=Fri Jan 22 20:42:46 UTC 2021
The logs for [integration] [36] will show after the pipeline context has finished.  
https://github.com/SeldonIO/seldon-core/blob/gh-pages/jenkins-x/logs/SeldonIO/seldon-core/PR-2852/36.log

impatient try  
** get build logs SeldonIO/seldon-core/PR-2852 --build=36'

Showing logs for build [32mseldonio-seldon-core-pr-2852-in-fglq7-36[0m stage [32mpr-build-comment[0m and container [32mstep-source-mkdir-seldonio-seldon-core-pr-2852-in-fglq7-rwl2h[0m
{"level":"info","ts":1611348168.3323443,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/HEAD: no such file or directory"}
{"level":"info","ts":1611348168.3358293,"logger":"fallback-logger","caller":"bash/main.go:64","msg":"Successfully executed command \"sh -c mkdir -p /pvc/pr-build-comment/workspace\"; output "}

Showing logs for build [32mseldonio-seldon-core-pr-2852-in-fglq7-36[0m stage [32mpr-build-comment[0m and container [32mstep-source-copy-seldonio-seldon-core-pr-2852-in-fglq7-5bm8j[0m
{"level":"info","ts":1611348168.5511775,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/HEAD: no such file or directory"}
{"level":"info","ts":1611348169.1986024,"logger":"fallback-logger","caller":"bash/main.go:64","msg":"Successfully executed command \"sh -c cp -r source/. /pvc/pr-build-comment/workspace\"; output "}

Showing logs for build [32mseldonio-seldon-core-pr-2852-in-fglq7-36[0m stage [32mend-to-end[0m and container [32mstep-credential-initializer-9dz8k[0m
{"level":"info","ts":1611348172.148994,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/refs/heads/0.8.0-ns-support: no such file or directory"}
{"level":"info","ts":1611348172.1495714,"logger":"fallback-logger","caller":"creds-init/main.go:40","msg":"Credentials initialized."}

Showing logs for build [32mseldonio-seldon-core-pr-2852-in-fglq7-36[0m stage [32mend-to-end[0m and container [32mstep-working-dir-initializer-l98rh[0m
{"level":"info","ts":1611348172.5298634,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/HEAD: no such file or directory"}
{"level":"info","ts":1611348172.5312822,"logger":"fallback-logger","caller":"bash/main.go:64","msg":"Successfully executed command \"sh -c mkdir -p /workspace/source\"; output "}

Showing logs for build [32mseldonio-seldon-core-pr-2852-in-fglq7-36[0m stage [32mend-to-end[0m and container [32mstep-place-tools[0m

Showing logs for build [32mseldonio-seldon-core-pr-2852-in-fglq7-36[0m stage [32mend-to-end[0m and container [32mstep-create-dir-workspace-5r6kv[0m
{"level":"info","ts":1611348179.627863,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/HEAD: no such file or directory"}
{"level":"info","ts":1611348179.6290905,"logger":"fallback-logger","caller":"bash/main.go:64","msg":"Successfully executed command \"sh -c mkdir -p /workspace/source\"; output "}

Showing logs for build [32mseldonio-seldon-core-pr-2852-in-fglq7-36[0m stage [32mend-to-end[0m and container [32mstep-source-copy-workspace-r2bd2[0m
{"level":"info","ts":1611348179.8251467,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/HEAD: no such file or directory"}
{"level":"info","ts":1611348180.2307558,"logger":"fallback-logger","caller":"bash/main.go:64","msg":"Successfully executed command \"sh -c cp -r /pvc/pr-build-comment/workspace/. /workspace/source\"; output "}

Showing logs for build [32mseldonio-seldon-core-pr-2852-in-fglq7-36[0m stage [32mend-to-end[0m and container [32mstep-setup-builder-home[0m

Showing logs for build [32mseldonio-seldon-core-pr-2852-in-fglq7-36[0m stage [32mend-to-end[0m and container [32mstep-test-end-to-end[0m
Test run type is: [base]
Starting Docker: docker.
[SETUP] Waiting for Docker to be ready, sleeping for 1 seconds ...
kind create cluster --config ../resources/kind_config.yaml
Creating cluster "kind" ...
 • Ensuring node image (kindest/node:v1.16.3) 🖼  ...
 ✓ Ensuring node image (kindest/node:v1.16.3) 🖼
 • Preparing nodes 📦  ...
 ✓ Preparing nodes 📦
 • Writing configuration 📜  ...
 ✓ Writing configuration 📜
 • Starting control-plane 🕹️  ...
 ✓ Starting control-plane 🕹️
 • Installing CNI 🔌  ...
 ✓ Installing CNI 🔌
 • Installing StorageClass 💾  ...
 ✓ Installing StorageClass 💾
 • Joining worker nodes 🚜  ...
 ✓ Joining worker nodes 🚜
Set kubectl context to "kind-kind"
You can now use your cluster with:

kubectl cluster-info --context kind-kind

Have a question, bug, or feature request? Let us know! https://kind.sigs.k8s.io/#community 🙂
`kind get kubeconfig-path` is deprecated!

KIND will export and merge kubeconfig like kops, minikube, etc.
This command is now unnecessary and will be removed in a future release.

For more info see: https://github.com/kubernetes-sigs/kind/issues/1060
See also the output of `kind create cluster`

Files changed in python folder:
SKIPPING PYTHON IMAGE BUILD...
Files changed in operator folder:
operator/Dockerfile
operator/Dockerfile.redhat
operator/apis/machinelearning.seldon.io/v1/defaults.go
operator/apis/machinelearning.seldon.io/v1/seldondeployment_webhook.go
operator/apis/machinelearning.seldon.io/v1alpha2/seldondeployment_types.go
operator/apis/machinelearning.seldon.io/v1alpha2/seldondeployment_webhook.go
operator/apis/machinelearning.seldon.io/v1alpha3/seldondeployment_types.go
operator/apis/machinelearning.seldon.io/v1alpha3/seldondeployment_webhook.go
operator/bundle/manifests/seldon-operator.clusterserviceversion.yaml
operator/config/cert/kustomization.yaml
operator/config/controllerid/kustomization.yaml
operator/config/controllerid/webhook-config.yaml
operator/config/default/webhookcainjection_patch.yaml
operator/config/lite/role_webhook.yaml
operator/config/manifests/bases/seldon-operator.clusterserviceversion.yaml
operator/config/namespaced/kustomization.yaml
operator/config/namespaced/webhook-config.yaml
operator/config/openshift/role_webhook.yaml
operator/config/webhook/kustomization.yaml
operator/config/webhook/kustomizeconfig.yaml
operator/config/webhook/manifests.yaml
operator/controllers/seldondeployment_controller.go
operator/helm/split_resources.py
operator/testing/machinelearning.seldon.io_seldondeployments.yaml
operator/utils/k8s/initializer.go
operator/utils/k8s/webhook.go
operator/utils/k8s/webhook_test.go
cd ../../operator && make kind-image-install
make[1]: Entering directory '/workspace/source/operator'
go: creating new go.mod: module tmp
go: downloading sigs.k8s.io/controller-tools v0.2.9
go: found sigs.k8s.io/controller-tools/cmd/controller-gen in sigs.k8s.io/controller-tools v0.2.9
go: downloading github.com/spf13/cobra v0.0.5
go: downloading github.com/fatih/color v1.7.0
go: downloading k8s.io/apiextensions-apiserver v0.17.0
go: downloading github.com/gobuffalo/flect v0.2.0
go: downloading k8s.io/apimachinery v0.17.0
go: downloading k8s.io/api v0.17.0
go: downloading gopkg.in/yaml.v3 v3.0.0-20190905181640-827449938966
go: downloading sigs.k8s.io/yaml v1.1.0
go: downloading github.com/mattn/go-colorable v0.1.2
go: downloading github.com/inconshreveable/mousetrap v1.0.0
go: downloading github.com/spf13/pflag v1.0.5
go: downloading golang.org/x/tools v0.0.0-20190920225731-5eefd052ad72
go: downloading gopkg.in/yaml.v2 v2.2.4
go: downloading github.com/gogo/protobuf v1.2.2-0.20190723190241-65acae22fc9d
go: downloading github.com/mattn/go-isatty v0.0.8
go: downloading github.com/google/gofuzz v1.0.0
go: downloading k8s.io/klog v1.0.0
go: downloading k8s.io/utils v0.0.0-20191114184206-e782cd3c129f
go: downloading gopkg.in/inf.v0 v0.9.1
go: downloading golang.org/x/sys v0.0.0-20190826190057-c7b8b68b1456
go: downloading golang.org/x/net v0.0.0-20191004110552-13f9640d40b9
go: downloading golang.org/x/text v0.3.2
/builder/home/go/bin/controller-gen object:headerFile=./hack/boilerplate.go.txt paths="./..."
go fmt ./...
go vet ./...
go: downloading github.com/onsi/gomega v1.10.4
go: downloading github.com/onsi/ginkgo v1.14.1
go: downloading golang.org/x/xerrors v0.0.0-20200804184101-5ec99f83aff1
go: downloading github.com/nxadm/tail v1.4.4
go: downloading gopkg.in/tomb.v1 v1.0.0-20141024135613-dd632973f1e7
/builder/home/go/bin/controller-gen "crd:trivialVersions=true" rbac:roleName=manager-role webhook paths="./..." output:crd:artifacts:config=config/crd/bases
rm -rf generated
mkdir generated
kustomize build config/default/ -o generated
cp generated/apiextensions.k8s.io_v1beta1_customresourcedefinition_seldondeployments.machinelearning.seldon.io.yaml testing/machinelearning.seldon.io_seldondeployments.yaml
ginkgo -r -outputdir=. -cover -coverprofile=cover.out ./controllers ./utils ./apis
[1611348315] [1mController Suite[0m - 64/64 specs test k8s client
&{Reader:0xc0001f6fc0 Writer:0xc000486be0 StatusClient:0xc000486be0}
[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0mE0122 20:46:05.239821   30017 reflector.go:383] pkg/mod/k8s.io/client-go@v0.18.8/tools/cache/reflector.go:125: Failed to watch *v1alpha1.ScaledObject: Get "http://127.0.0.1:40495/apis/keda.sh/v1alpha1/scaledobjects?allowWatchBookmarks=true&resourceVersion=288&timeoutSeconds=365&watch=true": dial tcp 127.0.0.1:40495: connect: connection refused
E0122 20:46:05.239863   30017 reflector.go:383] pkg/mod/k8s.io/client-go@v0.18.8/tools/cache/reflector.go:125: Failed to watch *v1.Namespace: Get "http://127.0.0.1:40495/api/v1/namespaces?allowWatchBookmarks=true&resourceVersion=406&timeoutSeconds=389&watch=true": dial tcp 127.0.0.1:40495: connect: connection refused
E0122 20:46:05.239875   30017 reflector.go:383] pkg/mod/k8s.io/client-go@v0.18.8/tools/cache/reflector.go:125: Failed to watch *v1beta1.PodDisruptionBudget: Get "http://127.0.0.1:40495/apis/policy/v1beta1/poddisruptionbudgets?allowWatchBookmarks=true&resourceVersion=258&timeoutSeconds=408&watch=true": dial tcp 127.0.0.1:40495: connect: connection refused
E0122 20:46:05.239881   30017 reflector.go:383] pkg/mod/k8s.io/client-go@v0.18.8/tools/cache/reflector.go:125: Failed to watch *v1alpha3.VirtualService: Get "http://127.0.0.1:40495/apis/networking.istio.io/v1alpha3/virtualservices?allowWatchBookmarks=true&resourceVersion=122&timeoutSeconds=558&watch=true": dial tcp 127.0.0.1:40495: connect: connection refused
E0122 20:46:05.239829   30017 reflector.go:383] pkg/mod/k8s.io/client-go@v0.18.8/tools/cache/reflector.go:125: Failed to watch *v1.Deployment: Get "http://127.0.0.1:40495/apis/apps/v1/deployments?allowWatchBookmarks=true&resourceVersion=429&timeoutSeconds=503&watch=true": dial tcp 127.0.0.1:40495: connect: connection refused
E0122 20:46:05.239893   30017 reflector.go:383] pkg/mod/k8s.io/client-go@v0.18.8/tools/cache/reflector.go:125: Failed to watch *v1.Service: Get "http://127.0.0.1:40495/api/v1/services?allowWatchBookmarks=true&resourceVersion=427&timeoutSeconds=387&watch=true": dial tcp 127.0.0.1:40495: connect: connection refused
E0122 20:46:05.239829   30017 reflector.go:383] pkg/mod/k8s.io/client-go@v0.18.8/tools/cache/reflector.go:125: Failed to watch *v1.ConfigMap: Get "http://127.0.0.1:40495/api/v1/configmaps?allowWatchBookmarks=true&resourceVersion=122&timeoutSeconds=471&watch=true": dial tcp 127.0.0.1:40495: connect: connection refused
E0122 20:46:05.239942   30017 reflector.go:383] pkg/mod/k8s.io/client-go@v0.18.8/tools/cache/reflector.go:125: Failed to watch *v2beta1.HorizontalPodAutoscaler: Get "http://127.0.0.1:40495/apis/autoscaling/v2beta1/horizontalpodautoscalers?allowWatchBookmarks=true&resourceVersion=414&timeoutSeconds=360&watch=true": dial tcp 127.0.0.1:40495: connect: connection refused
E0122 20:46:05.240326   30017 reflector.go:383] pkg/mod/k8s.io/client-go@v0.18.8/tools/cache/reflector.go:125: Failed to watch *v1.SeldonDeployment: Get "http://127.0.0.1:40495/apis/machinelearning.seldon.io/v1/seldondeployments?allowWatchBookmarks=true&resourceVersion=434&timeoutSeconds=525&watch=true": dial tcp 127.0.0.1:40495: connect: connection refused

 [32mSUCCESS![0m 29.188705799s PASS
coverage: 66.7% of statements
=== RUN   TestGcsSecret
--- PASS: TestGcsSecret (0.00s)
PASS
coverage: 100.0% of statements
=== RUN   TestS3Secret
--- PASS: TestS3Secret (0.00s)
PASS
coverage: 94.6% of statements
=== RUN   TestGetEnvAsBool
--- PASS: TestGetEnvAsBool (0.00s)
=== RUN   TestAddEnvVarToDeploymentContainers
--- PASS: TestAddEnvVarToDeploymentContainers (0.00s)
=== RUN   TestMountSecretToDeploymentContainers
--- PASS: TestMountSecretToDeploymentContainers (0.00s)
PASS
coverage: 30.0% of statements
=== RUN   TestGenerateCerts
--- PASS: TestGenerateCerts (2.05s)
=== RUN   TestConfigmapCreate
--- PASS: TestConfigmapCreate (0.00s)
=== RUN   TestCRDCreate
--- PASS: TestCRDCreate (0.05s)
=== RUN   TestValidatingWebhookCreate
--- PASS: TestValidatingWebhookCreate (2.18s)
=== RUN   TestValidatingWebhookCreateNamespaced
--- PASS: TestValidatingWebhookCreateNamespaced (5.15s)
=== RUN   TestWebHookSvcCreate
--- PASS: TestWebHookSvcCreate (1.01s)
PASS
coverage: 51.2% of statements
=== RUN   TestImageSetNormal
    prepack_test.go:58: Scenario: GRPC image with version
    prepack_test.go:58: Scenario: GRPC image with no version
    prepack_test.go:58: Scenario: REST image with version
    prepack_test.go:58: Scenario: REST image with no version
--- PASS: TestImageSetNormal (0.00s)
=== RUN   TestGetPredictorConfig
    prepack_test.go:91: Scenario: related image sklearn
    prepack_test.go:91: Scenario: default image sklearn
--- PASS: TestGetPredictorConfig (0.00s)
=== RUN   TestPredictorServerConfigPrepackImageName
--- PASS: TestPredictorServerConfigPrepackImageName (0.00s)
=== RUN   TestGetDeploymentNameOneModel
--- PASS: TestGetDeploymentNameOneModel (0.00s)
=== RUN   TestGetDeploymentNameLong
--- PASS: TestGetDeploymentNameLong (0.00s)
=== RUN   TestValidProtocolTransportServerType
--- PASS: TestValidProtocolTransportServerType (0.00s)
=== RUN   TestValidateBadProtocol
--- PASS: TestValidateBadProtocol (0.00s)
=== RUN   TestValidateBadTransport
--- PASS: TestValidateBadTransport (0.00s)
=== RUN   TestValidateBadServerType
--- PASS: TestValidateBadServerType (0.00s)
=== RUN   TestValidateMixedTransport
--- PASS: TestValidateMixedTransport (0.00s)
=== RUN   TestValidateMixedMultipleTransport
--- PASS: TestValidateMixedMultipleTransport (0.00s)
=== RUN   TestDefaultSingleContainer
--- PASS: TestDefaultSingleContainer (0.00s)
=== RUN   TestMetricsPortAddedTwoContainers
--- PASS: TestMetricsPortAddedTwoContainers (0.00s)
=== RUN   TestMetricsPortAddedTwoComponentSpecsTwoContainers
--- PASS: TestMetricsPortAddedTwoComponentSpecsTwoContainers (0.00s)
=== RUN   TestOverrideMetricsPortName
Failed to find config map seldon-config
no kind is registered for the type v1.ConfigMap in scheme "pkg/runtime/scheme.go:101"
--- PASS: TestOverrideMetricsPortName (0.00s)
=== RUN   TestPortUseExisting
--- PASS: TestPortUseExisting (0.00s)
=== RUN   TestMetricsPortAddedToPrepacked
--- PASS: TestMetricsPortAddedToPrepacked (0.00s)
=== RUN   TestPredictorProtocolGrpc
--- PASS: TestPredictorProtocolGrpc (0.00s)
=== RUN   TestPrepackedWithExistingContainer
--- PASS: TestPrepackedWithExistingContainer (0.00s)
=== RUN   TestPrepackedWithCustom
--- PASS: TestPrepackedWithCustom (0.00s)
=== RUN   TestPrepackedWithExistingContainerAndImage
--- PASS: TestPrepackedWithExistingContainerAndImage (0.00s)
=== RUN   TestMetricsPortAddedToTwoPrepacked
--- PASS: TestMetricsPortAddedToTwoPrepacked (0.00s)
=== RUN   TestDefaultPrepackagedServerType
--- PASS: TestDefaultPrepackagedServerType (0.00s)
=== RUN   TestValidateSingleModel
--- PASS: TestValidateSingleModel (0.00s)
=== RUN   TestValidateSingleModelNoName
--- PASS: TestValidateSingleModelNoName (0.00s)
=== RUN   TestValidateNoEngineMultiGraph
--- PASS: TestValidateNoEngineMultiGraph (0.00s)
=== RUN   TestValidateDuplPredictorName
--- PASS: TestValidateDuplPredictorName (0.00s)
=== RUN   TestValidateTrafficSum
--- PASS: TestValidateTrafficSum (0.00s)
=== RUN   TestDefaultABTest
--- PASS: TestDefaultABTest (0.00s)
=== RUN   TestValidateTensorflowProtocolNormalPrepackaged
--- PASS: TestValidateTensorflowProtocolNormalPrepackaged (0.00s)
=== RUN   TestValidateTensorflowProtocolNormal
--- PASS: TestValidateTensorflowProtocolNormal (0.00s)
=== RUN   TestValidateV2ProtocolNormal
--- PASS: TestValidateV2ProtocolNormal (0.00s)
=== RUN   TestPredictorNoGraph
--- PASS: TestPredictorNoGraph (0.00s)
=== RUN   TestShadowPredictor
--- PASS: TestShadowPredictor (0.00s)
=== RUN   TestNoPredictors
--- PASS: TestNoPredictors (0.00s)
=== RUN   TestValidateTwoShadows
--- PASS: TestValidateTwoShadows (0.00s)
PASS
coverage: 38.1% of statements
path is /workspace/source/operator
All profiles combined

Ginkgo ran 6 suites in 1m0.213650812s
Test Suite Passed
docker build . -t seldonio/seldon-core-operator:1.6.0-dev
Sending build context to Docker daemon  16.53MB
Step 1/27 : FROM golang:1.14.9 as builder
1.14.9: Pulling from library/golang
e4c3d3e4f7b0: Pulling fs layer
101c41d0463b: Pulling fs layer
8275efcd805f: Pulling fs layer
751620502a7a: Pulling fs layer
aaabf962c4fc: Pulling fs layer
5610ac35c8d2: Pulling fs layer
324c78229f75: Pulling fs layer
751620502a7a: Waiting
aaabf962c4fc: Waiting
5610ac35c8d2: Waiting
324c78229f75: Waiting
101c41d0463b: Verifying Checksum
101c41d0463b: Download complete
8275efcd805f: Verifying Checksum
8275efcd805f: Download complete
e4c3d3e4f7b0: Verifying Checksum
e4c3d3e4f7b0: Download complete
751620502a7a: Verifying Checksum
751620502a7a: Download complete
aaabf962c4fc: Verifying Checksum
aaabf962c4fc: Download complete
324c78229f75: Verifying Checksum
324c78229f75: Download complete
5610ac35c8d2: Verifying Checksum
5610ac35c8d2: Download complete
e4c3d3e4f7b0: Pull complete
101c41d0463b: Pull complete
8275efcd805f: Pull complete
751620502a7a: Pull complete
aaabf962c4fc: Pull complete
5610ac35c8d2: Pull complete
324c78229f75: Pull complete
Digest: sha256:b840a07bab2739c266c8728246fc243444f192b44933f4b8beb8ce9f806fae46
Status: Downloaded newer image for golang:1.14.9
 ---> 39111ae98c91
Step 2/27 : WORKDIR /workspace
 ---> Running in b1c36a5899ed
Removing intermediate container b1c36a5899ed
 ---> 00ce41dd9b2d
Step 3/27 : COPY go.mod go.mod
 ---> d88e9b7034d0
Step 4/27 : COPY go.sum go.sum
 ---> b47489cab76a
Step 5/27 : RUN go mod download
 ---> Running in a86362c6dcd8
Removing intermediate container a86362c6dcd8
 ---> b3c45a9365c6
Step 6/27 : COPY main.go main.go
 ---> 9efd317820df
Step 7/27 : COPY apis/ apis/
 ---> 4ebf884877a3
Step 8/27 : COPY controllers/ controllers/
 ---> 53672c28eec1
Step 9/27 : COPY utils/ utils/
 ---> 7c22b206dc37
Step 10/27 : COPY constants/ constants/
 ---> a9f1d81ef470
Step 11/27 : COPY client/ client/
 ---> 06e7ebc775ba
Step 12/27 : RUN go build -a -o manager main.go
 ---> Running in 4fb34bd64fdc
Removing intermediate container 4fb34bd64fdc
 ---> 15c7e5b15492
Step 13/27 : RUN wget -O hashicorp-golang-lru.tar.gz https://github.com/hashicorp/golang-lru/archive/master.tar.gz
 ---> Running in 44fd1ebc1a6d
[91m--2021-01-22 20:49:02--  https://github.com/hashicorp/golang-lru/archive/master.tar.gz
[0m[91mResolving github.com (github.com)... [0m[91m140.82.121.3
Connecting to github.com (github.com)|140.82.121.3|:443... [0m[91mconnected.
[0m[91mHTTP request sent, awaiting response... [0m[91m302 Found
Location: https://codeload.github.com/hashicorp/golang-lru/tar.gz/master [following]
--2021-01-22 20:49:02--  https://codeload.github.com/hashicorp/golang-lru/tar.gz/master
Resolving codeload.github.com (codeload.github.com)... [0m[91m140.82.121.10
Connecting to codeload.github.com (codeload.github.com)|140.82.121.10|:443... [0m[91mconnected.
[0m[91mHTTP request sent, awaiting response... [0m[91m200 OK
Length: unspecified [application/x-gzip]
Saving to: 'hashicorp-golang-lru.tar.gz'
[0m[91m
     0K ......[0m[91m.[0m[91m.[0m[91m.. .[0m[91m...                                       [0m[91m 1.13M=0.01s

2021-01-22 20:49:02 (1.13 MB/s) - 'hashicorp-golang-lru.tar.gz' saved [14371]

[0mRemoving intermediate container 44fd1ebc1a6d
 ---> e2032357ac01
Step 14/27 : RUN wget -O armon-consul-api.tar.gz https://github.com/armon/consul-api/archive/master.tar.gz
 ---> Running in bc8e28197902
[91m--2021-01-22 20:49:03--  https://github.com/armon/consul-api/archive/master.tar.gz
[0m[91mResolving github.com (github.com)... [0m[91m140.82.121.3
Connecting to github.com (github.com)|140.82.121.3|:443... [0m[91mconnected.
[0m[91mHTTP request sent, awaiting response... [0m[91m302 Found
Location: https://codeload.github.com/armon/consul-api/tar.gz/master [following]
--2021-01-22 20:49:03--  https://codeload.github.com/armon/consul-api/tar.gz/master
Resolving codeload.github.com (codeload.github.com)... [0m[91m140.82.121.10
Connecting to codeload.github.com (codeload.github.com)|140.82.121.10|:443... [0m[91mconnected.
[0m[91mHTTP request sent, awaiting response... [0m[91m200 OK
Length: unspecified [application/x-gzip]
Saving to: 'armon-consul-api.tar.gz'
[0m[91m
     0K ...[0m[91m...[0m[91m.[0m[91m.[0m[91m..[0m[91m .[0m[91m.[0m[91m....[0m[91m.                    [0m[91m                [0m[91m 1.39M=0.01s

[0m[91m2021-01-22 20:49:04 (1.39 MB/s) - 'armon-consul-api.tar.gz' saved [17977]

[0mRemoving intermediate container bc8e28197902
 ---> 644770c81802
Step 15/27 : RUN wget -O hasicorp-hcl.tar.gz https://github.com/hashicorp/hcl/archive/master.tar.gz
 ---> Running in 7e6adfe32e61
[91m--2021-01-22 20:49:04--  https://github.com/hashicorp/hcl/archive/master.tar.gz
[0m[91mResolving github.com (github.com)... [0m[91m140.82.121.4
Connecting to github.com (github.com)|140.82.121.4|:443... [0m[91mconnected.
[0m[91mHTTP request sent, awaiting response... [0m[91m302 Found
Location: https://codeload.github.com/hashicorp/hcl/tar.gz/master [following]
--2021-01-22 20:49:05--  https://codeload.github.com/hashicorp/hcl/tar.gz/master
Resolving codeload.github.com (codeload.github.com)... [0m[91m140.82.121.10
Connecting to codeload.github.com (codeload.github.com)|140.82.121.10|:443... [0m[91mconnected.
[0m[91mHTTP request sent, awaiting response... [0m[91m200 OK
Length: unspecified [application/x-gzip]
Saving to: 'hasicorp-hcl.tar.gz'
[0m[91m
     0K .......... .[0m[91m.....[0m[91m.... ....[0m[91m...[0m[91m... .[0m[91m..[0m[91m....[0m[91m.[0m[91m.. .....[0m[91m.[0m[91m.... 1.77M
    50K ........[0m[91m.. ..[0m[91m.....[0m[91m... .                                1.54M=0.04s

[0m[91m2021-01-22 20:49:05 (1.70 MB/s) - 'hasicorp-hcl.tar.gz' saved [72944]

[0mRemoving intermediate container 7e6adfe32e61
 ---> ae0f70375956
Step 16/27 : FROM gcr.io/distroless/base:latest
latest: Pulling from distroless/base
5749e56bea71: Pulling fs layer
a3e61620654b: Pulling fs layer
5749e56bea71: Verifying Checksum
5749e56bea71: Download complete
5749e56bea71: Pull complete
a3e61620654b: Verifying Checksum
a3e61620654b: Download complete
a3e61620654b: Pull complete
Digest: sha256:5e0cc69445ed1d8a17198250a7249d56dd4b6966bb6b2118e60ae9194c310647
Status: Downloaded newer image for gcr.io/distroless/base:latest
 ---> 125289cb40fd
Step 17/27 : WORKDIR /
 ---> Running in 511ff18e8560
Removing intermediate container 511ff18e8560
 ---> 36c817e98312
Step 18/27 : COPY --from=builder /workspace/manager .
 ---> 14654d09f812
Step 19/27 : COPY licenses/license.txt licenses/license.txt
 ---> 7af5fbf10f09
Step 20/27 : COPY --from=builder /workspace/hashicorp-golang-lru.tar.gz licenses/mpl_source/hashicorp-golang-lru.tar.gz
 ---> ecf9a2dae47a
Step 21/27 : COPY --from=builder /workspace/armon-consul-api.tar.gz licenses/mpl_source/armon-consul-api.tar.gz
 ---> ff7c95f13e56
Step 22/27 : COPY --from=builder /workspace/hasicorp-hcl.tar.gz licenses/mpl_source/hasicorp-hcl.tar.gz
 ---> ecbad1f72fab
Step 23/27 : COPY generated/admissionregistration.k8s.io_v1beta1_validatingwebhookconfiguration_seldon-validating-webhook-configuration.yaml /tmp/operator-resources/validate.yaml
 ---> c0a4a52ba877
Step 24/27 : COPY generated/~g_v1_service_seldon-webhook-service.yaml /tmp/operator-resources/service.yaml
 ---> e8d29ec9656a
Step 25/27 : COPY generated/~g_v1_configmap_seldon-config.yaml /tmp/operator-resources/configmap.yaml
 ---> f7b3954cf092
Step 26/27 : COPY generated/apiextensions.k8s.io_v1beta1_customresourcedefinition_seldondeployments.machinelearning.seldon.io.yaml /tmp/operator-resources/crd.yaml
 ---> 80ae18fd9d4c
Step 27/27 : ENTRYPOINT ["/manager"]
 ---> Running in 382a746a9e43
Removing intermediate container 382a746a9e43
 ---> 49be139c8708
Successfully built 49be139c8708
Successfully tagged seldonio/seldon-core-operator:1.6.0-dev
kind load -v 3 docker-image seldonio/seldon-core-operator:1.6.0-dev --name kind
Image: "seldonio/seldon-core-operator:1.6.0-dev" with ID "sha256:49be139c8708ae9ed89b246dc8ba12421a145ab8feabc58e7e6d304fb9489e7f" not present on node "kind-control-plane"
Image: "seldonio/seldon-core-operator:1.6.0-dev" with ID "sha256:49be139c8708ae9ed89b246dc8ba12421a145ab8feabc58e7e6d304fb9489e7f" not present on node "kind-worker"
make[1]: Leaving directory '/workspace/source/operator'
Files changed in engine folder:
SKIPPING ENGINE IMAGE BUILD...
Files changed in executor folder:
SKIPPING EXECUTOR IMAGE BUILD...
Build test models
make -C ../../examples/models/mean_classifier kind_load
make[1]: Entering directory '/workspace/source/examples/models/mean_classifier'
s2i build -E environment . seldonio/seldon-core-s2i-python37-ubi8:1.6.0-dev seldonio/mock_classifier:1.6.0-dev
Before assembling
---> Installing application source...
---> Installing dependencies ...
Looking in links: /whl
Requirement already satisfied: seldon-core in ./python (from -r requirements.txt (line 1)) (1.6.0.dev0)
Requirement already satisfied: numpy in /opt/conda/lib/python3.7/site-packages (from -r requirements.txt (line 2)) (1.19.5)
Requirement already satisfied: Flask<2.0.0 in /opt/conda/lib/python3.7/site-packages (from seldon-core->-r requirements.txt (line 1)) (1.1.2)
Requirement already satisfied: jsonschema<4.0.0 in /opt/conda/lib/python3.7/site-packages (from seldon-core->-r requirements.txt (line 1)) (3.2.0)
Requirement already satisfied: Flask-cors<4.0.0 in /opt/conda/lib/python3.7/site-packages (from seldon-core->-r requirements.txt (line 1)) (3.0.10)
Requirement already satisfied: redis<4.0.0 in /opt/conda/lib/python3.7/site-packages (from seldon-core->-r requirements.txt (line 1)) (3.5.3)
Requirement already satisfied: requests<3.0.0 in /opt/conda/lib/python3.7/site-packages (from seldon-core->-r requirements.txt (line 1)) (2.22.0)
Requirement already satisfied: flatbuffers<2.0.0 in /opt/conda/lib/python3.7/site-packages (from seldon-core->-r requirements.txt (line 1)) (1.12)
Requirement already satisfied: protobuf<4.0.0 in /opt/conda/lib/python3.7/site-packages (from seldon-core->-r requirements.txt (line 1)) (3.14.0)
Requirement already satisfied: grpcio<2.0.0 in /opt/conda/lib/python3.7/site-packages (from seldon-core->-r requirements.txt (line 1)) (1.35.0)
Requirement already satisfied: Flask-OpenTracing<1.2.0,>=1.1.0 in /opt/conda/lib/python3.7/site-packages (from seldon-core->-r requirements.txt (line 1)) (1.1.0)
Requirement already satisfied: opentracing<2.5.0,>=2.2.0 in /opt/conda/lib/python3.7/site-packages (from seldon-core->-r requirements.txt (line 1)) (2.4.0)
Requirement already satisfied: jaeger-client<4.5.0,>=4.1.0 in /opt/conda/lib/python3.7/site-packages (from seldon-core->-r requirements.txt (line 1)) (4.4.0)
Requirement already satisfied: grpcio-opentracing<1.2.0,>=1.1.4 in /opt/conda/lib/python3.7/site-packages (from seldon-core->-r requirements.txt (line 1)) (1.1.4)
Requirement already satisfied: grpcio-reflection<1.35.0 in /opt/conda/lib/python3.7/site-packages (from seldon-core->-r requirements.txt (line 1)) (1.34.1)
Requirement already satisfied: PyYAML<5.4 in /opt/conda/lib/python3.7/site-packages (from seldon-core->-r requirements.txt (line 1)) (5.3.1)
Requirement already satisfied: gunicorn<20.1.0,>=19.9.0 in /opt/conda/lib/python3.7/site-packages (from seldon-core->-r requirements.txt (line 1)) (20.0.4)
Requirement already satisfied: setuptools>=41.0.0 in /opt/conda/lib/python3.7/site-packages (from seldon-core->-r requirements.txt (line 1)) (41.4.0)
Requirement already satisfied: prometheus_client<0.9.0,>=0.7.1 in /opt/conda/lib/python3.7/site-packages (from seldon-core->-r requirements.txt (line 1)) (0.8.0)
Requirement already satisfied: itsdangerous>=0.24 in /opt/conda/lib/python3.7/site-packages (from Flask<2.0.0->seldon-core->-r requirements.txt (line 1)) (1.1.0)
Requirement already satisfied: Jinja2>=2.10.1 in /opt/conda/lib/python3.7/site-packages (from Flask<2.0.0->seldon-core->-r requirements.txt (line 1)) (2.11.2)
Requirement already satisfied: Werkzeug>=0.15 in /opt/conda/lib/python3.7/site-packages (from Flask<2.0.0->seldon-core->-r requirements.txt (line 1)) (1.0.1)
Requirement already satisfied: click>=5.1 in /opt/conda/lib/python3.7/site-packages (from Flask<2.0.0->seldon-core->-r requirements.txt (line 1)) (7.1.2)
Requirement already satisfied: six>=1.11.0 in /opt/conda/lib/python3.7/site-packages (from jsonschema<4.0.0->seldon-core->-r requirements.txt (line 1)) (1.12.0)
Requirement already satisfied: pyrsistent>=0.14.0 in /opt/conda/lib/python3.7/site-packages (from jsonschema<4.0.0->seldon-core->-r requirements.txt (line 1)) (0.17.3)
Requirement already satisfied: importlib-metadata; python_version < "3.8" in /opt/conda/lib/python3.7/site-packages (from jsonschema<4.0.0->seldon-core->-r requirements.txt (line 1)) (3.4.0)
Requirement already satisfied: attrs>=17.4.0 in /opt/conda/lib/python3.7/site-packages (from jsonschema<4.0.0->seldon-core->-r requirements.txt (line 1)) (20.3.0)
Requirement already satisfied: certifi>=2017.4.17 in /opt/conda/lib/python3.7/site-packages (from requests<3.0.0->seldon-core->-r requirements.txt (line 1)) (2020.12.5)
Requirement already satisfied: chardet<3.1.0,>=3.0.2 in /opt/conda/lib/python3.7/site-packages (from requests<3.0.0->seldon-core->-r requirements.txt (line 1)) (3.0.4)
Requirement already satisfied: idna<2.9,>=2.5 in /opt/conda/lib/python3.7/site-packages (from requests<3.0.0->seldon-core->-r requirements.txt (line 1)) (2.8)
Requirement already satisfied: urllib3!=1.25.0,!=1.25.1,<1.26,>=1.21.1 in /opt/conda/lib/python3.7/site-packages (from requests<3.0.0->seldon-core->-r requirements.txt (line 1)) (1.24.2)
Requirement already satisfied: tornado>=4.3 in /opt/conda/lib/python3.7/site-packages (from jaeger-client<4.5.0,>=4.1.0->seldon-core->-r requirements.txt (line 1)) (6.1)
Requirement already satisfied: threadloop<2,>=1 in /opt/conda/lib/python3.7/site-packages (from jaeger-client<4.5.0,>=4.1.0->seldon-core->-r requirements.txt (line 1)) (1.0.2)
Requirement already satisfied: thrift in /opt/conda/lib/python3.7/site-packages (from jaeger-client<4.5.0,>=4.1.0->seldon-core->-r requirements.txt (line 1)) (0.13.0)
Requirement already satisfied: MarkupSafe>=0.23 in /opt/conda/lib/python3.7/site-packages (from Jinja2>=2.10.1->Flask<2.0.0->seldon-core->-r requirements.txt (line 1)) (1.1.1)
Requirement already satisfied: zipp>=0.5 in /opt/conda/lib/python3.7/site-packages (from importlib-metadata; python_version < "3.8"->jsonschema<4.0.0->seldon-core->-r requirements.txt (line 1)) (3.4.0)
Requirement already satisfied: typing-extensions>=3.6.4; python_version < "3.8" in /opt/conda/lib/python3.7/site-packages (from importlib-metadata; python_version < "3.8"->jsonschema<4.0.0->seldon-core->-r requirements.txt (line 1)) (3.7.4.3)
WARNING: Url '/whl' is ignored. It is either a non-existing path or lacks a specific scheme.
Collecting pip-licenses
Downloading https://files.pythonhosted.org/packages/89/05/3044295a5cf87c895022e915d888abdaa2ae7bdce741af462c9300fbebb3/pip_licenses-3.2.0-py3-none-any.whl
Collecting PTable (from pip-licenses)
Downloading https://files.pythonhosted.org/packages/ab/b3/b54301811173ca94119eb474634f120a49cd370f257d1aae5a4abaf12729/PTable-0.9.2.tar.gz
Building wheels for collected packages: PTable
Building wheel for PTable (setup.py): started
Building wheel for PTable (setup.py): finished with status 'done'
Created wheel for PTable: filename=PTable-0.9.2-cp37-none-any.whl size=22906 sha256=92bc536693ea56fab173cd16ebacd6c149dcddda47e5b7f42a0a4fc372ac0a41
Stored in directory: /root/.cache/pip/wheels/22/cc/2e/55980bfe86393df3e9896146a01f6802978d09d7ebcba5ea56
Successfully built PTable
Installing collected packages: PTable, pip-licenses
Successfully installed PTable-0.9.2 pip-licenses-3.2.0
created path: ./licenses/license_info.csv
created path: ./licenses/license.txt
After successful assembling
Build completed successfully
kind load -v 3 docker-image seldonio/mock_classifier:1.6.0-dev
Image: "seldonio/mock_classifier:1.6.0-dev" with ID "sha256:ae7be86e06b08c4580fde92e4dbce37458f6f4b4f4bddf2fe108e4ed3991190d" not present on node "kind-control-plane"
Image: "seldonio/mock_classifier:1.6.0-dev" with ID "sha256:ae7be86e06b08c4580fde92e4dbce37458f6f4b4f4bddf2fe108e4ed3991190d" not present on node "kind-worker"
make[1]: Leaving directory '/workspace/source/examples/models/mean_classifier'
make -C ../docker/fixed-model kind_load_images
make[1]: Entering directory '/workspace/source/testing/docker/fixed-model'
s2i build -E environment_v1 . seldonio/seldon-core-s2i-python3:1.6.0-dev seldonio/fixed-model:0.1
---> Installing application source...
Collecting pip-licenses
Downloading https://files.pythonhosted.org/packages/89/05/3044295a5cf87c895022e915d888abdaa2ae7bdce741af462c9300fbebb3/pip_licenses-3.2.0-py3-none-any.whl
Collecting PTable (from pip-licenses)
Downloading https://files.pythonhosted.org/packages/ab/b3/b54301811173ca94119eb474634f120a49cd370f257d1aae5a4abaf12729/PTable-0.9.2.tar.gz
Building wheels for collected packages: PTable
Building wheel for PTable (setup.py): started
Building wheel for PTable (setup.py): finished with status 'done'
Created wheel for PTable: filename=PTable-0.9.2-cp37-none-any.whl size=22906 sha256=90fd62f9d5eabfee011d2ec3989feea14ae822428dbae421908de34d2d43920f
Stored in directory: /root/.cache/pip/wheels/22/cc/2e/55980bfe86393df3e9896146a01f6802978d09d7ebcba5ea56
Successfully built PTable
Installing collected packages: PTable, pip-licenses
Successfully installed PTable-0.9.2 pip-licenses-3.2.0
created path: ./licenses/license_info.csv
created path: ./licenses/license.txt
Build completed successfully
s2i build -E environment_v2 . seldonio/seldon-core-s2i-python3:1.6.0-dev  seldonio/fixed-model:0.2
---> Installing application source...
Collecting pip-licenses
Downloading https://files.pythonhosted.org/packages/89/05/3044295a5cf87c895022e915d888abdaa2ae7bdce741af462c9300fbebb3/pip_licenses-3.2.0-py3-none-any.whl
Collecting PTable (from pip-licenses)
Downloading https://files.pythonhosted.org/packages/ab/b3/b54301811173ca94119eb474634f120a49cd370f257d1aae5a4abaf12729/PTable-0.9.2.tar.gz
Building wheels for collected packages: PTable
Building wheel for PTable (setup.py): started
Building wheel for PTable (setup.py): finished with status 'done'
Created wheel for PTable: filename=PTable-0.9.2-cp37-none-any.whl size=22906 sha256=95d2623a5d78517b937e9ad1ddf10e7a68b3d062c2b22769ea47de8639e81745
Stored in directory: /root/.cache/pip/wheels/22/cc/2e/55980bfe86393df3e9896146a01f6802978d09d7ebcba5ea56
Successfully built PTable
Installing collected packages: PTable, pip-licenses
Successfully installed PTable-0.9.2 pip-licenses-3.2.0
created path: ./licenses/license_info.csv
created path: ./licenses/license.txt
Build completed successfully
kind load -v 3 docker-image seldonio/fixed-model:0.1
Image: "seldonio/fixed-model:0.1" with ID "sha256:3ecfe3312e8519aecb805a0dcbc31cec0add677c8a982901a0d81de34723b8d2" not present on node "kind-control-plane"
Image: "seldonio/fixed-model:0.1" with ID "sha256:3ecfe3312e8519aecb805a0dcbc31cec0add677c8a982901a0d81de34723b8d2" not present on node "kind-worker"
kind load -v 3 docker-image seldonio/fixed-model:0.2
Image: "seldonio/fixed-model:0.2" with ID "sha256:6d162c0d1e0df3af7f94d5994148532fd5132de84b2bf9fd68b6bafee7a14380" not present on node "kind-control-plane"
Image: "seldonio/fixed-model:0.2" with ID "sha256:6d162c0d1e0df3af7f94d5994148532fd5132de84b2bf9fd68b6bafee7a14380" not present on node "kind-worker"
make[1]: Leaving directory '/workspace/source/testing/docker/fixed-model'
make -C ../docker/echo-model kind_load_image
make[1]: Entering directory '/workspace/source/testing/docker/echo-model'
s2i build \
	-E environment_rest \
	.\
	seldonio/seldon-core-s2i-python3:1.6.0-dev\
	seldonio/echo-model:0.1
---> Installing application source...
Collecting pip-licenses
Downloading https://files.pythonhosted.org/packages/89/05/3044295a5cf87c895022e915d888abdaa2ae7bdce741af462c9300fbebb3/pip_licenses-3.2.0-py3-none-any.whl
Collecting PTable (from pip-licenses)
Downloading https://files.pythonhosted.org/packages/ab/b3/b54301811173ca94119eb474634f120a49cd370f257d1aae5a4abaf12729/PTable-0.9.2.tar.gz
Building wheels for collected packages: PTable
Building wheel for PTable (setup.py): started
Building wheel for PTable (setup.py): finished with status 'done'
Created wheel for PTable: filename=PTable-0.9.2-cp37-none-any.whl size=22906 sha256=6248852f674cd36628a43864f28954053ef8d2ea35573a930d312344282251d4
Stored in directory: /root/.cache/pip/wheels/22/cc/2e/55980bfe86393df3e9896146a01f6802978d09d7ebcba5ea56
Successfully built PTable
Installing collected packages: PTable, pip-licenses
Successfully installed PTable-0.9.2 pip-licenses-3.2.0
created path: ./licenses/license_info.csv
created path: ./licenses/license.txt
Build completed successfully
kind load -v 3 docker-image seldonio/echo-model:0.1
Image: "seldonio/echo-model:0.1" with ID "sha256:654b2ce8052d4cef6ab198cd868bc82cf994e041974987e908a7628c3ed5c8ab" not present on node "kind-control-plane"
Image: "seldonio/echo-model:0.1" with ID "sha256:654b2ce8052d4cef6ab198cd868bc82cf994e041974987e908a7628c3ed5c8ab" not present on node "kind-worker"
make[1]: Leaving directory '/workspace/source/testing/docker/echo-model'
Files changed in prepackaged folder:
SKIPPING PREPACKAGED IMAGE BUILD...
Files changed in alibi explain folder:
SKIPPING ALIBI EXPLAIN IMAGE BUILD...
Files changed in alibi detect folder:
SKIPPING ALIBI DETECT IMAGE BUILD...
Files changed in misc folders:
SKIPPING MISC IMAGE BUILD...
kubectl create namespace seldon || echo "Namespace seldon already exists"
namespace/seldon created
kubectl create namespace test1 || echo "Namespace test1 already exists"
namespace/test1 created
helm repo add seldonio https://storage.googleapis.com/seldon-charts
"seldonio" has been added to your repositories
helm repo add jaegertracing https://jaegertracing.github.io/helm-charts
"jaegertracing" has been added to your repositories
helm repo add datawire https://www.getambassador.io
"datawire" has been added to your repositories
helm repo update
Hang tight while we grab the latest from your chart repositories...
...Successfully got an update from the "jaegertracing" chart repository
...Successfully got an update from the "seldonio" chart repository
...Successfully got an update from the "datawire" chart repository
Update Complete. ⎈ Happy Helming!⎈ 
helm upgrade ambassador \
	datawire/ambassador \
	-f ../resources/ambassador_values.yaml \
	--set image.repository=quay.io/datawire/ambassador \
	--set crds.keep=false \
	--set enableAES=false \
	--namespace seldon \
	--set replicaCount=1 \
	--wait --install
Release "ambassador" does not exist. Installing it now.
manifest_sorter.go:192: info: skipping unknown hook: "crd-install"
manifest_sorter.go:192: info: skipping unknown hook: "crd-install"
manifest_sorter.go:192: info: skipping unknown hook: "crd-install"
manifest_sorter.go:192: info: skipping unknown hook: "crd-install"
manifest_sorter.go:192: info: skipping unknown hook: "crd-install"
manifest_sorter.go:192: info: skipping unknown hook: "crd-install"
manifest_sorter.go:192: info: skipping unknown hook: "crd-install"
manifest_sorter.go:192: info: skipping unknown hook: "crd-install"
manifest_sorter.go:192: info: skipping unknown hook: "crd-install"
manifest_sorter.go:192: info: skipping unknown hook: "crd-install"
manifest_sorter.go:192: info: skipping unknown hook: "crd-install"
manifest_sorter.go:192: info: skipping unknown hook: "crd-install"
manifest_sorter.go:192: info: skipping unknown hook: "crd-install"
manifest_sorter.go:192: info: skipping unknown hook: "crd-install"
manifest_sorter.go:192: info: skipping unknown hook: "crd-install"
manifest_sorter.go:192: info: skipping unknown hook: "crd-install"
manifest_sorter.go:192: info: skipping unknown hook: "crd-install"
manifest_sorter.go:192: info: skipping unknown hook: "crd-install"
manifest_sorter.go:192: info: skipping unknown hook: "crd-install"
NAME: ambassador
LAST DEPLOYED: Fri Jan 22 20:54:49 2021
NAMESPACE: seldon
STATUS: deployed
REVISION: 1
NOTES:
-------------------------------------------------------------------------------
  Congratulations! You've successfully installed Ambassador!

-------------------------------------------------------------------------------
To get the IP address of Ambassador, run the following commands:
  export NODE_PORT=$(kubectl get --namespace seldon -o jsonpath="{.spec.ports[0].nodePort}" services ambassador)
  export NODE_IP=$(kubectl get nodes --namespace seldon -o jsonpath="{.items[0].status.addresses[0].address}")
  echo http://$NODE_IP:$NODE_PORT

For help, visit our Slack at https://d6e.co/slack or view the documentation online at https://www.getambassador.io.
curl -L https://istio.io/downloadIstio | ISTIO_VERSION=1.6.8 TARGET_ARCH=x86_64 sh -
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0100   102  100   102    0     0    238      0 --:--:-- --:--:-- --:--:--   238
100  4579  100  4579    0     0   6753      0 --:--:-- --:--:-- --:--:--  6753

Downloading istio-1.6.8 from https://github.com/istio/istio/releases/download/1.6.8/istio-1.6.8-linux-amd64.tar.gz ...

Istio 1.6.8 Download Complete!

Istio has been successfully downloaded into the istio-1.6.8 folder on your system.

Next Steps:
See https://istio.io/latest/docs/setup/install/ to add Istio to your Kubernetes cluster.

To configure the istioctl client tool for your workstation,
add the /workspace/source/testing/scripts/istio-1.6.8/bin directory to your environment path variable with:
	 export PATH="$PATH:/workspace/source/testing/scripts/istio-1.6.8/bin"

Begin the Istio pre-installation check by running:
	 istioctl x precheck 

Need more information? Visit https://istio.io/latest/docs/setup/install/ 
istio-1.6.8/bin/istioctl install --set profile=demo
Detected that your cluster does not support third party JWT authentication. Falling back to less secure first party JWT. See https://istio.io/docs/ops/best-practices/security/#configure-third-party-service-account-tokens for details.

- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
✔ Istio core installed
- Processing resources for Istiod.
- Processing resources for Istiod.
- Processing resources for Istiod.
- Processing resources for Istiod.
- Processing resources for Istiod.
- Processing resources for Istiod.
- Processing resources for Istiod.
- Processing resources for Istiod.
- Processing resources for Istiod.
- Processing resources for Istiod.
- Processing resources for Istiod.
- Processing resources for Istiod.
- Processing resources for Istiod.
- Processing resources for Istiod.
- Processing resources for Istiod.
- Processing resources for Istiod.
- Processing resources for Istiod. Waiting for Deployment/istio-system/istiod
- Processing resources for Istiod. Waiting for Deployment/istio-system/istiod
- Processing resources for Istiod. Waiting for Deployment/istio-system/istiod
- Processing resources for Istiod. Waiting for Deployment/istio-system/istiod
- Processing resources for Istiod. Waiting for Deployment/istio-system/istiod
- Processing resources for Istiod. Waiting for Deployment/istio-system/istiod
✔ Istiod installed
- Processing resources for Egress gateways, Ingress gateways.
- Processing resources for Egress gateways, Ingress gateways.
- Processing resources for Egress gateways, Ingress gateways.
- Processing resources for Egress gateways, Ingress gateways.
- Processing resources for Egress gateways, Ingress gateways.
- Processing resources for Egress gateways, Ingress gateways.
- Processing resources for Egress gateways, Ingress gateways.
- Processing resources for Egress gateways, Ingress gateways.
- Processing resources for Egress gateways, Ingress gateways.
- Processing resources for Egress gateways, Ingress gateways. Waiting for Deployment/istio-system...
- Processing resources for Egress gateways, Ingress gateways. Waiting for Deployment/istio-system...
- Processing resources for Egress gateways, Ingress gateways. Waiting for Deployment/istio-system...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
✔ Ingress gateways installed
- Processing resources for Addons, Egress gateways. Waiting for Deployment/istio-system/grafana, ...
✔ Egress gateways installed
- Processing resources for Addons. Waiting for Deployment/istio-system/grafana, Deployment/istio-...
- Processing resources for Addons. Waiting for Deployment/istio-system/grafana, Deployment/istio-...
- Processing resources for Addons. Waiting for Deployment/istio-system/grafana, Deployment/istio-...
- Processing resources for Addons. Waiting for Deployment/istio-system/grafana, Deployment/istio-...
- Processing resources for Addons. Waiting for Deployment/istio-system/grafana, Deployment/istio-...
- Processing resources for Addons. Waiting for Deployment/istio-system/grafana, Deployment/istio-...
- Processing resources for Addons. Waiting for Deployment/istio-system/grafana, Deployment/istio-...
- Processing resources for Addons. Waiting for Deployment/istio-system/kiali, Deployment/istio-sy...
- Processing resources for Addons. Waiting for Deployment/istio-system/kiali, Deployment/istio-sy...
- Processing resources for Addons. Waiting for Deployment/istio-system/kiali, Deployment/istio-sy...
- Processing resources for Addons. Waiting for Deployment/istio-system/kiali, Deployment/istio-sy...
- Processing resources for Addons. Waiting for Deployment/istio-system/kiali, Deployment/istio-sy...
- Processing resources for Addons. Waiting for Deployment/istio-system/kiali, Deployment/istio-sy...
- Processing resources for Addons. Waiting for Deployment/istio-system/kiali
- Processing resources for Addons. Waiting for Deployment/istio-system/kiali
- Processing resources for Addons. Waiting for Deployment/istio-system/kiali
- Processing resources for Addons. Waiting for Deployment/istio-system/kiali
- Processing resources for Addons. Waiting for Deployment/istio-system/kiali
- Processing resources for Addons. Waiting for Deployment/istio-system/kiali
✔ Addons installed
- Pruning removed resources
kubectl patch svc istio-ingressgateway -n istio-system --patch "$(cat ../resources/istio-ingressgateway-patch.yaml)"
service/istio-ingressgateway patched
kubectl create -f ../resources/seldon-gateway.yaml -n istio-system
gateway.networking.istio.io/seldon-gateway created
kubectl apply -f https://github.com/kedacore/keda/releases/download/v2.0.0/keda-2.0.0.yaml
namespace/keda created
customresourcedefinition.apiextensions.k8s.io/scaledjobs.keda.sh created
customresourcedefinition.apiextensions.k8s.io/scaledobjects.keda.sh created
customresourcedefinition.apiextensions.k8s.io/triggerauthentications.keda.sh created
serviceaccount/keda-operator created
clusterrole.rbac.authorization.k8s.io/keda-external-metrics-reader created
clusterrole.rbac.authorization.k8s.io/keda-operator created
rolebinding.rbac.authorization.k8s.io/keda-auth-reader created
clusterrolebinding.rbac.authorization.k8s.io/keda-hpa-controller-external-metrics created
clusterrolebinding.rbac.authorization.k8s.io/keda-operator created
clusterrolebinding.rbac.authorization.k8s.io/keda:system:auth-delegator created
service/keda-metrics-apiserver created
deployment.apps/keda-metrics-apiserver created
deployment.apps/keda-operator created
apiservice.apiregistration.k8s.io/v1beta1.external.metrics.k8s.io created
helm upgrade jaeger-operator \
	jaegertracing/jaeger-operator \
	--set rbac.clusterRole=true \
	--namespace seldon \
	--wait --install
Release "jaeger-operator" does not exist. Installing it now.
✔ Installation completemanifest_sorter.go:192: info: skipping unknown hook: "crd-install"
NAME: jaeger-operator
LAST DEPLOYED: Fri Jan 22 20:56:56 2021
NAMESPACE: seldon
STATUS: deployed
REVISION: 1
TEST SUITE: None
NOTES:
jaeger-operator is installed.


Check the jaeger-operator logs
  export POD=$(kubectl get pods -l app.kubernetes.io/instance=jaeger-operator -lapp.kubernetes.io/name=jaeger-operator --namespace seldon --output name)
  kubectl logs $POD --namespace=seldon
kubectl apply -f ../resources/jaeger.yaml --namespace seldon
jaeger.jaegertracing.io/jaeger created
mapping.getambassador.io/jaeger created
kubectl create namespace seldon-system || echo "namespace seldon-system exists"
namespace/seldon-system created
helm delete seldon --namespace seldon-system || echo "seldon-core not installed"
Error: uninstall: Release not loaded: seldon: release: not found
seldon-core not installed
helm upgrade seldon \
	../../helm-charts/seldon-core-operator \
	--namespace seldon-system \
	--set istio.enabled=true \
	--set keda.enabled=true \
	--set istio.gateway=istio-system/seldon-gateway \
	--set certManager.enabled=false \
	--wait --install
Release "seldon" does not exist. Installing it now.
Error: secrets "seldon-webhook-server-cert" already exists
make: *** [Makefile:94: install_seldon] Error 1
Kind setup returned errors
kind delete cluster
Deleting cluster "kind" ...
Stopping Docker: dockerProgram process in pidfile '/var/run/docker-ssd.pid', 1 process(es), refused to die.
[31m
Pipeline failed on stage 'end-to-end' : container 'step-test-end-to-end'. The execution of the pipeline has stopped.[0m
