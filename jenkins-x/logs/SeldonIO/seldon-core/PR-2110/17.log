
Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-gbtxw-17[0m stage [32mpr-build-comment[0m and container [32mstep-credential-initializer-xwjmm[0m
{"level":"info","ts":1595944651.5944164,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/refs/heads/0.8.0-ns-support: no such file or directory"}
{"level":"info","ts":1595944651.595085,"logger":"fallback-logger","caller":"creds-init/main.go:40","msg":"Credentials initialized."}

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-gbtxw-17[0m stage [32mpr-build-comment[0m and container [32mstep-working-dir-initializer-67jjw[0m
{"level":"info","ts":1595944652.165528,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/HEAD: no such file or directory"}
{"level":"info","ts":1595944652.1680589,"logger":"fallback-logger","caller":"bash/main.go:64","msg":"Successfully executed command \"sh -c mkdir -p /workspace/source\"; output "}

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-gbtxw-17[0m stage [32mpr-build-comment[0m and container [32mstep-place-tools[0m

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-gbtxw-17[0m stage [32mpr-build-comment[0m and container [32mstep-create-dir-workspace-l4td8[0m
{"level":"info","ts":1595944671.131903,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/HEAD: no such file or directory"}
{"level":"info","ts":1595944671.1350508,"logger":"fallback-logger","caller":"bash/main.go:64","msg":"Successfully executed command \"sh -c mkdir -p source\"; output "}

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-gbtxw-17[0m stage [32mpr-build-comment[0m and container [32mstep-git-source-seldonio-seldon-core-pr-2110-pr-gbtxw-5vmxx[0m
{"level":"info","ts":1595944671.553033,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/refs/heads/0.8.0-ns-support: no such file or directory"}
{"level":"info","ts":1595944677.5587535,"logger":"fallback-logger","caller":"git/git.go:103","msg":"Successfully cloned https://github.com/SeldonIO/seldon-core.git @ master in path /workspace/source"}

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-gbtxw-17[0m stage [32mpr-build-comment[0m and container [32mstep-setup-builder-home[0m

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-gbtxw-17[0m stage [32mpr-build-comment[0m and container [32mstep-git-merge[0m
Using SHAs from PULL_REFS=release-1.2.2:5c5f6732ad14ae32164952ae1a2e70ebda06c91f,2110:210f0709860a0b0d2ed0472aaafaeb2b43975c06
DEBUG: LC_ALL=C JX_LOG_LEVEL=error git fetch origin --unshallow 210f0709860a0b0d2ed0472aaafaeb2b43975c06: 5c5f6732ad14ae32164952ae1a2e70ebda06c91f:
DEBUG: ran git fetch --unshallow origin 210f0709860a0b0d2ed0472aaafaeb2b43975c06: 5c5f6732ad14ae32164952ae1a2e70ebda06c91f: in 
DEBUG: JX_LOG_LEVEL=error LC_ALL=C git branch
DEBUG: LC_ALL=C JX_LOG_LEVEL=error git branch release-1.2.2
DEBUG: JX_LOG_LEVEL=error LC_ALL=C git checkout release-1.2.2
DEBUG: ran git checkout release-1.2.2 in 
DEBUG: LC_ALL=C JX_LOG_LEVEL=error git reset --hard 5c5f6732ad14ae32164952ae1a2e70ebda06c91f
DEBUG: ran git reset --hard 5c5f6732ad14ae32164952ae1a2e70ebda06c91f in 
DEBUG: LC_ALL=C JX_LOG_LEVEL=error git clean -fd .
DEBUG: ran clean --force -d . in 
DEBUG: LC_ALL=C JX_LOG_LEVEL=error git merge 210f0709860a0b0d2ed0472aaafaeb2b43975c06
DEBUG: ran git merge 210f0709860a0b0d2ed0472aaafaeb2b43975c06 in 
DEBUG: LC_ALL=C JX_LOG_LEVEL=error git log --format=%H%x1f%an%x1f%ae%x1f%cn%x1f%ce%x1f%s%n%b%x1e 5c5f6732ad14ae32164952ae1a2e70ebda06c91f..HEAD
Merged SHA 5773e9c2b1e8ae9c17ea1cc4a5a9746fffcf1e8c with commit message 'Merge commit '210f0709860a0b0d2ed0472aaafaeb2b43975c06' into release-1.2.2' into base branch release-1.2.2
Merged SHA 210f0709860a0b0d2ed0472aaafaeb2b43975c06 with commit message 'Reformatted' into base branch release-1.2.2
Merged SHA a9fad0d7af3588326200769bb7c5f48fcb27da19 with commit message 'Added default logger' into base branch release-1.2.2
Merged SHA 213cf2753826580a8399c8134ad164227eefcfcc with commit message 'Updated files' into base branch release-1.2.2
Merged SHA 924046f3d28a0e81b42c75615dc5bd8c1c0361e8 with commit message 'Added dashboard exported' into base branch release-1.2.2
Merged SHA 3ffa8a52b87f50610a6503df6707f180f3ef8c16 with commit message 'Updated readme' into base branch release-1.2.2
Merged SHA e783e448cdef7f53cdbf84518594becb67a0a5d1 with commit message 'updated example to include multiclass' into base branch release-1.2.2
Merged SHA 8146952bbc04be5bf1e49261cfcb3f686a3c9b62 with commit message 'Fixed metrics to ensure tags are also enforcing uniqueness' into base branch release-1.2.2
Merged SHA c5937fc080258e8eb841343f11981b49c031eb80 with commit message 'Updated example to have binary classifier' into base branch release-1.2.2
Merged SHA d21bea919a4616a0380facd9e4b0a531b2ad9405 with commit message 'Updated to add custom performance of models' into base branch release-1.2.2
Merged SHA 014d25782fc91eac68530aeccf0cb81518bec28c with commit message 'Added python wrapper code to allow for feedback to be processed with metrics' into base branch release-1.2.2
Merged SHA 1fcc53e19db5300391863cd860e28c0b45e3a8c2 with commit message 'Added further steps to example to cover how to use model' into base branch release-1.2.2
Merged SHA cd97c666f9af14a41658ad456c0d6bc3bdf68688 with commit message 'Added explanantions' into base branch release-1.2.2
Merged SHA 9cc4b064549651378bab2d95df4d7e466e58803b with commit message 'Updated to metrics image' into base branch release-1.2.2
Merged SHA 74e0b7a03ea18a8dfffa3900912ea75b02e5595d with commit message 'Updated request logger to return correct error' into base branch release-1.2.2
Merged SHA ed21bff85bc3b28ea442c445f129053ea08de00a with commit message 'Added model server core example' into base branch release-1.2.2
Merged SHA c7101aba10b6fce7942ae8b061f9f9b94db1c81d with commit message 'Extended example to show how the stateful server would work' into base branch release-1.2.2
Merged SHA a65b6de179f3481f3cdfaf0cd2fb41740594aa25 with commit message 'Added graph' into base branch release-1.2.2
Merged SHA 0dc204d7af320e55b38f35b181ab13d70d5b2e7f with commit message 'added feedback provided' into base branch release-1.2.2
Merged SHA 8ca4c528cad355bb55eb8fafce0dc829384b56b3 with commit message 'Added example metrics server' into base branch release-1.2.2
Merged SHA 02c89f3bb81e4d9f675926b726d218b69114b213 with commit message 'Added example metrics server' into base branch release-1.2.2
Merged SHA 305b75cdb25b1ce27ca8e8062103a2dc6232bb7d with commit message 'Updated to add extra examples' into base branch release-1.2.2
Merged SHA f569f4a22d5af3de8aa6e4e4b516d2808443c1ad with commit message 'Added examples for stateful metrics' into base branch release-1.2.2
Merged SHA 0ea37e3147ea5afb2d490f932cceeea746d043e7 with commit message 'Initial example for stateful metrics' into base branch release-1.2.2
Merged SHA 702e4962293a21e3881fa2a643a36d0904607d9e with commit message 'Added functionality to request logger to store feedback with outstanding todos and ran linter' into base branch release-1.2.2
Merged SHA 7261b44f6d6da3ef42c84bf6a1933d0262f2473a with commit message 'Added executor functionality to send feedback' into base branch release-1.2.2
Merged SHA 5dfc5a706f337293c294b7a41366af794f9f12c0 with commit message 'Added default logger' into base branch release-1.2.2
Merged SHA 3231006acceb8a5868a3a041d34183bbc87ca1ad with commit message 'Updated files' into base branch release-1.2.2
Merged SHA c6d1e55375b3d6c8f7978e6d0639bcd1fb52e3c1 with commit message 'Added dashboard exported' into base branch release-1.2.2
Merged SHA 3613407f0ac09dca20bf7b8760e7c89ce03f2d13 with commit message 'run linter to make CI happy' into base branch release-1.2.2
Merged SHA 51b59928a91e087837de6e0630efcfd03f08868b with commit message 'bump zap from v1.10.0 to v1.15.0' into base branch release-1.2.2
Merged SHA 607e6b80f1c101374206c9948c159e6659971aa2 with commit message 'Upgrade knative.dev depdendency to relase-0.14.' into base branch release-1.2.2
Merged SHA 52b634f1675c7371479e98b16057e439d07bbe0b with commit message 'Upgrade istio.io dependencies in the operator (1.5 release branch)' into base branch release-1.2.2
Merged SHA bb8769e2181af5d688e48a6a1215eed381605e78 with commit message 'operator: controller-runtime upgrade to v0.5.8' into base branch release-1.2.2
Merged SHA d23db1319b812c2ab8cf9509125dad84549a1a30 with commit message 'Update go.mod' into base branch release-1.2.2
Merged SHA d310ccc2c91e720aeba2b3759049bd3e7d22a179 with commit message 'Remove completely SeldonDeploymentClient since it's not used anymore' into base branch release-1.2.2
Merged SHA 1d0a76a38ee9dbc0ce4599d6d376299b63619b37 with commit message 'REMOVAL: k8s.io/client-go' into base branch release-1.2.2
Merged SHA 4eb34016e8c493439d6103d2b366f15824abe0ef with commit message 'Fix order in go.mod' into base branch release-1.2.2
Merged SHA 326cc72941181dd743e433cb87d113c017155258 with commit message 'Update docs' into base branch release-1.2.2
Merged SHA 0d8c726bb7e174a38eedf25ddcc086a998dc9422 with commit message 'Typo' into base branch release-1.2.2
Merged SHA 7fa59068690de48f226da288acc48c763cc340a3 with commit message 'Fix tests' into base branch release-1.2.2
Merged SHA 3061bb567f999c848e0b28ef52a3f16bc86b43a9 with commit message 'Move GetEnv to operator/utils package and add GetEnvAsBool' into base branch release-1.2.2
Merged SHA 383ccf1bea19fb0762105c1284d45087bcead8b2 with commit message 'Remove debug parameter' into base branch release-1.2.2
Merged SHA da00af4351b64abf8e924288d245b1643a7c04a4 with commit message 'Default to info' into base branch release-1.2.2
Merged SHA 003bc2ae28bac84c6c4383c045ed84705d434d59 with commit message 'Set debug and log level independently' into base branch release-1.2.2
Merged SHA 0eb057df58e62cf96d0e0597962c391ea6fbce9a with commit message 'Add flags for debug and log level' into base branch release-1.2.2
Merged SHA 4aaf5f30a9268621066c1fe5885c4de92fee22a4 with commit message 'Add GetEnvAsBool helper' into base branch release-1.2.2
Merged SHA c4f9c528a015496db146c4d5c59d01fefaaef14e with commit message 'update header' into base branch release-1.2.2
Merged SHA a8786ddec03b5b127fb10c1f2f7d1d95fb9ebac8 with commit message 'Update log level docs' into base branch release-1.2.2
Merged SHA 3ea3cf48dc12ab020e7b3da12975e0f9c4e20b65 with commit message 'Read SELDON_LOG_LEVEL env var' into base branch release-1.2.2
Merged SHA d5612e2cfdd55c2153ac3ead4c4dbd6f615f05b0 with commit message 'Add debug flag' into base branch release-1.2.2
Merged SHA a32dd832bd7f9a0a99731216c36dd671f0e5046f with commit message 'Disable debug mode in operator logs' into base branch release-1.2.2
Merged SHA 65feac6818ada278c54a50d593d701cc38162dde with commit message 'Propagate log level to access logs' into base branch release-1.2.2
Merged SHA d45c3fdce4e39900231e3470db3db0e2fefc6037 with commit message 'Move some logs to V(1)' into base branch release-1.2.2
Merged SHA be5e3c5fda2c4bae2d60435ccb387a003c2cdf2b with commit message 'Move errors to logger' into base branch release-1.2.2
Merged SHA d6a284601295623d7c4310fb7158620278cd402c with commit message 'Use WARNING as default in Python wrapper' into base branch release-1.2.2
Merged SHA dc512c802adb1c98595c32073f71e2394136ce00 with commit message 'Use WARN as default in Java engine' into base branch release-1.2.2
Merged SHA 6adde004c912693733d2a6e3587b079abd42e2b9 with commit message 'Updated readme' into base branch release-1.2.2
Merged SHA 79196344d190b557cb8ab0702846bab5401b2f3a with commit message 'updated example to include multiclass' into base branch release-1.2.2
Merged SHA cf1cc44a741b1b20c8f70a1f0e5cb733f8248cd4 with commit message 'Fixed metrics to ensure tags are also enforcing uniqueness' into base branch release-1.2.2
Merged SHA ca2ba2a3bb60a98873a7f31df46f04fdfad7c4d5 with commit message 'Updated example to have binary classifier' into base branch release-1.2.2
Merged SHA 3e83d99ef9a7ed8ec3d583e45f3d137f98e0fba6 with commit message 'Updated to add custom performance of models' into base branch release-1.2.2
Merged SHA e8022764abb15d4960ed53bb4d5abce9d68b9a0b with commit message 'Added python wrapper code to allow for feedback to be processed with metrics' into base branch release-1.2.2
Merged SHA 8f7d44f5efb4841b31d379999c664c869eed19f2 with commit message 'Added further steps to example to cover how to use model' into base branch release-1.2.2
Merged SHA ae18f82c2aa9905a5722b80081ac73b84e3a9314 with commit message 'Added explanantions' into base branch release-1.2.2
Merged SHA 312d805ca848e8cff1f25f83f6752c1d80ab1356 with commit message 'Updated to metrics image' into base branch release-1.2.2
Merged SHA aa7c262390859a7b1423c9d2aab1568a1de5db8b with commit message 'Updated request logger to return correct error' into base branch release-1.2.2
Merged SHA 8ab0acd29863313c52a6e6ead50daa9ff338d206 with commit message 'Added model server core example' into base branch release-1.2.2
Merged SHA f28d64845d82bd733bc60b6b11d2b2401f617672 with commit message 'Extended example to show how the stateful server would work' into base branch release-1.2.2
Merged SHA b01f3259c06ce22756794cd71bbdd65cd1240f06 with commit message 'Added graph' into base branch release-1.2.2
Merged SHA a4ad0b7eac07e5108a04d006633d5b537372e86e with commit message 'added feedback provided' into base branch release-1.2.2
Merged SHA 7766bf1ef5b950f750b859b98beadadc97fa8a0f with commit message 'Added example metrics server' into base branch release-1.2.2
Merged SHA cc31e2edda75a8f22ab3f6cb79689b2d23430093 with commit message 'Added example metrics server' into base branch release-1.2.2
Merged SHA 1452a863fe32798161973514d7a206632067d5cc with commit message 'Updated to add extra examples' into base branch release-1.2.2
Merged SHA e01197724fdb6f645191c6920cc2555edfa9befe with commit message 'Added examples for stateful metrics' into base branch release-1.2.2
Merged SHA 09bf4ad869855f4b88b1894fdcf037c1e5313ebb with commit message 'Initial example for stateful metrics' into base branch release-1.2.2
Merged SHA 74b01eca44b761ad27195db259570f13b9a26192 with commit message 'Added functionality to request logger to store feedback with outstanding todos and ran linter' into base branch release-1.2.2
Merged SHA df4d2a30e7e80faacfed7b48f26bc74e20a95291 with commit message 'Added executor functionality to send feedback' into base branch release-1.2.2

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-gbtxw-17[0m stage [32mpr-build-comment[0m and container [32mstep-step2[0m
+++ dirname ./add-pr-build-comment
++ cd .
++ pwd
+ STARTUP_DIR=/workspace/source/ci
+ REPO_OWNER=SeldonIO
+ REPO_NAME=seldon-core
+ PULL_NUMBER=2110
+ BUILD_NUMBER=17
+ PIPELINE_CONTEXT=pr-build
++ cat
+++ date
+ COMMENT_MSG='Tue Jul 28 13:58:06 UTC 2020
The logs for [pr-build] [17] will show after the pipeline context has finished.  
https://github.com/SeldonIO/seldon-core/blob/gh-pages/jenkins-x/logs/SeldonIO/seldon-core/PR-2110/17.log

impatient try  
** get build logs SeldonIO/seldon-core/PR-2110 --build=17'
+ ** step pr comment --owner=SeldonIO --repository=seldon-core --pull-request=2110 '--comment=Tue Jul 28 13:58:06 UTC 2020
The logs for [pr-build] [17] will show after the pipeline context has finished.  
https://github.com/SeldonIO/seldon-core/blob/gh-pages/jenkins-x/logs/SeldonIO/seldon-core/PR-2110/17.log

impatient try  
** get build logs SeldonIO/seldon-core/PR-2110 --build=17'

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-gbtxw-17[0m stage [32mpr-build-comment[0m and container [32mstep-source-mkdir-seldonio-seldon-core-pr-2110-pr-gbtxw-rtmbp[0m
{"level":"info","ts":1595944688.2241373,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/HEAD: no such file or directory"}
{"level":"info","ts":1595944688.2289095,"logger":"fallback-logger","caller":"bash/main.go:64","msg":"Successfully executed command \"sh -c mkdir -p /pvc/pr-build-comment/workspace\"; output "}

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-gbtxw-17[0m stage [32mpr-build-comment[0m and container [32mstep-source-copy-seldonio-seldon-core-pr-2110-pr-gbtxw-8rhw9[0m
{"level":"info","ts":1595944688.3769507,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/HEAD: no such file or directory"}
{"level":"info","ts":1595944689.3457627,"logger":"fallback-logger","caller":"bash/main.go:64","msg":"Successfully executed command \"sh -c cp -r source/. /pvc/pr-build-comment/workspace\"; output "}

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-gbtxw-17[0m stage [32mseldon-operator[0m and container [32mstep-credential-initializer-99lqj[0m
{"level":"info","ts":1595944714.4876347,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/refs/heads/0.8.0-ns-support: no such file or directory"}
{"level":"info","ts":1595944714.4882357,"logger":"fallback-logger","caller":"creds-init/main.go:40","msg":"Credentials initialized."}

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-gbtxw-17[0m stage [32mseldon-operator[0m and container [32mstep-working-dir-initializer-fvqb9[0m
{"level":"info","ts":1595944717.544988,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/HEAD: no such file or directory"}
{"level":"info","ts":1595944717.5462575,"logger":"fallback-logger","caller":"bash/main.go:64","msg":"Successfully executed command \"sh -c mkdir -p /workspace/source\"; output "}

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-gbtxw-17[0m stage [32mseldon-operator[0m and container [32mstep-place-tools[0m

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-gbtxw-17[0m stage [32mseldon-operator[0m and container [32mstep-create-dir-workspace-qtqnd[0m
{"level":"info","ts":1595944731.3237345,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/HEAD: no such file or directory"}
{"level":"info","ts":1595944731.326607,"logger":"fallback-logger","caller":"bash/main.go:64","msg":"Successfully executed command \"sh -c mkdir -p /workspace/source\"; output "}

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-gbtxw-17[0m stage [32mseldon-operator[0m and container [32mstep-source-copy-workspace-49qts[0m
{"level":"info","ts":1595944732.2014096,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/HEAD: no such file or directory"}
{"level":"info","ts":1595944741.2505884,"logger":"fallback-logger","caller":"bash/main.go:64","msg":"Successfully executed command \"sh -c cp -r /pvc/pr-build-comment/workspace/. /workspace/source\"; output "}

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-gbtxw-17[0m stage [32mseldon-operator[0m and container [32mstep-setup-builder-home[0m

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-gbtxw-17[0m stage [32mseldon-operator[0m and container [32mstep-test-operator[0m
make: Entering directory '/workspace/source/operator'
go: creating new go.mod: module tmp
go: finding sigs.k8s.io v0.2.5
go: finding sigs.k8s.io/controller-tools/cmd/controller-gen v0.2.5
go: finding sigs.k8s.io/controller-tools/cmd v0.2.5
go: finding sigs.k8s.io/controller-tools v0.2.5
go: downloading sigs.k8s.io/controller-tools v0.2.5
go: extracting sigs.k8s.io/controller-tools v0.2.5
go: downloading github.com/spf13/cobra v0.0.5
go: downloading k8s.io/apimachinery v0.17.0
go: downloading github.com/fatih/color v1.7.0
go: downloading k8s.io/api v0.17.0
go: downloading golang.org/x/tools v0.0.0-20190920225731-5eefd052ad72
go: downloading sigs.k8s.io/yaml v1.1.0
go: downloading k8s.io/apiextensions-apiserver v0.17.0
go: extracting github.com/fatih/color v1.7.0
go: downloading gopkg.in/yaml.v3 v3.0.0-20190905181640-827449938966
go: extracting sigs.k8s.io/yaml v1.1.0
go: extracting github.com/spf13/cobra v0.0.5
go: extracting gopkg.in/yaml.v3 v3.0.0-20190905181640-827449938966
go: downloading github.com/mattn/go-colorable v0.1.2
go: downloading gopkg.in/yaml.v2 v2.2.4
go: extracting gopkg.in/yaml.v2 v2.2.4
go: extracting github.com/mattn/go-colorable v0.1.2
go: extracting k8s.io/apimachinery v0.17.0
go: downloading github.com/gobuffalo/flect v0.2.0
go: downloading github.com/inconshreveable/mousetrap v1.0.0
go: extracting github.com/gobuffalo/flect v0.2.0
go: extracting github.com/inconshreveable/mousetrap v1.0.0
go: extracting k8s.io/apiextensions-apiserver v0.17.0
go: downloading github.com/spf13/pflag v1.0.5
go: extracting github.com/spf13/pflag v1.0.5
go: extracting golang.org/x/tools v0.0.0-20190920225731-5eefd052ad72
go: extracting k8s.io/api v0.17.0
go: downloading k8s.io/klog v1.0.0
go: downloading github.com/mattn/go-isatty v0.0.8
go: downloading github.com/google/gofuzz v1.0.0
go: extracting github.com/mattn/go-isatty v0.0.8
go: extracting github.com/google/gofuzz v1.0.0
go: downloading golang.org/x/sys v0.0.0-20190826190057-c7b8b68b1456
go: downloading github.com/gogo/protobuf v1.2.2-0.20190723190241-65acae22fc9d
go: downloading golang.org/x/net v0.0.0-20191004110552-13f9640d40b9
go: extracting k8s.io/klog v1.0.0
go: downloading k8s.io/utils v0.0.0-20191114184206-e782cd3c129f
go: downloading gopkg.in/inf.v0 v0.9.1
go: extracting gopkg.in/inf.v0 v0.9.1
go: extracting k8s.io/utils v0.0.0-20191114184206-e782cd3c129f
go: extracting golang.org/x/net v0.0.0-20191004110552-13f9640d40b9
go: extracting golang.org/x/sys v0.0.0-20190826190057-c7b8b68b1456
go: extracting github.com/gogo/protobuf v1.2.2-0.20190723190241-65acae22fc9d
go: downloading golang.org/x/text v0.3.2
go: extracting golang.org/x/text v0.3.2
go: finding github.com/spf13/cobra v0.0.5
go: finding golang.org/x/tools v0.0.0-20190920225731-5eefd052ad72
go: finding k8s.io/api v0.17.0
go: finding k8s.io/apimachinery v0.17.0
go: finding github.com/fatih/color v1.7.0
go: finding github.com/gobuffalo/flect v0.2.0
go: finding k8s.io/apiextensions-apiserver v0.17.0
go: finding sigs.k8s.io/yaml v1.1.0
go: finding gopkg.in/yaml.v3 v3.0.0-20190905181640-827449938966
go: finding github.com/gogo/protobuf v1.2.2-0.20190723190241-65acae22fc9d
go: finding github.com/spf13/pflag v1.0.5
go: finding github.com/mattn/go-colorable v0.1.2
go: finding github.com/mattn/go-isatty v0.0.8
go: finding github.com/google/gofuzz v1.0.0
go: finding gopkg.in/inf.v0 v0.9.1
go: finding k8s.io/utils v0.0.0-20191114184206-e782cd3c129f
go: finding k8s.io/klog v1.0.0
go: finding gopkg.in/yaml.v2 v2.2.4
go: finding golang.org/x/sys v0.0.0-20190826190057-c7b8b68b1456
go: finding golang.org/x/net v0.0.0-20191004110552-13f9640d40b9
go: finding golang.org/x/text v0.3.2
/builder/home/go/bin/controller-gen object:headerFile=./hack/boilerplate.go.txt paths="./..."
go fmt ./...
go vet ./...
go: downloading github.com/onsi/gomega v1.10.1
go: downloading github.com/onsi/ginkgo v1.14.0
go: extracting github.com/onsi/ginkgo v1.14.0
go: extracting github.com/onsi/gomega v1.10.1
go: downloading golang.org/x/xerrors v0.0.0-20191204190536-9bdfabe68543
go: downloading github.com/nxadm/tail v1.4.4
go: extracting github.com/nxadm/tail v1.4.4
go: downloading gopkg.in/tomb.v1 v1.0.0-20141024135613-dd632973f1e7
go: downloading github.com/fsnotify/fsnotify v1.4.9
go: extracting golang.org/x/xerrors v0.0.0-20191204190536-9bdfabe68543
go: extracting github.com/fsnotify/fsnotify v1.4.9
go: extracting gopkg.in/tomb.v1 v1.0.0-20141024135613-dd632973f1e7
/builder/home/go/bin/controller-gen "crd:trivialVersions=true" rbac:roleName=manager-role webhook paths="./..." output:crd:artifacts:config=config/crd/bases
rm -rf generated
mkdir generated
kustomize build config/default/ -o generated
cp generated/apiextensions.k8s.io_v1beta1_customresourcedefinition_seldondeployments.machinelearning.seldon.io.yaml testing/machinelearning.seldon.io_seldondeployments.yaml
ginkgo -r -outputdir=. -cover -coverprofile=cover.out ./controllers ./utils ./apis
[1595944936] [1mController Suite[0m - 37/37 specs test k8s client
&{Reader:0xc000b0cb40 Writer:0xc000dbbe30 StatusClient:0xc000dbbe30}
[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0mE0728 14:03:31.698996   22456 reflector.go:309] pkg/mod/k8s.io/client-go@v0.17.9/tools/cache/reflector.go:105: Failed to watch *v1.Namespace: Get http://127.0.0.1:34681/api/v1/namespaces?allowWatchBookmarks=true&resourceVersion=353&timeoutSeconds=395&watch=true: dial tcp 127.0.0.1:34681: connect: connection refused
E0728 14:03:31.699711   22456 reflector.go:309] pkg/mod/k8s.io/client-go@v0.17.9/tools/cache/reflector.go:105: Failed to watch *v1.Service: Get http://127.0.0.1:34681/api/v1/services?allowWatchBookmarks=true&resourceVersion=363&timeoutSeconds=440&watch=true: dial tcp 127.0.0.1:34681: connect: connection refused
E0728 14:03:31.700167   22456 reflector.go:309] pkg/mod/k8s.io/client-go@v0.17.9/tools/cache/reflector.go:105: Failed to watch *v1.ConfigMap: Get http://127.0.0.1:34681/api/v1/configmaps?allowWatchBookmarks=true&resourceVersion=117&timeoutSeconds=384&watch=true: dial tcp 127.0.0.1:34681: connect: connection refused
E0728 14:03:31.700618   22456 reflector.go:309] pkg/mod/k8s.io/client-go@v0.17.9/tools/cache/reflector.go:105: Failed to watch *v2beta1.HorizontalPodAutoscaler: Get http://127.0.0.1:34681/apis/autoscaling/v2beta1/horizontalpodautoscalers?allowWatchBookmarks=true&resourceVersion=192&timeoutSeconds=387&watch=true: dial tcp 127.0.0.1:34681: connect: connection refused
E0728 14:03:31.701736   22456 reflector.go:309] pkg/mod/k8s.io/client-go@v0.17.9/tools/cache/reflector.go:105: Failed to watch *v1.SeldonDeployment: Get http://127.0.0.1:34681/apis/machinelearning.seldon.io/v1/seldondeployments?allowWatchBookmarks=true&resourceVersion=372&timeoutSeconds=503&watch=true: dial tcp 127.0.0.1:34681: connect: connection refused
E0728 14:03:31.702313   22456 reflector.go:309] pkg/mod/k8s.io/client-go@v0.17.9/tools/cache/reflector.go:105: Failed to watch *v1alpha3.VirtualService: Get http://127.0.0.1:34681/apis/networking.istio.io/v1alpha3/virtualservices?allowWatchBookmarks=true&resourceVersion=118&timeoutSeconds=365&watch=true: dial tcp 127.0.0.1:34681: connect: connection refused
E0728 14:03:31.702705   22456 reflector.go:309] pkg/mod/k8s.io/client-go@v0.17.9/tools/cache/reflector.go:105: Failed to watch *v1.Deployment: Get http://127.0.0.1:34681/apis/apps/v1/deployments?allowWatchBookmarks=true&resourceVersion=366&timeoutSeconds=360&watch=true: dial tcp 127.0.0.1:34681: connect: connection refused

 [32mSUCCESS![0m 35.461294109s PASS
coverage: 65.3% of statements
=== RUN   TestGcsSecret
--- PASS: TestGcsSecret (0.00s)
PASS
coverage: 100.0% of statements
=== RUN   TestS3Secret
--- PASS: TestS3Secret (0.00s)
PASS
coverage: 94.6% of statements
=== RUN   TestGetEnvAsBool
--- PASS: TestGetEnvAsBool (0.00s)
PASS
coverage: 10.9% of statements
=== RUN   TestGenerateCerts
--- PASS: TestGenerateCerts (2.00s)
=== RUN   TestConfigmapCreate
--- PASS: TestConfigmapCreate (0.00s)
=== RUN   TestCRDCreate
--- PASS: TestCRDCreate (0.10s)
=== RUN   TestMutatingWebhookCreate
--- PASS: TestMutatingWebhookCreate (3.10s)
=== RUN   TestMutatingWebhookCreateNamespaced
--- PASS: TestMutatingWebhookCreateNamespaced (2.70s)
=== RUN   TestValidatingWebhookCreate
--- PASS: TestValidatingWebhookCreate (2.09s)
=== RUN   TestValidatingWebhookCreateNamespaced
--- PASS: TestValidatingWebhookCreateNamespaced (3.17s)
=== RUN   TestWebHookSvcCreate
--- PASS: TestWebHookSvcCreate (1.81s)
PASS
coverage: 52.1% of statements
=== RUN   TestImageSetNormal
--- PASS: TestImageSetNormal (0.01s)
    prepack_test.go:50: Scenario: GRPC image with version
    prepack_test.go:50: Scenario: GRPC image with no version
    prepack_test.go:50: Scenario: REST image with version
    prepack_test.go:50: Scenario: REST image with no version
=== RUN   TestGetPredictorConfig
--- PASS: TestGetPredictorConfig (0.00s)
    prepack_test.go:81: Scenario: default image sklearn
    prepack_test.go:81: Scenario: related image sklearn
=== RUN   TestGetDeploymentNameOneModel
--- PASS: TestGetDeploymentNameOneModel (0.00s)
=== RUN   TestGetDeploymentNameLong
--- PASS: TestGetDeploymentNameLong (0.00s)
=== RUN   TestValidateBadProtocol
--- PASS: TestValidateBadProtocol (0.00s)
=== RUN   TestValidateBadTransport
--- PASS: TestValidateBadTransport (0.00s)
=== RUN   TestValidateMixedTransport
--- PASS: TestValidateMixedTransport (0.00s)
=== RUN   TestValidateMixedMultipleTransport
--- PASS: TestValidateMixedMultipleTransport (0.00s)
=== RUN   TestDefaultSingleContainer
--- PASS: TestDefaultSingleContainer (0.00s)
=== RUN   TestMetricsPortAddedTwoContainers
--- PASS: TestMetricsPortAddedTwoContainers (0.00s)
=== RUN   TestMetricsPortAddedTwoComponentSpecsTwoContainers
--- PASS: TestMetricsPortAddedTwoComponentSpecsTwoContainers (0.00s)
=== RUN   TestOverrideMetricsPortName
Failed to find config map seldon-config
no kind is registered for the type v1.ConfigMap in scheme "pkg/runtime/scheme.go:101"
--- PASS: TestOverrideMetricsPortName (0.00s)
=== RUN   TestPortUseExisting
--- PASS: TestPortUseExisting (0.00s)
=== RUN   TestMetricsPortAddedToPrepacked
--- PASS: TestMetricsPortAddedToPrepacked (0.00s)
=== RUN   TestPredictorProtocolGrpc
--- PASS: TestPredictorProtocolGrpc (0.00s)
=== RUN   TestPrepackedWithExistingContainer
--- PASS: TestPrepackedWithExistingContainer (0.01s)
=== RUN   TestPrepackedWithCustom
--- PASS: TestPrepackedWithCustom (0.00s)
=== RUN   TestPrepackedWithExistingContainerAndImage
--- PASS: TestPrepackedWithExistingContainerAndImage (0.00s)
=== RUN   TestMetricsPortAddedToTwoPrepacked
--- PASS: TestMetricsPortAddedToTwoPrepacked (0.00s)
=== RUN   TestDefaultPrepackagedServerType
--- PASS: TestDefaultPrepackagedServerType (0.00s)
=== RUN   TestValidateSingleModel
--- PASS: TestValidateSingleModel (0.00s)
=== RUN   TestValidateSingleModelNoName
--- PASS: TestValidateSingleModelNoName (0.00s)
=== RUN   TestValidateNoEngineMultiGraph
--- PASS: TestValidateNoEngineMultiGraph (0.00s)
=== RUN   TestValidateDuplPredictorName
--- PASS: TestValidateDuplPredictorName (0.00s)
=== RUN   TestValidateTrafficSum
--- PASS: TestValidateTrafficSum (0.00s)
=== RUN   TestDefaultABTest
--- PASS: TestDefaultABTest (0.00s)
=== RUN   TestValidateTensorflowProtocolNormalPrepackaged
--- PASS: TestValidateTensorflowProtocolNormalPrepackaged (0.01s)
=== RUN   TestValidateTensorflowProtocolNormal
--- PASS: TestValidateTensorflowProtocolNormal (0.00s)
=== RUN   TestPredictorNoGraph
--- PASS: TestPredictorNoGraph (0.00s)
PASS
coverage: 41.6% of statements
path is /workspace/source/operator
All profiles combined

Ginkgo ran 6 suites in 1m30.269074282s
Test Suite Passed
make: Leaving directory '/workspace/source/operator'

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-gbtxw-17[0m stage [32mtest-python[0m and container [32mstep-credential-initializer-pwn6g[0m
{"level":"info","ts":1595944714.4936752,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/refs/heads/0.8.0-ns-support: no such file or directory"}
{"level":"info","ts":1595944714.4942791,"logger":"fallback-logger","caller":"creds-init/main.go:40","msg":"Credentials initialized."}

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-gbtxw-17[0m stage [32mtest-python[0m and container [32mstep-working-dir-initializer-zbtqf[0m
{"level":"info","ts":1595944717.5260286,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/HEAD: no such file or directory"}
{"level":"info","ts":1595944717.528087,"logger":"fallback-logger","caller":"bash/main.go:64","msg":"Successfully executed command \"sh -c mkdir -p /workspace/source\"; output "}

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-gbtxw-17[0m stage [32mtest-python[0m and container [32mstep-place-tools[0m

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-gbtxw-17[0m stage [32mtest-python[0m and container [32mstep-create-dir-workspace-dxpds[0m
{"level":"info","ts":1595944731.330583,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/HEAD: no such file or directory"}
{"level":"info","ts":1595944731.3328023,"logger":"fallback-logger","caller":"bash/main.go:64","msg":"Successfully executed command \"sh -c mkdir -p /workspace/source\"; output "}

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-gbtxw-17[0m stage [32mtest-python[0m and container [32mstep-source-copy-workspace-9jsq8[0m
{"level":"info","ts":1595944732.2002873,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/HEAD: no such file or directory"}
{"level":"info","ts":1595944741.2527711,"logger":"fallback-logger","caller":"bash/main.go:64","msg":"Successfully executed command \"sh -c cp -r /pvc/pr-build-comment/workspace/. /workspace/source\"; output "}

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-gbtxw-17[0m stage [32mtest-python[0m and container [32mstep-setup-builder-home[0m

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-gbtxw-17[0m stage [32mtest-python[0m and container [32mstep-test-python[0m
make: Entering directory '/workspace/source/python'
# Protobuf
cp ../proto/prediction.proto seldon_core/proto/
make -C ../proto/tensorflow/ create_protos
make[1]: Entering directory '/workspace/source/proto/tensorflow'
./create-protos.sh
Downloading proto files for master
make[1]: Leaving directory '/workspace/source/proto/tensorflow'
cp -r ../proto/tensorflow/tensorflow \
	seldon_core/proto/
make -C ../proto/tensorflow clean
make[1]: Entering directory '/workspace/source/proto/tensorflow'
removed 'tensorflow/core/framework/resource_handle.proto'
removed 'tensorflow/core/framework/tensor_shape.proto'
removed 'tensorflow/core/framework/tensor.proto'
removed 'tensorflow/core/framework/types.proto'
removed directory 'tensorflow/core/framework'
removed directory 'tensorflow/core'
removed directory 'tensorflow'
make[1]: Leaving directory '/workspace/source/proto/tensorflow'
# OpenAPI
cp ../openapi/wrapper.oas3.json seldon_core/openapi/seldon.json
# Protobuf
cd seldon_core && python \
	-m grpc.tools.protoc \
	-I./ \
	-I./proto/ \
	--python_out=./ \
	--grpc_python_out=./ \
	--mypy_out=./ \
	./proto/prediction.proto
Writing mypy to proto/prediction_pb2.pyi
## We build TF's protobufs as well in case the tensorflow package
## is not found
cd seldon_core/proto && python \
	-m grpc.tools.protoc \
	-I./ \
	-I../ \
	--python_out=./ \
	./tensorflow/core/framework/*.proto
sed -i "s/from tensorflow/from seldon_core.proto.tensorflow/" seldon_core/proto/*.py
sed -i "s/from tensorflow.core.framework/from ./" \
	seldon_core/proto/tensorflow/core/framework/resource_handle_pb2.py seldon_core/proto/tensorflow/core/framework/tensor_pb2.py seldon_core/proto/tensorflow/core/framework/tensor_shape_pb2.py seldon_core/proto/tensorflow/core/framework/types_pb2.py
sed -i "s/from proto/from seldon_core.proto/g" seldon_core/proto/prediction_pb2_grpc.py
sed -i 's/__version__ = .*/__version__ = "1.2.2"/g' seldon_core/version.py
pip install -e . -r requirements-dev.txt
Obtaining file:///workspace/source/python
Collecting Flask<2.0.0 (from -r requirements.txt (line 1))
  Downloading https://files.pythonhosted.org/packages/f2/28/2a03252dfb9ebf377f40fba6a7841b47083260bf8bd8e737b0c6952df83f/Flask-1.1.2-py2.py3-none-any.whl (94kB)
Collecting jsonschema<4.0.0 (from -r requirements.txt (line 2))
  Downloading https://files.pythonhosted.org/packages/c5/8f/51e89ce52a085483359217bc72cdbf6e75ee595d5b1d4b5ade40c7e018b8/jsonschema-3.2.0-py2.py3-none-any.whl (56kB)
Collecting Flask-cors<4.0.0 (from -r requirements.txt (line 3))
  Downloading https://files.pythonhosted.org/packages/78/38/e68b11daa5d613e3a91e4bf3da76c94ac9ee0d9cd515af9c1ab80d36f709/Flask_Cors-3.0.8-py2.py3-none-any.whl
Collecting redis<4.0.0 (from -r requirements.txt (line 4))
  Downloading https://files.pythonhosted.org/packages/a7/7c/24fb0511df653cf1a5d938d8f5d19802a88cef255706fdda242ff97e91b7/redis-3.5.3-py2.py3-none-any.whl (72kB)
Requirement already satisfied: requests<3.0.0 in /opt/conda/lib/python3.7/site-packages (from -r requirements.txt (line 5)) (2.21.0)
Collecting numpy<2.0.0 (from -r requirements.txt (line 6))
  Downloading https://files.pythonhosted.org/packages/3d/d1/90cd7e0b27ee86d77f5386d38b74520486100286d50772377791b6ef22ff/numpy-1.19.1-cp37-cp37m-manylinux1_x86_64.whl (13.4MB)
Requirement already satisfied: flatbuffers<2.0.0 in /opt/conda/lib/python3.7/site-packages (from -r requirements.txt (line 7)) (1.11)
Requirement already satisfied: protobuf<4.0.0 in /opt/conda/lib/python3.7/site-packages (from -r requirements.txt (line 8)) (3.7.1)
Requirement already satisfied: grpcio<2.0.0 in /opt/conda/lib/python3.7/site-packages (from -r requirements.txt (line 9)) (1.20.1)
Collecting Flask-OpenTracing<1.2.0,>=1.1.0 (from -r requirements.txt (line 10))
  Downloading https://files.pythonhosted.org/packages/58/6c/6417701ba5ecc8854670c6db3207bcc3e5fbc96289a7cb18d5516d99a1c6/Flask-OpenTracing-1.1.0.tar.gz
Collecting opentracing<2.4.0,>=2.2.0 (from -r requirements.txt (line 11))
  Downloading https://files.pythonhosted.org/packages/e4/a8/df5285f42cd07782409d0ae835785fae6e2a0f7e8b0036ea302f1422fd25/opentracing-2.3.0.tar.gz (48kB)
Collecting jaeger-client<4.4.0,>=4.1.0 (from -r requirements.txt (line 12))
  Downloading https://files.pythonhosted.org/packages/2b/75/17a937a61135671cebc175ab5c299dc0f7477042469482fd9a6f91262c68/jaeger-client-4.3.0.tar.gz (81kB)
Collecting grpcio-opentracing<1.2.0,>=1.1.4 (from -r requirements.txt (line 13))
  Downloading https://files.pythonhosted.org/packages/db/82/2fcad380697c3dab25de76ee590bcab3eb9bbfb4add916044d7e83ec2b10/grpcio_opentracing-1.1.4-py3-none-any.whl
Collecting PyYAML<5.4 (from -r requirements.txt (line 14))
  Downloading https://files.pythonhosted.org/packages/64/c2/b80047c7ac2478f9501676c988a5411ed5572f35d1beff9cae07d321512c/PyYAML-5.3.1.tar.gz (269kB)
Collecting gunicorn<20.1.0,>=19.9.0 (from -r requirements.txt (line 15))
  Downloading https://files.pythonhosted.org/packages/69/ca/926f7cd3a2014b16870086b2d0fdc84a9e49473c68a8dff8b57f7c156f43/gunicorn-20.0.4-py2.py3-none-any.whl (77kB)
Collecting minio<6.0.0,>=4.0.9 (from -r requirements.txt (line 16))
  Downloading https://files.pythonhosted.org/packages/aa/60/81f4a1dc2d320832840288d7ec88aa3e4ee495d8f1452b4c79d8bd67136b/minio-5.0.10-py2.py3-none-any.whl (75kB)
Collecting azure-storage-blob<3.0.0,>=2.0.1 (from -r requirements.txt (line 17))
  Downloading https://files.pythonhosted.org/packages/3e/84/610f379b46d7d3c2d48eadeed6a12b6d46a43100fea70534f5992d0ac996/azure_storage_blob-2.1.0-py2.py3-none-any.whl (88kB)
Collecting setuptools>=41.0.0 (from -r requirements.txt (line 18))
  Downloading https://files.pythonhosted.org/packages/8e/11/9e10f1cad4518cb307b484c255cae61e97f05b82f6d536932b1714e01b47/setuptools-49.2.0-py3-none-any.whl (789kB)
Collecting google-cloud-storage>=1.16.0 (from -r requirements.txt (line 19))
  Downloading https://files.pythonhosted.org/packages/84/e3/41d109d50a55bb240f1c732ac05eef102db86efa178cf57b3b9d59dbd2fa/google_cloud_storage-1.30.0-py2.py3-none-any.whl (86kB)
Collecting prometheus_client<0.9.0,>=0.7.1 (from -r requirements.txt (line 20))
  Downloading https://files.pythonhosted.org/packages/3f/0e/554a265ffdc56e1494ef08e18f765b0cdec78797f510c58c45cf37abb4f4/prometheus_client-0.8.0-py2.py3-none-any.whl (53kB)
Collecting black==19.10b0 (from -r requirements-dev.txt (line 2))
  Downloading https://files.pythonhosted.org/packages/fd/bb/ad34bbc93d1bea3de086d7c59e528d4a503ac8fe318bd1fa48605584c3d2/black-19.10b0-py36-none-any.whl (97kB)
Collecting flake8==3.8.1 (from -r requirements-dev.txt (line 3))
  Downloading https://files.pythonhosted.org/packages/bf/47/36e51603431e1a5289eb41636199d2c225fcb1ca286e29c02d219c8e6e88/flake8-3.8.1-py2.py3-none-any.whl (72kB)
Collecting mypy<0.783 (from -r requirements-dev.txt (line 4))
  Downloading https://files.pythonhosted.org/packages/a7/25/da35a577040effa507d465102a0e001b29279d759f46218af91985ab0392/mypy-0.782-cp37-cp37m-manylinux1_x86_64.whl (20.8MB)
Collecting Pillow==7.2.0 (from -r requirements-dev.txt (line 5))
  Downloading https://files.pythonhosted.org/packages/e8/f2/6722dd0c22e3a143ac792ccb2424924ac72af4adea756b1165b4cad50da7/Pillow-7.2.0-cp37-cp37m-manylinux1_x86_64.whl (2.2MB)
Collecting pytest==5.4.2 (from -r requirements-dev.txt (line 6))
  Downloading https://files.pythonhosted.org/packages/6c/f9/9f2b6c672c8f8bb87a4c1bd52c1b57213627b035305aad745d015b2a62ae/pytest-5.4.2-py3-none-any.whl (247kB)
Collecting pytest-cov==2.10.0 (from -r requirements-dev.txt (line 7))
  Downloading https://files.pythonhosted.org/packages/3d/13/ae3dec587b1cc07fb9f294e52ea9ad140266aea55adb9e12eade3625bd27/pytest_cov-2.10.0-py2.py3-none-any.whl
Collecting tox<4.0.0 (from -r requirements-dev.txt (line 8))
  Downloading https://files.pythonhosted.org/packages/9d/4d/bdd9d9a1ad56713d4b92c66f606811d6c580835d20728ae96140bfbab5f5/tox-3.18.1-py2.py3-none-any.whl (82kB)
Collecting grpcio-tools==1.30.0 (from -r requirements-dev.txt (line 9))
  Downloading https://files.pythonhosted.org/packages/da/3c/bed275484f6cc262b5de6ceaae36798c60d7904cdd05dc79cc830b880687/grpcio-tools-1.30.0.tar.gz (2.1MB)
Collecting mypy-protobuf==1.22 (from -r requirements-dev.txt (line 10))
  Downloading https://files.pythonhosted.org/packages/ec/9c/36adfc9a4aee35f8c6ae45f91cb3ef2e041e4c9ef6be1401e369f46c47c6/mypy_protobuf-1.22-py3-none-any.whl
Collecting tenacity==6.2.0 (from -r requirements-dev.txt (line 13))
  Downloading https://files.pythonhosted.org/packages/b5/05/ff089032442058bd3386f9cd991cd88ccac81dca1494d78751621ee35e62/tenacity-6.2.0-py2.py3-none-any.whl
Collecting coverage==5.2 (from -r requirements-dev.txt (line 16))
  Downloading https://files.pythonhosted.org/packages/dd/ee/2cc12177fe77d116d5a0c5e7c2fb2c1f5f3d5dd287e8bb67a17948684ede/coverage-5.2-cp37-cp37m-manylinux1_x86_64.whl (229kB)
Collecting pandas==1.0.1 (from -r requirements-dev.txt (line 19))
  Downloading https://files.pythonhosted.org/packages/61/af/ceb7523e86753d5643ed00e8c17a42bdcfe819782c3449d9bbbf5d01867a/pandas-1.0.1-cp37-cp37m-manylinux1_x86_64.whl (10.1MB)
Collecting pip-licenses==2.2.1 (from -r requirements-dev.txt (line 22))
  Downloading https://files.pythonhosted.org/packages/2e/8a/b8eb114545d9e984fcc013ef544c487aa2c02489a66185a82108625784a5/pip_licenses-2.2.1-py3-none-any.whl
Collecting itsdangerous>=0.24 (from Flask<2.0.0->-r requirements.txt (line 1))
  Downloading https://files.pythonhosted.org/packages/76/ae/44b03b253d6fade317f32c24d100b3b35c2239807046a4c953c7b89fa49e/itsdangerous-1.1.0-py2.py3-none-any.whl
Collecting Werkzeug>=0.15 (from Flask<2.0.0->-r requirements.txt (line 1))
  Downloading https://files.pythonhosted.org/packages/cc/94/5f7079a0e00bd6863ef8f1da638721e9da21e5bacee597595b318f71d62e/Werkzeug-1.0.1-py2.py3-none-any.whl (298kB)
Collecting Jinja2>=2.10.1 (from Flask<2.0.0->-r requirements.txt (line 1))
  Downloading https://files.pythonhosted.org/packages/30/9e/f663a2aa66a09d838042ae1a2c5659828bb9b41ea3a6efa20a20fd92b121/Jinja2-2.11.2-py2.py3-none-any.whl (125kB)
Collecting click>=5.1 (from Flask<2.0.0->-r requirements.txt (line 1))
  Downloading https://files.pythonhosted.org/packages/d2/3d/fa76db83bf75c4f8d338c2fd15c8d33fdd7ad23a9b5e57eb6c5de26b430e/click-7.1.2-py2.py3-none-any.whl (82kB)
Requirement already satisfied: six>=1.11.0 in /opt/conda/lib/python3.7/site-packages (from jsonschema<4.0.0->-r requirements.txt (line 2)) (1.12.0)
Collecting pyrsistent>=0.14.0 (from jsonschema<4.0.0->-r requirements.txt (line 2))
  Downloading https://files.pythonhosted.org/packages/9f/0d/cbca4d0bbc5671822a59f270e4ce3f2195f8a899c97d0d5abb81b191efb5/pyrsistent-0.16.0.tar.gz (108kB)
Collecting importlib-metadata; python_version < "3.8" (from jsonschema<4.0.0->-r requirements.txt (line 2))
  Downloading https://files.pythonhosted.org/packages/8e/58/cdea07eb51fc2b906db0968a94700866fc46249bdc75cac23f9d13168929/importlib_metadata-1.7.0-py2.py3-none-any.whl
Collecting attrs>=17.4.0 (from jsonschema<4.0.0->-r requirements.txt (line 2))
  Downloading https://files.pythonhosted.org/packages/a2/db/4313ab3be961f7a763066401fb77f7748373b6094076ae2bda2806988af6/attrs-19.3.0-py2.py3-none-any.whl
Requirement already satisfied: idna<2.9,>=2.5 in /opt/conda/lib/python3.7/site-packages (from requests<3.0.0->-r requirements.txt (line 5)) (2.8)
Requirement already satisfied: urllib3<1.25,>=1.21.1 in /opt/conda/lib/python3.7/site-packages (from requests<3.0.0->-r requirements.txt (line 5)) (1.24.1)
Requirement already satisfied: certifi>=2017.4.17 in /opt/conda/lib/python3.7/site-packages (from requests<3.0.0->-r requirements.txt (line 5)) (2018.11.29)
Requirement already satisfied: chardet<3.1.0,>=3.0.2 in /opt/conda/lib/python3.7/site-packages (from requests<3.0.0->-r requirements.txt (line 5)) (3.0.4)
Collecting threadloop<2,>=1 (from jaeger-client<4.4.0,>=4.1.0->-r requirements.txt (line 12))
  Downloading https://files.pythonhosted.org/packages/d3/1d/8398c1645b97dc008d3c658e04beda01ede3d90943d40c8d56863cf891bd/threadloop-1.0.2.tar.gz
Collecting thrift (from jaeger-client<4.4.0,>=4.1.0->-r requirements.txt (line 12))
  Downloading https://files.pythonhosted.org/packages/97/1e/3284d19d7be99305eda145b8aa46b0c33244e4a496ec66440dac19f8274d/thrift-0.13.0.tar.gz (59kB)
Collecting tornado>=4.3 (from jaeger-client<4.4.0,>=4.1.0->-r requirements.txt (line 12))
  Downloading https://files.pythonhosted.org/packages/95/84/119a46d494f008969bf0c775cb2c6b3579d3c4cc1bb1b41a022aa93ee242/tornado-6.0.4.tar.gz (496kB)
Collecting configparser (from minio<6.0.0,>=4.0.9->-r requirements.txt (line 16))
  Downloading https://files.pythonhosted.org/packages/4b/6b/01baa293090240cf0562cc5eccb69c6f5006282127f2b846fad011305c79/configparser-5.0.0-py3-none-any.whl
Collecting python-dateutil (from minio<6.0.0,>=4.0.9->-r requirements.txt (line 16))
  Downloading https://files.pythonhosted.org/packages/d4/70/d60450c3dd48ef87586924207ae8907090de0b306af2bce5d134d78615cb/python_dateutil-2.8.1-py2.py3-none-any.whl (227kB)
Collecting pytz (from minio<6.0.0,>=4.0.9->-r requirements.txt (line 16))
  Downloading https://files.pythonhosted.org/packages/4f/a4/879454d49688e2fad93e59d7d4efda580b783c745fd2ec2a3adf87b0808d/pytz-2020.1-py2.py3-none-any.whl (510kB)
Collecting azure-storage-common~=2.1 (from azure-storage-blob<3.0.0,>=2.0.1->-r requirements.txt (line 17))
  Downloading https://files.pythonhosted.org/packages/6b/a0/6794b318ce0118d1a4053bdf0149a60807407db9b710354f2b203c2f5975/azure_storage_common-2.1.0-py2.py3-none-any.whl (47kB)
Collecting azure-common>=1.1.5 (from azure-storage-blob<3.0.0,>=2.0.1->-r requirements.txt (line 17))
  Downloading https://files.pythonhosted.org/packages/e5/4d/d000fc3c5af601d00d55750b71da5c231fcb128f42ac95b208ed1091c2c1/azure_common-1.1.25-py2.py3-none-any.whl
Collecting google-cloud-core<2.0dev,>=1.2.0 (from google-cloud-storage>=1.16.0->-r requirements.txt (line 19))
  Downloading https://files.pythonhosted.org/packages/89/3c/8a7531839028c9690e6d14c650521f3bbaf26e53baaeb2784b8c3eb2fb97/google_cloud_core-1.3.0-py2.py3-none-any.whl
Collecting google-resumable-media<2.0dev,>=0.6.0 (from google-cloud-storage>=1.16.0->-r requirements.txt (line 19))
  Downloading https://files.pythonhosted.org/packages/40/1f/596a2e2cdccde796e666efd4fab1def4275a103dfe71a4cc982b43670471/google_resumable_media-0.7.0-py2.py3-none-any.whl (42kB)
Collecting google-auth<2.0dev,>=1.11.0 (from google-cloud-storage>=1.16.0->-r requirements.txt (line 19))
  Downloading https://files.pythonhosted.org/packages/b7/4b/ad22f901ef599ac6dcce285f87e8b48067f2b6ff2a5eb0f4ef08227d057f/google_auth-1.19.2-py2.py3-none-any.whl (91kB)
Collecting typed-ast>=1.4.0 (from black==19.10b0->-r requirements-dev.txt (line 2))
  Downloading https://files.pythonhosted.org/packages/5d/10/0c1e8aa723a2b0c4032e048d8e511df82c8a1262f0e1df5e4c54eb2613e9/typed_ast-1.4.1-cp37-cp37m-manylinux1_x86_64.whl (737kB)
Collecting appdirs (from black==19.10b0->-r requirements-dev.txt (line 2))
  Downloading https://files.pythonhosted.org/packages/3b/00/2344469e2084fb287c2e0b57b72910309874c3245463acd6cf5e3db69324/appdirs-1.4.4-py2.py3-none-any.whl
Collecting regex (from black==19.10b0->-r requirements-dev.txt (line 2))
  Downloading https://files.pythonhosted.org/packages/b6/0b/571619431d3ab416b9ffeca1fdf6cc1b388581b087250fb56e7227d16088/regex-2020.7.14-cp37-cp37m-manylinux1_x86_64.whl (660kB)
Collecting toml>=0.9.4 (from black==19.10b0->-r requirements-dev.txt (line 2))
  Downloading https://files.pythonhosted.org/packages/9f/e1/1b40b80f2e1663a6b9f497123c11d7d988c0919abbf3c3f2688e448c5363/toml-0.10.1-py2.py3-none-any.whl
Collecting pathspec<1,>=0.6 (from black==19.10b0->-r requirements-dev.txt (line 2))
  Downloading https://files.pythonhosted.org/packages/5d/d0/887c58853bd4b6ffc7aa9cdba4fc57d7b979b45888a6bd47e4568e1cf868/pathspec-0.8.0-py2.py3-none-any.whl
Collecting pyflakes<2.3.0,>=2.2.0 (from flake8==3.8.1->-r requirements-dev.txt (line 3))
  Downloading https://files.pythonhosted.org/packages/69/5b/fd01b0c696f2f9a6d2c839883b642493b431f28fa32b29abc465ef675473/pyflakes-2.2.0-py2.py3-none-any.whl (66kB)
Collecting mccabe<0.7.0,>=0.6.0 (from flake8==3.8.1->-r requirements-dev.txt (line 3))
  Downloading https://files.pythonhosted.org/packages/87/89/479dc97e18549e21354893e4ee4ef36db1d237534982482c3681ee6e7b57/mccabe-0.6.1-py2.py3-none-any.whl
Collecting pycodestyle<2.7.0,>=2.6.0a1 (from flake8==3.8.1->-r requirements-dev.txt (line 3))
  Downloading https://files.pythonhosted.org/packages/10/5b/88879fb861ab79aef45c7e199cae3ef7af487b5603dcb363517a50602dd7/pycodestyle-2.6.0-py2.py3-none-any.whl (41kB)
Collecting typing-extensions>=3.7.4 (from mypy<0.783->-r requirements-dev.txt (line 4))
  Downloading https://files.pythonhosted.org/packages/0c/0e/3f026d0645d699e7320b59952146d56ad7c374e9cd72cd16e7c74e657a0f/typing_extensions-3.7.4.2-py3-none-any.whl
Collecting mypy-extensions<0.5.0,>=0.4.3 (from mypy<0.783->-r requirements-dev.txt (line 4))
  Downloading https://files.pythonhosted.org/packages/5c/eb/975c7c080f3223a5cdaff09612f3a5221e4ba534f7039db34c35d95fa6a5/mypy_extensions-0.4.3-py2.py3-none-any.whl
Collecting packaging (from pytest==5.4.2->-r requirements-dev.txt (line 6))
  Downloading https://files.pythonhosted.org/packages/46/19/c5ab91b1b05cfe63cccd5cfc971db9214c6dd6ced54e33c30d5af1d2bc43/packaging-20.4-py2.py3-none-any.whl
Collecting wcwidth (from pytest==5.4.2->-r requirements-dev.txt (line 6))
  Downloading https://files.pythonhosted.org/packages/59/7c/e39aca596badaf1b78e8f547c807b04dae603a433d3e7a7e04d67f2ef3e5/wcwidth-0.2.5-py2.py3-none-any.whl
Collecting more-itertools>=4.0.0 (from pytest==5.4.2->-r requirements-dev.txt (line 6))
  Downloading https://files.pythonhosted.org/packages/ef/9b/6c35ec5483710492e21252465160ee508170159f7e0e2d6cd769022f52f6/more_itertools-8.4.0-py3-none-any.whl (43kB)
Collecting pluggy<1.0,>=0.12 (from pytest==5.4.2->-r requirements-dev.txt (line 6))
  Downloading https://files.pythonhosted.org/packages/a0/28/85c7aa31b80d150b772fbe4a229487bc6644da9ccb7e427dd8cc60cb8a62/pluggy-0.13.1-py2.py3-none-any.whl
Collecting py>=1.5.0 (from pytest==5.4.2->-r requirements-dev.txt (line 6))
  Downloading https://files.pythonhosted.org/packages/68/0f/41a43535b52a81e4f29e420a151032d26f08b62206840c48d14b70e53376/py-1.9.0-py2.py3-none-any.whl (99kB)
Collecting virtualenv!=20.0.0,!=20.0.1,!=20.0.2,!=20.0.3,!=20.0.4,!=20.0.5,!=20.0.6,!=20.0.7,>=16.0.0 (from tox<4.0.0->-r requirements-dev.txt (line 8))
  Downloading https://files.pythonhosted.org/packages/6f/a9/aec24edff88c204bb20b94ced8fd890176209aee20b4e701b796a6824e15/virtualenv-20.0.28-py2.py3-none-any.whl (4.9MB)
Collecting filelock>=3.0.0 (from tox<4.0.0->-r requirements-dev.txt (line 8))
  Downloading https://files.pythonhosted.org/packages/93/83/71a2ee6158bb9f39a90c0dea1637f81d5eef866e188e1971a1b1ab01a35a/filelock-3.0.12-py3-none-any.whl
Collecting PTable (from pip-licenses==2.2.1->-r requirements-dev.txt (line 22))
  Downloading https://files.pythonhosted.org/packages/ab/b3/b54301811173ca94119eb474634f120a49cd370f257d1aae5a4abaf12729/PTable-0.9.2.tar.gz
Collecting MarkupSafe>=0.23 (from Jinja2>=2.10.1->Flask<2.0.0->-r requirements.txt (line 1))
  Downloading https://files.pythonhosted.org/packages/98/7b/ff284bd8c80654e471b769062a9b43cc5d03e7a615048d96f4619df8d420/MarkupSafe-1.1.1-cp37-cp37m-manylinux1_x86_64.whl
Collecting zipp>=0.5 (from importlib-metadata; python_version < "3.8"->jsonschema<4.0.0->-r requirements.txt (line 2))
  Downloading https://files.pythonhosted.org/packages/b2/34/bfcb43cc0ba81f527bc4f40ef41ba2ff4080e047acb0586b56b3d017ace4/zipp-3.1.0-py3-none-any.whl
Requirement already satisfied: cryptography in /opt/conda/lib/python3.7/site-packages (from azure-storage-common~=2.1->azure-storage-blob<3.0.0,>=2.0.1->-r requirements.txt (line 17)) (2.4.2)
Collecting google-api-core<2.0.0dev,>=1.16.0 (from google-cloud-core<2.0dev,>=1.2.0->google-cloud-storage>=1.16.0->-r requirements.txt (line 19))
  Downloading https://files.pythonhosted.org/packages/bf/d5/a43e91cc1a1822b248033a7aca72637abe890e81fce4913497f7d0c1f91f/google_api_core-1.22.0-py2.py3-none-any.whl (91kB)
Collecting google-crc32c>=0.1.0; python_version >= "3.5" (from google-resumable-media<2.0dev,>=0.6.0->google-cloud-storage>=1.16.0->-r requirements.txt (line 19))
  Downloading https://files.pythonhosted.org/packages/17/cb/c085dacff2ade31c47ed63b0671bc54f3f25cccd368f412042a568dcf2a6/google_crc32c-0.1.0-cp37-cp37m-manylinux1_x86_64.whl
Collecting pyasn1-modules>=0.2.1 (from google-auth<2.0dev,>=1.11.0->google-cloud-storage>=1.16.0->-r requirements.txt (line 19))
  Downloading https://files.pythonhosted.org/packages/95/de/214830a981892a3e286c3794f41ae67a4495df1108c3da8a9f62159b9a9d/pyasn1_modules-0.2.8-py2.py3-none-any.whl (155kB)
Collecting cachetools<5.0,>=2.0.0 (from google-auth<2.0dev,>=1.11.0->google-cloud-storage>=1.16.0->-r requirements.txt (line 19))
  Downloading https://files.pythonhosted.org/packages/cd/5c/f3aa86b6d5482f3051b433c7616668a9b96fbe49a622210e2c9781938a5c/cachetools-4.1.1-py3-none-any.whl
Collecting rsa<5,>=3.1.4; python_version >= "3" (from google-auth<2.0dev,>=1.11.0->google-cloud-storage>=1.16.0->-r requirements.txt (line 19))
  Downloading https://files.pythonhosted.org/packages/1c/df/c3587a667d6b308fadc90b99e8bc8774788d033efcc70f4ecaae7fad144b/rsa-4.6-py3-none-any.whl (47kB)
Collecting pyparsing>=2.0.2 (from packaging->pytest==5.4.2->-r requirements-dev.txt (line 6))
  Downloading https://files.pythonhosted.org/packages/8a/bb/488841f56197b13700afd5658fc279a2025a39e22449b7cf29864669b15d/pyparsing-2.4.7-py2.py3-none-any.whl (67kB)
Collecting distlib<1,>=0.3.1 (from virtualenv!=20.0.0,!=20.0.1,!=20.0.2,!=20.0.3,!=20.0.4,!=20.0.5,!=20.0.6,!=20.0.7,>=16.0.0->tox<4.0.0->-r requirements-dev.txt (line 8))
  Downloading https://files.pythonhosted.org/packages/f5/0a/490fa011d699bb5a5f3a0cf57de82237f52a6db9d40f33c53b2736c9a1f9/distlib-0.3.1-py2.py3-none-any.whl (335kB)
Requirement already satisfied: cffi!=1.11.3,>=1.7 in /opt/conda/lib/python3.7/site-packages (from cryptography->azure-storage-common~=2.1->azure-storage-blob<3.0.0,>=2.0.1->-r requirements.txt (line 17)) (1.11.5)
Requirement already satisfied: asn1crypto>=0.21.0 in /opt/conda/lib/python3.7/site-packages (from cryptography->azure-storage-common~=2.1->azure-storage-blob<3.0.0,>=2.0.1->-r requirements.txt (line 17)) (0.24.0)
Collecting googleapis-common-protos<2.0dev,>=1.6.0 (from google-api-core<2.0.0dev,>=1.16.0->google-cloud-core<2.0dev,>=1.2.0->google-cloud-storage>=1.16.0->-r requirements.txt (line 19))
  Downloading https://files.pythonhosted.org/packages/03/74/3956721ea1eb4bcf7502a311fdaa60b85bd751de4e57d1943afe9b334141/googleapis_common_protos-1.52.0-py2.py3-none-any.whl (100kB)
Collecting pyasn1<0.5.0,>=0.4.6 (from pyasn1-modules>=0.2.1->google-auth<2.0dev,>=1.11.0->google-cloud-storage>=1.16.0->-r requirements.txt (line 19))
  Downloading https://files.pythonhosted.org/packages/62/1e/a94a8d635fa3ce4cfc7f506003548d0a2447ae76fd5ca53932970fe3053f/pyasn1-0.4.8-py2.py3-none-any.whl (77kB)
Requirement already satisfied: pycparser in /opt/conda/lib/python3.7/site-packages (from cffi!=1.11.3,>=1.7->cryptography->azure-storage-common~=2.1->azure-storage-blob<3.0.0,>=2.0.1->-r requirements.txt (line 17)) (2.19)
Building wheels for collected packages: Flask-OpenTracing, opentracing, jaeger-client, PyYAML, grpcio-tools, pyrsistent, threadloop, thrift, tornado, PTable
  Running setup.py bdist_wheel for Flask-OpenTracing: started
  Running setup.py bdist_wheel for Flask-OpenTracing: finished with status 'done'
  Stored in directory: /builder/home/.cache/pip/wheels/7b/dc/25/3cf0b35c129232ee596c413f13d1d1f5a8e38c427266276dfd
  Running setup.py bdist_wheel for opentracing: started
  Running setup.py bdist_wheel for opentracing: finished with status 'done'
  Stored in directory: /builder/home/.cache/pip/wheels/66/b5/60/322949294afda71a9558eb25a1e536d1191665ef71759646b7
  Running setup.py bdist_wheel for jaeger-client: started
  Running setup.py bdist_wheel for jaeger-client: finished with status 'done'
  Stored in directory: /builder/home/.cache/pip/wheels/a4/46/e1/316c9ea87f46b9685c2f4258950a27bad1ae072c56224e4489
  Running setup.py bdist_wheel for PyYAML: started
  Running setup.py bdist_wheel for PyYAML: finished with status 'done'
  Stored in directory: /builder/home/.cache/pip/wheels/a7/c1/ea/cf5bd31012e735dc1dfea3131a2d5eae7978b251083d6247bd
  Running setup.py bdist_wheel for grpcio-tools: started
  Running setup.py bdist_wheel for grpcio-tools: still running...
  Running setup.py bdist_wheel for grpcio-tools: still running...
  Running setup.py bdist_wheel for grpcio-tools: still running...
  Running setup.py bdist_wheel for grpcio-tools: still running...
  Running setup.py bdist_wheel for grpcio-tools: still running...
  Running setup.py bdist_wheel for grpcio-tools: still running...
  Running setup.py bdist_wheel for grpcio-tools: still running...
  Running setup.py bdist_wheel for grpcio-tools: still running...
  Running setup.py bdist_wheel for grpcio-tools: still running...
  Running setup.py bdist_wheel for grpcio-tools: still running...
  Running setup.py bdist_wheel for grpcio-tools: finished with status 'done'
  Stored in directory: /builder/home/.cache/pip/wheels/83/94/68/d3464c124f6508da859f2b05a80e040dc99e7ebaaacbe86c6a
  Running setup.py bdist_wheel for pyrsistent: started
  Running setup.py bdist_wheel for pyrsistent: finished with status 'done'
  Stored in directory: /builder/home/.cache/pip/wheels/c2/85/ad/bc6d41e2c4b35c9fdfed48f0fcd411ffc4164e67755ddf9ebb
  Running setup.py bdist_wheel for threadloop: started
  Running setup.py bdist_wheel for threadloop: finished with status 'done'
  Stored in directory: /builder/home/.cache/pip/wheels/d7/7a/30/d212623a4cd34f6cce400f8122b1b7af740d3440c68023d51f
  Running setup.py bdist_wheel for thrift: started
  Running setup.py bdist_wheel for thrift: finished with status 'done'
  Stored in directory: /builder/home/.cache/pip/wheels/02/a2/46/689ccfcf40155c23edc7cdbd9de488611c8fdf49ff34b1706e
  Running setup.py bdist_wheel for tornado: started
  Running setup.py bdist_wheel for tornado: finished with status 'done'
  Stored in directory: /builder/home/.cache/pip/wheels/93/84/2f/409c7b2bb3afc3aa727f7ee8787975e0793f74d1165f4d0104
  Running setup.py bdist_wheel for PTable: started
  Running setup.py bdist_wheel for PTable: finished with status 'done'
  Stored in directory: /builder/home/.cache/pip/wheels/22/cc/2e/55980bfe86393df3e9896146a01f6802978d09d7ebcba5ea56
Successfully built Flask-OpenTracing opentracing jaeger-client PyYAML grpcio-tools pyrsistent threadloop thrift tornado PTable
grpcio-tools 1.30.0 has requirement grpcio>=1.30.0, but you'll have grpcio 1.20.1 which is incompatible.
google-api-core 1.22.0 has requirement protobuf>=3.12.0, but you'll have protobuf 3.7.1 which is incompatible.
tox 3.18.1 has requirement six>=1.14.0, but you'll have six 1.12.0 which is incompatible.
Installing collected packages: itsdangerous, Werkzeug, MarkupSafe, Jinja2, click, Flask, setuptools, pyrsistent, zipp, importlib-metadata, attrs, jsonschema, Flask-cors, redis, numpy, opentracing, Flask-OpenTracing, tornado, threadloop, thrift, jaeger-client, grpcio-opentracing, PyYAML, gunicorn, configparser, python-dateutil, pytz, minio, azure-common, azure-storage-common, azure-storage-blob, googleapis-common-protos, pyasn1, pyasn1-modules, cachetools, rsa, google-auth, google-api-core, google-cloud-core, google-crc32c, google-resumable-media, google-cloud-storage, prometheus-client, typed-ast, appdirs, regex, toml, pathspec, black, pyflakes, mccabe, pycodestyle, flake8, typing-extensions, mypy-extensions, mypy, Pillow, pyparsing, packaging, wcwidth, more-itertools, pluggy, py, pytest, coverage, pytest-cov, filelock, distlib, virtualenv, tox, grpcio-tools, mypy-protobuf, tenacity, pandas, PTable, pip-licenses, seldon-core
  Found existing installation: setuptools 40.6.3
    Uninstalling setuptools-40.6.3:
      Successfully uninstalled setuptools-40.6.3
  Found existing installation: grpcio-tools 1.20.1
    Uninstalling grpcio-tools-1.20.1:
      Successfully uninstalled grpcio-tools-1.20.1
  Found existing installation: mypy-protobuf 1.10
    Uninstalling mypy-protobuf-1.10:
      Successfully uninstalled mypy-protobuf-1.10
  Running setup.py develop for seldon-core
Successfully installed Flask-1.1.2 Flask-OpenTracing-1.1.0 Flask-cors-3.0.8 Jinja2-2.11.2 MarkupSafe-1.1.1 PTable-0.9.2 Pillow-7.2.0 PyYAML-5.3.1 Werkzeug-1.0.1 appdirs-1.4.4 attrs-19.3.0 azure-common-1.1.25 azure-storage-blob-2.1.0 azure-storage-common-2.1.0 black-19.10b0 cachetools-4.1.1 click-7.1.2 configparser-5.0.0 coverage-5.2 distlib-0.3.1 filelock-3.0.12 flake8-3.8.1 google-api-core-1.22.0 google-auth-1.19.2 google-cloud-core-1.3.0 google-cloud-storage-1.30.0 google-crc32c-0.1.0 google-resumable-media-0.7.0 googleapis-common-protos-1.52.0 grpcio-opentracing-1.1.4 grpcio-tools-1.30.0 gunicorn-20.0.4 importlib-metadata-1.7.0 itsdangerous-1.1.0 jaeger-client-4.3.0 jsonschema-3.2.0 mccabe-0.6.1 minio-5.0.10 more-itertools-8.4.0 mypy-0.782 mypy-extensions-0.4.3 mypy-protobuf-1.22 numpy-1.19.1 opentracing-2.3.0 packaging-20.4 pandas-1.0.1 pathspec-0.8.0 pip-licenses-2.2.1 pluggy-0.13.1 prometheus-client-0.8.0 py-1.9.0 pyasn1-0.4.8 pyasn1-modules-0.2.8 pycodestyle-2.6.0 pyflakes-2.2.0 pyparsing-2.4.7 pyrsistent-0.16.0 pytest-5.4.2 pytest-cov-2.10.0 python-dateutil-2.8.1 pytz-2020.1 redis-3.5.3 regex-2020.7.14 rsa-4.6 seldon-core setuptools-49.2.0 tenacity-6.2.0 threadloop-1.0.2 thrift-0.13.0 toml-0.10.1 tornado-6.0.4 tox-3.18.1 typed-ast-1.4.1 typing-extensions-3.7.4.2 virtualenv-20.0.28 wcwidth-0.2.5 zipp-3.1.0
tox
GLOB sdist-make: /workspace/source/python/setup.py
py3 create: /workspace/source/python/.tox/py3
py3 installdeps: tenacity, pytest, pytest-cov, Pillow
py3 inst: /workspace/source/python/.tox/.tmp/package/1/seldon-core-1.2.2.zip
py3 installed: attrs==19.3.0,certifi==2020.6.20,chardet==3.0.4,click==7.1.2,configparser==5.0.0,coverage==5.2.1,Flask==1.1.2,Flask-Cors==3.0.8,Flask-OpenTracing==1.1.0,flatbuffers==1.12,grpcio==1.30.0,grpcio-opentracing==1.1.4,gunicorn==20.0.4,idna==2.10,importlib-metadata==1.7.0,itsdangerous==1.1.0,jaeger-client==4.3.0,Jinja2==2.11.2,jsonschema==3.2.0,MarkupSafe==1.1.1,minio==5.0.10,more-itertools==8.4.0,numpy==1.19.1,opentracing==2.3.0,packaging==20.4,Pillow==7.2.0,pluggy==0.13.1,prometheus-client==0.8.0,protobuf==3.12.2,py==1.9.0,pyparsing==2.4.7,pyrsistent==0.16.0,pytest==5.4.3,pytest-cov==2.10.0,python-dateutil==2.8.1,pytz==2020.1,PyYAML==5.3.1,redis==3.5.3,requests==2.24.0,seldon-core @ file:///workspace/source/python/.tox/.tmp/package/1/seldon-core-1.2.2.zip,six==1.15.0,tenacity==6.2.0,threadloop==1.0.2,thrift==0.13.0,tornado==6.0.4,urllib3==1.25.10,wcwidth==0.2.5,Werkzeug==1.0.1,zipp==3.1.0
py3 run-test-pre: PYTHONHASHSEED='417737162'
py3 run-test: commands[0] | pytest
============================= test session starts ==============================
platform linux -- Python 3.7.1, pytest-5.4.3, py-1.9.0, pluggy-0.13.1
cachedir: .tox/py3/.pytest_cache
rootdir: /workspace/source/python, inifile: setup.cfg
plugins: cov-2.10.0
collected 371 items

tests/test_api_tester.py ..                                              [  0%]
tests/test_application_exception_microservice.py ..                      [  1%]
tests/test_azure_storage.py ssssss                                       [  2%]
tests/test_combiner_microservice.py .....................                [  8%]
tests/test_metadata.py ................................................. [ 21%]
...                                                                      [ 22%]
tests/test_metrics.py ...................FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF [ 35%]
FFFFFFFFFFF........                                                      [ 40%]
tests/test_microservice.py .F...FF..F...                                 [ 44%]
tests/test_microservice_tester.py .....                                  [ 45%]
tests/test_model_microservice.py ..........F....s......................s [ 56%]
.......F                                                                 [ 58%]
tests/test_router_microservice.py ........F....F...                      [ 63%]
tests/test_s3_storage.py ...                                             [ 63%]
tests/test_seldon_client.py ..................................           [ 73%]
tests/test_storage.py ...ss..s                                           [ 75%]
tests/test_transformer_microservice.py ................................. [ 84%]
........                                                                 [ 86%]
tests/test_user_model.py ....                                            [ 87%]
tests/test_utils.py ..............................sss..............      [100%]

=================================== FAILURES ===================================
_________________ test_seldon_metrics_predict[True-UserObject] _________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 345, in test_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Predict called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:57 REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:159 Predict called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:65 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
_____________ test_seldon_metrics_predict[True-UserObjectLowLevel] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 345, in test_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Predict raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:57 REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:207 Predict raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:65 REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
________________ test_seldon_metrics_predict[False-UserObject] _________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 345, in test_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Predict called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:57 REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:159 Predict called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:65 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
____________ test_seldon_metrics_predict[False-UserObjectLowLevel] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 345, in test_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Predict raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:57 REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:207 Predict raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:65 REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
________________ test_seldon_metrics_send_feedback[UserObject] _________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 364, in test_seldon_metrics_send_feedback
    assert rv.status_code == 200
AssertionError: assert 500 == 200
 +  where 500 = <Response streamed [500 INTERNAL SERVER ERROR]>.status_code
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/send-feedback?json=%7B%22reward%22:%2042%7D' [GET]>
ERROR:seldon_core.wrapper:Exception on /send-feedback [GET]
Traceback (most recent call last):
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask/app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask_cors/extension.py", line 161, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask/app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/workspace/source/python/seldon_core/wrapper.py", line 75, in SendFeedback
    user_model, requestJson, PRED_UNIT_ID, seldon_metrics
  File "/workspace/source/python/seldon_core/seldon_methods.py", line 183, in send_feedback
    raise Exception("TODO: Not implemented")
Exception: TODO: Not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:73 REST Request: <Request 'http://localhost/send-feedback?json=%7B%22reward%22:%2042%7D' [GET]>
ERROR    seldon_core.wrapper:app.py:1892 Exception on /send-feedback [GET]
Traceback (most recent call last):
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask/app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask_cors/extension.py", line 161, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask/app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/workspace/source/python/seldon_core/wrapper.py", line 75, in SendFeedback
    user_model, requestJson, PRED_UNIT_ID, seldon_metrics
  File "/workspace/source/python/seldon_core/seldon_methods.py", line 183, in send_feedback
    raise Exception("TODO: Not implemented")
Exception: TODO: Not implemented
____________ test_seldon_metrics_send_feedback[UserObjectLowLevel] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 364, in test_seldon_metrics_send_feedback
    assert rv.status_code == 200
AssertionError: assert 500 == 200
 +  where 500 = <Response streamed [500 INTERNAL SERVER ERROR]>.status_code
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/send-feedback?json=%7B%22reward%22:%2042%7D' [GET]>
ERROR:seldon_core.wrapper:Exception on /send-feedback [GET]
Traceback (most recent call last):
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask/app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask_cors/extension.py", line 161, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask/app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/workspace/source/python/seldon_core/wrapper.py", line 75, in SendFeedback
    user_model, requestJson, PRED_UNIT_ID, seldon_metrics
  File "/workspace/source/python/seldon_core/seldon_methods.py", line 183, in send_feedback
    raise Exception("TODO: Not implemented")
Exception: TODO: Not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:73 REST Request: <Request 'http://localhost/send-feedback?json=%7B%22reward%22:%2042%7D' [GET]>
ERROR    seldon_core.wrapper:app.py:1892 Exception on /send-feedback [GET]
Traceback (most recent call last):
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask/app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask_cors/extension.py", line 161, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask/app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/workspace/source/python/seldon_core/wrapper.py", line 75, in SendFeedback
    user_model, requestJson, PRED_UNIT_ID, seldon_metrics
  File "/workspace/source/python/seldon_core/seldon_methods.py", line 183, in send_feedback
    raise Exception("TODO: Not implemented")
Exception: TODO: Not implemented
________________ test_seldon_metrics_aggregate[True-UserObject] ________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 399, in test_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO:root:Aggregate called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:112 REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO     root:test_metrics.py:163 Aggregate called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:116 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
____________ test_seldon_metrics_aggregate[True-UserObjectLowLevel] ____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 399, in test_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO:root:Aggregate raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:112 REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO     root:test_metrics.py:214 Aggregate raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:116 REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
_______________ test_seldon_metrics_aggregate[False-UserObject] ________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 399, in test_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO:root:Aggregate called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:112 REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO     root:test_metrics.py:163 Aggregate called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:116 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
___________ test_seldon_metrics_aggregate[False-UserObjectLowLevel] ____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 399, in test_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO:root:Aggregate raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:112 REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO     root:test_metrics.py:214 Aggregate raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:116 REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
_____________ test_seldon_metrics_transform_input[True-UserObject] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 426, in test_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform input called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:82 REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:167 Transform input called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:86 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
_________ test_seldon_metrics_transform_input[True-UserObjectLowLevel] _________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 426, in test_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform input raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:82 REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:221 Transform input raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:86 REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
____________ test_seldon_metrics_transform_input[False-UserObject] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 426, in test_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform input called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:82 REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:167 Transform input called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:86 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
________ test_seldon_metrics_transform_input[False-UserObjectLowLevel] _________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 426, in test_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform input raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:82 REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:221 Transform input raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:86 REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
____________ test_seldon_metrics_transform_output[True-UserObject] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 453, in test_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform output called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:92 REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:171 Transform output called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:96 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
________ test_seldon_metrics_transform_output[True-UserObjectLowLevel] _________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 453, in test_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform output raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:92 REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:228 Transform output raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:96 REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
____________ test_seldon_metrics_transform_output[False-UserObject] ____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 453, in test_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform output called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:92 REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:171 Transform output called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:96 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
________ test_seldon_metrics_transform_output[False-UserObjectLowLevel] ________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 453, in test_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform output raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:92 REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:228 Transform output raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:96 REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
__________________ test_seldon_metrics_route[True-UserObject] __________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 478, in test_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Route called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:class_names is not implemented
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': [[22]], 'names': ['t:0']}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:102 REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:175 Route called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:106 REST Response: {'data': {'ndarray': [[22]], 'names': ['t:0']}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
______________ test_seldon_metrics_route[True-UserObjectLowLevel] ______________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 478, in test_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Route raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': [22]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:102 REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:235 Route raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:106 REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': [22]}}
_________________ test_seldon_metrics_route[False-UserObject] __________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 478, in test_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Route called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:class_names is not implemented
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': [[22]], 'names': ['t:0']}, 'meta': {}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:102 REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:175 Route called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:106 REST Response: {'data': {'ndarray': [[22]], 'names': ['t:0']}, 'meta': {}}
_____________ test_seldon_metrics_route[False-UserObjectLowLevel] ______________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 478, in test_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Route raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': [22]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:102 REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:235 Route raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:106 REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': [22]}}
______________ test_proto_seldon_metrics_predict[True-UserObject] ______________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 506, in test_proto_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Predict called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:159 Predict called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
________ test_proto_seldon_metrics_predict[True-UserObjectLowLevelGrpc] ________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 506, in test_proto_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Predict raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:256 Predict raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
_____________ test_proto_seldon_metrics_predict[False-UserObject] ______________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 506, in test_proto_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Predict called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:159 Predict called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
_______ test_proto_seldon_metrics_predict[False-UserObjectLowLevelGrpc] ________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 506, in test_proto_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Predict raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:256 Predict raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
_____________ test_proto_seldon_metrics_aggregate[True-UserObject] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 540, in test_proto_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Aggregate called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:163 Aggregate called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
_______ test_proto_seldon_metrics_aggregate[True-UserObjectLowLevelGrpc] _______
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 540, in test_proto_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Aggregate raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:269 Aggregate raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
____________ test_proto_seldon_metrics_aggregate[False-UserObject] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 540, in test_proto_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Aggregate called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:163 Aggregate called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
______ test_proto_seldon_metrics_aggregate[False-UserObjectLowLevelGrpc] _______
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 540, in test_proto_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Aggregate raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:269 Aggregate raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
__________ test_proto_seldon_metrics_transform_input[True-UserObject] __________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 567, in test_proto_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform input called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:167 Transform input called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
____ test_proto_seldon_metrics_transform_input[True-UserObjectLowLevelGrpc] ____
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 567, in test_proto_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform input raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:282 Transform input raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
_________ test_proto_seldon_metrics_transform_input[False-UserObject] __________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 567, in test_proto_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform input called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:167 Transform input called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
___ test_proto_seldon_metrics_transform_input[False-UserObjectLowLevelGrpc] ____
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 567, in test_proto_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform input raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:282 Transform input raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
_________ test_proto_seldon_metrics_transform_output[True-UserObject] __________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 594, in test_proto_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform output called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:171 Transform output called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
___ test_proto_seldon_metrics_transform_output[True-UserObjectLowLevelGrpc] ____
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 594, in test_proto_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform output raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:295 Transform output raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
_________ test_proto_seldon_metrics_transform_output[False-UserObject] _________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 594, in test_proto_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform output called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:171 Transform output called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
___ test_proto_seldon_metrics_transform_output[False-UserObjectLowLevelGrpc] ___
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 594, in test_proto_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform output raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:295 Transform output raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
_______________ test_proto_seldon_metrics_route[True-UserObject] _______________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 621, in test_proto_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Route called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:175 Route called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
_________ test_proto_seldon_metrics_route[True-UserObjectLowLevelGrpc] _________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 621, in test_proto_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Route raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:308 Route raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
______________ test_proto_seldon_metrics_route[False-UserObject] _______________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 621, in test_proto_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Route called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:175 Route called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
________ test_proto_seldon_metrics_route[False-UserObjectLowLevelGrpc] _________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 621, in test_proto_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Route raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:308 Route raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
_________________________ test_model_template_app_rest _________________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_microservice.py", line 56, in test_model_template_app_rest
    assert response.json() == {"data": {"ndarray": []}, "meta": {}}
AssertionError: assert {'data': {'na...}, 'meta': {}} == {'data': {'nd...}, 'meta': {}}
  Omitting 1 identical items, use -vv to show
  Differing items:
  {'data': {'names': [], 'ndarray': []}} != {'data': {'ndarray': []}}
  Use -v to get the full diff
---------------------------- Captured stderr setup -----------------------------
INFO:root:starting: seldon-core-microservice MyModel REST --service-type MODEL --persistence 0
DEBUG:root:=== trying again
2020-07-28 14:12:38,657 - seldon_core.microservice:main:207 - INFO:  Starting microservice.py:main
2020-07-28 14:12:38,657 - seldon_core.microservice:main:208 - INFO:  Seldon Core version: 1.2.2
2020-07-28 14:12:38,660 - seldon_core.microservice:main:310 - INFO:  Parse JAEGER_EXTRA_TAGS []
2020-07-28 14:12:38,661 - seldon_core.microservice:main:313 - INFO:  Annotations: {}
2020-07-28 14:12:38,661 - seldon_core.microservice:main:317 - INFO:  Importing MyModel
2020-07-28 14:12:38,662 - MyModel:__init__:15 - INFO:  Initializing model
2020-07-28 14:12:39,058 - seldon_core.microservice:main:388 - INFO:  REST gunicorn microservice running on port 5000
2020-07-28 14:12:39,060 - seldon_core.microservice:main:446 - INFO:  REST metrics microservice running on port 6005
2020-07-28 14:12:39,061 - seldon_core.microservice:main:456 - INFO:  Starting servers
[2020-07-28 14:12:39 +0000] [3752] [INFO] Starting gunicorn 20.0.4
[2020-07-28 14:12:39 +0000] [3752] [INFO] Listening at: http://0.0.0.0:5000 (3752)
[2020-07-28 14:12:39 +0000] [3752] [INFO] Using worker: threads
[2020-07-28 14:12:39 +0000] [3788] [INFO] Booting worker with pid: 3788
[2020-07-28 14:12:39 +0000] [3785] [INFO] Starting gunicorn 20.0.4
[2020-07-28 14:12:39 +0000] [3785] [INFO] Listening at: http://0.0.0.0:6005 (3785)
[2020-07-28 14:12:39 +0000] [3785] [INFO] Using worker: sync
[2020-07-28 14:12:39 +0000] [3793] [INFO] Booting worker with pid: 3793
DEBUG:root:=== trying again
INFO:root:microservice ready
------------------------------ Captured log setup ------------------------------
INFO     root:helpers.py:65 starting: seldon-core-microservice MyModel REST --service-type MODEL --persistence 0
DEBUG    root:helpers.py:80 === trying again
DEBUG    root:helpers.py:80 === trying again
INFO     root:helpers.py:88 microservice ready
----------------------------- Captured stdout call -----------------------------
127.0.0.1 - - [28/Jul/2020:14:12:42 +0000] "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65 "-" "python-requests/2.24.0"
----------------------------- Captured stderr call -----------------------------
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): 127.0.0.1:5000
2020-07-28 14:12:42,114 - MyModel:predict:26 - INFO:  Predict called - will run idenity function
DEBUG:urllib3.connectionpool:http://127.0.0.1:5000 "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): 127.0.0.1:5000
2020-07-28 14:12:42,159 - MyModel:send_feedback:40 - INFO:  Send feedback called
DEBUG:urllib3.connectionpool:http://127.0.0.1:5000 "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45
------------------------------ Captured log call -------------------------------
DEBUG    urllib3.connectionpool:connectionpool.py:230 Starting new HTTP connection (1): 127.0.0.1:5000
DEBUG    urllib3.connectionpool:connectionpool.py:442 http://127.0.0.1:5000 "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65
DEBUG    urllib3.connectionpool:connectionpool.py:230 Starting new HTTP connection (1): 127.0.0.1:5000
DEBUG    urllib3.connectionpool:connectionpool.py:442 http://127.0.0.1:5000 "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45
--------------------------- Captured stdout teardown ---------------------------
127.0.0.1 - - [28/Jul/2020:14:12:42 +0000] "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45 "-" "python-requests/2.24.0"
--------------------------- Captured stderr teardown ---------------------------
[2020-07-28 14:12:42 +0000] [3793] [INFO] Worker exiting (pid: 3793)
[2020-07-28 14:12:42 +0000] [3752] [INFO] Handling signal: term
____________ test_model_template_app_rest_submodule[microservice0] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_microservice.py", line 106, in test_model_template_app_rest_submodule
    assert response.json() == {"data": {"ndarray": []}, "meta": {}}
AssertionError: assert {'data': {'na...}, 'meta': {}} == {'data': {'nd...}, 'meta': {}}
  Omitting 1 identical items, use -vv to show
  Differing items:
  {'data': {'names': [], 'ndarray': []}} != {'data': {'ndarray': []}}
  Use -v to get the full diff
---------------------------- Captured stderr setup -----------------------------

INFO:root:starting: seldon-core-microservice mymodule.my_model.MyModel REST --service-type MODEL --persistence 0
[2020-07-28 14:12:58 +0000] [3930] [INFO] Worker exiting (pid: 3930)
[2020-07-28 14:12:58 +0000] [3922] [INFO] Shutting down: Master
[2020-07-28 14:12:58 +0000] [3929] [INFO] Worker exiting (pid: 3929)
Error in atexit._run_exitfuncs:
Traceback (most recent call last):
  File "/opt/conda/lib/python3.7/multiprocessing/util.py", line 322, in _exit_function
    p.join()
  File "/opt/conda/lib/python3.7/multiprocessing/process.py", line 138, in join
    assert self._parent_pid == os.getpid(), 'can only join a child process'
AssertionError: can only join a child process
[2020-07-28 14:12:58 +0000] [3889] [INFO] Shutting down: Master
DEBUG:root:=== trying again
2020-07-28 14:12:59,007 - seldon_core.microservice:main:207 - INFO:  Starting microservice.py:main
2020-07-28 14:12:59,007 - seldon_core.microservice:main:208 - INFO:  Seldon Core version: 1.2.2
2020-07-28 14:12:59,010 - seldon_core.microservice:main:310 - INFO:  Parse JAEGER_EXTRA_TAGS []
2020-07-28 14:12:59,010 - seldon_core.microservice:main:313 - INFO:  Annotations: {}
2020-07-28 14:12:59,010 - seldon_core.microservice:main:321 - INFO:  Importing submodule ['mymodule.my_model', 'MyModel']
2020-07-28 14:12:59,011 - mymodule.my_model:__init__:15 - INFO:  Initializing model
2020-07-28 14:12:59,138 - seldon_core.microservice:main:388 - INFO:  REST gunicorn microservice running on port 5000
2020-07-28 14:12:59,139 - seldon_core.microservice:main:446 - INFO:  REST metrics microservice running on port 6005
2020-07-28 14:12:59,139 - seldon_core.microservice:main:456 - INFO:  Starting servers
[2020-07-28 14:12:59 +0000] [3933] [INFO] Starting gunicorn 20.0.4
[2020-07-28 14:12:59 +0000] [3933] [INFO] Listening at: http://0.0.0.0:5000 (3933)
[2020-07-28 14:12:59 +0000] [3933] [INFO] Using worker: threads
[2020-07-28 14:12:59 +0000] [3969] [INFO] Booting worker with pid: 3969
[2020-07-28 14:12:59 +0000] [3966] [INFO] Starting gunicorn 20.0.4
[2020-07-28 14:12:59 +0000] [3966] [INFO] Listening at: http://0.0.0.0:6005 (3966)
[2020-07-28 14:12:59 +0000] [3966] [INFO] Using worker: sync
[2020-07-28 14:12:59 +0000] [3974] [INFO] Booting worker with pid: 3974
DEBUG:root:=== trying again
INFO:root:microservice ready
------------------------------ Captured log setup ------------------------------
INFO     root:helpers.py:65 starting: seldon-core-microservice mymodule.my_model.MyModel REST --service-type MODEL --persistence 0
DEBUG    root:helpers.py:80 === trying again
DEBUG    root:helpers.py:80 === trying again
INFO     root:helpers.py:88 microservice ready
----------------------------- Captured stdout call -----------------------------
127.0.0.1 - - [28/Jul/2020:14:13:03 +0000] "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45 "-" "python-requests/2.24.0"
----------------------------- Captured stderr call -----------------------------
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): 127.0.0.1:5000
2020-07-28 14:13:03,004 - mymodule.my_model:predict:26 - INFO:  Predict called - will run idenity function
DEBUG:urllib3.connectionpool:http://127.0.0.1:5000 "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): 127.0.0.1:5000
2020-07-28 14:13:03,015 - mymodule.my_model:send_feedback:40 - INFO:  Send feedback called
DEBUG:urllib3.connectionpool:http://127.0.0.1:5000 "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45
------------------------------ Captured log call -------------------------------
DEBUG    urllib3.connectionpool:connectionpool.py:230 Starting new HTTP connection (1): 127.0.0.1:5000
DEBUG    urllib3.connectionpool:connectionpool.py:442 http://127.0.0.1:5000 "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65
DEBUG    urllib3.connectionpool:connectionpool.py:230 Starting new HTTP connection (1): 127.0.0.1:5000
DEBUG    urllib3.connectionpool:connectionpool.py:442 http://127.0.0.1:5000 "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45
--------------------------- Captured stdout teardown ---------------------------
127.0.0.1 - - [28/Jul/2020:14:13:03 +0000] "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65 "-" "python-requests/2.24.0"
--------------------------- Captured stderr teardown ---------------------------
[2020-07-28 14:13:03 +0000] [3974] [INFO] Worker exiting (pid: 3974)
[2020-07-28 14:13:03 +0000] [3933] [INFO] Handling signal: term
[2020-07-28 14:13:03 +0000] [3969] [INFO] Worker exiting (pid: 3969)
_________________ test_model_template_app_grpc[microservice0] __________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_microservice.py", line 130, in test_model_template_app_grpc
    response = stub.SendFeedback(request=request)
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/grpc/_channel.py", line 826, in __call__
    return _end_unary_response_blocking(state, call, False, None)
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/grpc/_channel.py", line 729, in _end_unary_response_blocking
    raise _InactiveRpcError(state)
grpc._channel._InactiveRpcError: <_InactiveRpcError of RPC that terminated with:
	status = StatusCode.UNKNOWN
	details = "Exception calling application: local variable 'request_proto' referenced before assignment"
	debug_error_string = "{"created":"@1595945588.107691006","description":"Error received from peer ipv4:0.0.0.0:5000","file":"src/core/lib/surface/call.cc","file_line":1055,"grpc_message":"Exception calling application: local variable 'request_proto' referenced before assignment","grpc_status":2}"
>
---------------------------- Captured stderr setup -----------------------------
INFO:root:starting: seldon-core-microservice MyModel GRPC --service-type MODEL --persistence 0
Error in atexit._run_exitfuncs:
Traceback (most recent call last):
  File "/opt/conda/lib/python3.7/multiprocessing/util.py", line 322, in _exit_function
    p.join()
  File "/opt/conda/lib/python3.7/multiprocessing/process.py", line 138, in join
    assert self._parent_pid == os.getpid(), 'can only join a child process'
AssertionError: can only join a child process
[2020-07-28 14:13:03 +0000] [3978] [INFO] Booting worker with pid: 3978
[2020-07-28 14:13:03 +0000] [3966] [INFO] Handling signal: term
[2020-07-28 14:13:03 +0000] [3978] [INFO] Worker exiting (pid: 3978)
[2020-07-28 14:13:03 +0000] [3966] [INFO] Shutting down: Master
[2020-07-28 14:13:03 +0000] [3933] [INFO] Shutting down: Master
DEBUG:root:=== trying again
2020-07-28 14:13:04,347 - seldon_core.microservice:main:207 - INFO:  Starting microservice.py:main
2020-07-28 14:13:04,347 - seldon_core.microservice:main:208 - INFO:  Seldon Core version: 1.2.2
2020-07-28 14:13:04,349 - seldon_core.microservice:main:310 - INFO:  Parse JAEGER_EXTRA_TAGS []
2020-07-28 14:13:04,349 - seldon_core.microservice:main:313 - INFO:  Annotations: {}
2020-07-28 14:13:04,349 - seldon_core.microservice:main:317 - INFO:  Importing MyModel
2020-07-28 14:13:04,350 - MyModel:__init__:15 - INFO:  Initializing model
2020-07-28 14:13:04,521 - seldon_core.microservice:main:446 - INFO:  REST metrics microservice running on port 6005
2020-07-28 14:13:04,527 - seldon_core.microservice:main:456 - INFO:  Starting servers
2020-07-28 14:13:04,661 - seldon_core.microservice:grpc_prediction_server:422 - INFO:  GRPC microservice Running on port 5000
[2020-07-28 14:13:04 +0000] [4012] [INFO] Starting gunicorn 20.0.4
[2020-07-28 14:13:04 +0000] [4012] [INFO] Listening at: http://0.0.0.0:6005 (4012)
[2020-07-28 14:13:04 +0000] [4012] [INFO] Using worker: sync
[2020-07-28 14:13:04 +0000] [4023] [INFO] Booting worker with pid: 4023
DEBUG:root:=== trying again
INFO:root:microservice ready
------------------------------ Captured log setup ------------------------------
INFO     root:helpers.py:65 starting: seldon-core-microservice MyModel GRPC --service-type MODEL --persistence 0
DEBUG    root:helpers.py:80 === trying again
DEBUG    root:helpers.py:80 === trying again
INFO     root:helpers.py:88 microservice ready
----------------------------- Captured stderr call -----------------------------
INFO:root:Calling method... try: 1
2020-07-28 14:13:08,103 - MyModel:predict:26 - INFO:  Predict called - will run idenity function
2020-07-28 14:13:08,106 - grpc._server:_call_behavior:445 - ERROR:  Exception calling application: local variable 'request_proto' referenced before assignment
Traceback (most recent call last):
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/grpc/_server.py", line 435, in _call_behavior
    response_or_iterator = behavior(argument, context)
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/seldon_core/wrapper.py", line 203, in SendFeedback
    self.user_model, feedback_grpc, PRED_UNIT_ID, self.seldon_metrics
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/seldon_core/seldon_methods.py", line 160, in send_feedback
    request_proto
UnboundLocalError: local variable 'request_proto' referenced before assignment
------------------------------ Captured log call -------------------------------
INFO     root:test_microservice.py:27 Calling method... try: 1
--------------------------- Captured stderr teardown ---------------------------
[2020-07-28 14:13:08 +0000] [4023] [INFO] Worker exiting (pid: 4023)
____________ test_model_template_app_tracing_config[microservice0] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_microservice.py", line 212, in test_model_template_app_tracing_config
    assert response.json() == {"data": {"ndarray": []}, "meta": {}}
AssertionError: assert {'data': {'na...}, 'meta': {}} == {'data': {'nd...}, 'meta': {}}
  Omitting 1 identical items, use -vv to show
  Differing items:
  {'data': {'names': [], 'ndarray': []}} != {'data': {'ndarray': []}}
  Use -v to get the full diff
---------------------------- Captured stderr setup -----------------------------
[2020-07-28 14:13:18 +0000] [4107] [INFO] Handling signal: term
INFO:root:starting: seldon-core-microservice MyModel REST --service-type MODEL --persistence 0 --tracing
[2020-07-28 14:13:18 +0000] [4118] [INFO] Worker exiting (pid: 4118)
[2020-07-28 14:13:18 +0000] [4107] [INFO] Shutting down: Master
DEBUG:root:=== trying again
2020-07-28 14:13:19,307 - seldon_core.microservice:main:207 - INFO:  Starting microservice.py:main
2020-07-28 14:13:19,307 - seldon_core.microservice:main:208 - INFO:  Seldon Core version: 1.2.2
2020-07-28 14:13:19,310 - seldon_core.microservice:main:310 - INFO:  Parse JAEGER_EXTRA_TAGS []
2020-07-28 14:13:19,310 - seldon_core.microservice:main:313 - INFO:  Annotations: {}
2020-07-28 14:13:19,310 - seldon_core.microservice:main:317 - INFO:  Importing MyModel
2020-07-28 14:13:19,311 - MyModel:__init__:15 - INFO:  Initializing model
2020-07-28 14:13:19,311 - seldon_core.microservice:setup_tracing:145 - INFO:  Initializing tracing
2020-07-28 14:13:19,366 - seldon_core.microservice:setup_tracing:166 - INFO:  Loading tracing config from /workspace/source/python/tests/resources/tracing_config/tracing.yaml
/workspace/source/python/.tox/py3/lib/python3.7/site-packages/seldon_core/microservice.py:170: YAMLLoadWarning: calling yaml.load() without Loader=... is deprecated, as the default Loader is unsafe. Please read https://msg.pyyaml.org/load for full details.
  config_dict = yaml.load(stream)
2020-07-28 14:13:19,369 - jaeger_tracing:_create_local_agent_channel:446 - INFO:  Initializing Jaeger Tracer with UDP reporter
2020-07-28 14:13:19,371 - jaeger_tracing:new_tracer:384 - INFO:  Using sampler ConstSampler(True)
2020-07-28 14:13:19,374 - jaeger_tracing:_initialize_global_tracer:436 - INFO:  opentracing.tracer initialized to <jaeger_client.tracer.Tracer object at 0x7feba2e75588>[app_name=MyModel]
2020-07-28 14:13:19,499 - seldon_core.microservice:main:388 - INFO:  REST gunicorn microservice running on port 5000
2020-07-28 14:13:19,504 - seldon_core.microservice:main:446 - INFO:  REST metrics microservice running on port 6005
2020-07-28 14:13:19,504 - seldon_core.microservice:main:456 - INFO:  Starting servers
[2020-07-28 14:13:19 +0000] [4121] [INFO] Starting gunicorn 20.0.4
[2020-07-28 14:13:19 +0000] [4121] [INFO] Listening at: http://0.0.0.0:5000 (4121)
[2020-07-28 14:13:19 +0000] [4121] [INFO] Using worker: threads
[2020-07-28 14:13:19 +0000] [4156] [INFO] Booting worker with pid: 4156
[2020-07-28 14:13:19 +0000] [4155] [INFO] Starting gunicorn 20.0.4
[2020-07-28 14:13:19 +0000] [4155] [INFO] Listening at: http://0.0.0.0:6005 (4155)
[2020-07-28 14:13:19 +0000] [4155] [INFO] Using worker: sync
[2020-07-28 14:13:19 +0000] [4163] [INFO] Booting worker with pid: 4163
DEBUG:root:=== trying again
INFO:root:microservice ready
------------------------------ Captured log setup ------------------------------
INFO     root:helpers.py:65 starting: seldon-core-microservice MyModel REST --service-type MODEL --persistence 0 --tracing
DEBUG    root:helpers.py:80 === trying again
DEBUG    root:helpers.py:80 === trying again
INFO     root:helpers.py:88 microservice ready
----------------------------- Captured stdout call -----------------------------
127.0.0.1 - - [28/Jul/2020:14:13:23 +0000] "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45 "-" "python-requests/2.24.0"
127.0.0.1 - - [28/Jul/2020:14:13:23 +0000] "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65 "-" "python-requests/2.24.0"
----------------------------- Captured stderr call -----------------------------
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): 127.0.0.1:5000
2020-07-28 14:13:23,267 - MyModel:predict:26 - INFO:  Predict called - will run idenity function
DEBUG:urllib3.connectionpool:http://127.0.0.1:5000 "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): 127.0.0.1:5000
2020-07-28 14:13:23,279 - MyModel:send_feedback:40 - INFO:  Send feedback called
DEBUG:urllib3.connectionpool:http://127.0.0.1:5000 "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45
------------------------------ Captured log call -------------------------------
DEBUG    urllib3.connectionpool:connectionpool.py:230 Starting new HTTP connection (1): 127.0.0.1:5000
DEBUG    urllib3.connectionpool:connectionpool.py:442 http://127.0.0.1:5000 "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65
DEBUG    urllib3.connectionpool:connectionpool.py:230 Starting new HTTP connection (1): 127.0.0.1:5000
DEBUG    urllib3.connectionpool:connectionpool.py:442 http://127.0.0.1:5000 "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45
--------------------------- Captured stderr teardown ---------------------------
[2020-07-28 14:13:23 +0000] [4163] [INFO] Worker exiting (pid: 4163)
[2020-07-28 14:13:23 +0000] [4121] [INFO] Handling signal: term
[2020-07-28 14:13:23 +0000] [4155] [INFO] Handling signal: term
____________________________ test_model_feedback_ok ____________________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_model_microservice.py", line 441, in test_model_feedback_ok
    assert user_object.rewards[-1] == 1.0
IndexError: list index out of range
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "my-model-name",
  "versions": [
    "model-version"
  ],
  "platform": "model-platform",
  "inputs": [
    {
      "name": "input",
      "datatype": "BYTES",
      "shape": [
        1
      ]
    }
  ],
  "outputs": [
    {
      "name": "output",
      "datatype": "BYTES",
      "shape": [
        1
      ]
    }
  ]
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22ndarray%22:%5B%5D%7D%7D,%22reward%22:1.0%7D' [GET]>
INFO:root:None
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "my-model-name",
  "versions": [
    "model-version"
  ],
  "platform": "model-platform",
  "inputs": [
    {
      "name": "input",
      "datatype": "BYTES",
      "shape": [
        1
      ]
    }
  ],
  "outputs": [
    {
      "name": "output",
      "datatype": "BYTES",
      "shape": [
        1
      ]
    }
  ]
}
DEBUG    seldon_core.wrapper:wrapper.py:73 REST Request: <Request 'http://localhost/send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22ndarray%22:%5B%5D%7D%7D,%22reward%22:1.0%7D' [GET]>
INFO     root:test_model_microservice.py:439 None
_______________________ test_unimplemented_feedback_raw ________________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_model_microservice.py", line 992, in test_unimplemented_feedback_raw
    j = json.loads(rv.data)
  File "/opt/conda/lib/python3.7/json/__init__.py", line 348, in loads
    return _default_decoder.decode(s)
  File "/opt/conda/lib/python3.7/json/decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "/opt/conda/lib/python3.7/json/decoder.py", line 355, in raw_decode
    raise JSONDecodeError("Expecting value", s, err.value) from None
json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22ndarray%22:%5B%5D%7D%7D,%22reward%22:1.0%7D' [GET]>
ERROR:seldon_core.wrapper:Exception on /send-feedback [GET]
Traceback (most recent call last):
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask/app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask_cors/extension.py", line 161, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask/app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/workspace/source/python/seldon_core/wrapper.py", line 75, in SendFeedback
    user_model, requestJson, PRED_UNIT_ID, seldon_metrics
  File "/workspace/source/python/seldon_core/seldon_methods.py", line 183, in send_feedback
    raise Exception("TODO: Not implemented")
Exception: TODO: Not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:73 REST Request: <Request 'http://localhost/send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22ndarray%22:%5B%5D%7D%7D,%22reward%22:1.0%7D' [GET]>
ERROR    seldon_core.wrapper:app.py:1892 Exception on /send-feedback [GET]
Traceback (most recent call last):
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask/app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask_cors/extension.py", line 161, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask/app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/workspace/source/python/seldon_core/wrapper.py", line 75, in SendFeedback
    user_model, requestJson, PRED_UNIT_ID, seldon_metrics
  File "/workspace/source/python/seldon_core/seldon_methods.py", line 183, in send_feedback
    raise Exception("TODO: Not implemented")
Exception: TODO: Not implemented
___________________________ test_router_feedback_ok ____________________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_router_microservice.py", line 227, in test_router_feedback_ok
    assert rv.status_code == 200
AssertionError: assert 400 == 200
 +  where 400 = <Response 146 bytes [400 BAD REQUEST]>.status_code
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22ndarray%22:%5B%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%221%22:1%7D%7D%7D,%22reward%22:1.0%7D' [GET]>
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
INFO:root:Feedback called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
ERROR:seldon_core.wrapper:{'status': {'status': 1, 'info': 'Unknown data type returned as payload (must be list or np array):None', 'code': -1, 'reason': 'MICROSERVICE_BAD_DATA'}}
INFO:root:{'status': {'code': -1, 'info': 'Unknown data type returned as payload (must be list or np array):None', 'reason': 'MICROSERVICE_BAD_DATA', 'status': 1}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:73 REST Request: <Request 'http://localhost/send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22ndarray%22:%5B%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%221%22:1%7D%7D%7D,%22reward%22:1.0%7D' [GET]>
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
INFO     root:test_router_microservice.py:30 Feedback called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
ERROR    seldon_core.wrapper:wrapper.py:44 {'status': {'status': 1, 'info': 'Unknown data type returned as payload (must be list or np array):None', 'code': -1, 'reason': 'MICROSERVICE_BAD_DATA'}}
INFO     root:test_router_microservice.py:226 {'status': {'code': -1, 'info': 'Unknown data type returned as payload (must be list or np array):None', 'reason': 'MICROSERVICE_BAD_DATA', 'status': 1}}
_____________________________ test_proto_feedback ______________________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_router_microservice.py", line 315, in test_proto_feedback
    resp = app.SendFeedback(feedback, None)
  File "/workspace/source/python/seldon_core/wrapper.py", line 203, in SendFeedback
    self.user_model, feedback_grpc, PRED_UNIT_ID, self.seldon_metrics
  File "/workspace/source/python/seldon_core/seldon_methods.py", line 160, in send_feedback
    request_proto
UnboundLocalError: local variable 'request_proto' referenced before assignment
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}

----------- coverage: platform linux, python 3.7.1-final-0 -----------
Name                                                                                                      Stmts   Miss  Cover
-----------------------------------------------------------------------------------------------------------------------------
.tox/py3/lib/python3.7/site-packages/seldon_core/__init__.py                                                  2      0   100%
.tox/py3/lib/python3.7/site-packages/seldon_core/api_tester.py                                               81     81     0%
.tox/py3/lib/python3.7/site-packages/seldon_core/app.py                                                      36      3    92%
.tox/py3/lib/python3.7/site-packages/seldon_core/batch_processor.py                                          94     94     0%
.tox/py3/lib/python3.7/site-packages/seldon_core/flask_utils.py                                              44     24    45%
.tox/py3/lib/python3.7/site-packages/seldon_core/imports_helper.py                                           27      3    89%
.tox/py3/lib/python3.7/site-packages/seldon_core/metadata.py                                                 32      3    91%
.tox/py3/lib/python3.7/site-packages/seldon_core/metrics.py                                                 130     76    42%
.tox/py3/lib/python3.7/site-packages/seldon_core/microservice.py                                            201     65    68%
.tox/py3/lib/python3.7/site-packages/seldon_core/microservice_tester.py                                     140    140     0%
.tox/py3/lib/python3.7/site-packages/seldon_core/persistence.py                                              45     23    49%
.tox/py3/lib/python3.7/site-packages/seldon_core/proto/__init__.py                                            0      0   100%
.tox/py3/lib/python3.7/site-packages/seldon_core/proto/prediction_pb2.py                                    160      0   100%
.tox/py3/lib/python3.7/site-packages/seldon_core/proto/prediction_pb2_grpc.py                               137     89    35%
.tox/py3/lib/python3.7/site-packages/seldon_core/proto/tensorflow/core/framework/__init__.py                  3      1    67%
.tox/py3/lib/python3.7/site-packages/seldon_core/proto/tensorflow/core/framework/resource_handle_pb2.py      22      0   100%
.tox/py3/lib/python3.7/site-packages/seldon_core/proto/tensorflow/core/framework/tensor_pb2.py               36      0   100%
.tox/py3/lib/python3.7/site-packages/seldon_core/proto/tensorflow/core/framework/tensor_shape_pb2.py         18      0   100%
.tox/py3/lib/python3.7/site-packages/seldon_core/proto/tensorflow/core/framework/types_pb2.py                62      0   100%
.tox/py3/lib/python3.7/site-packages/seldon_core/seldon_client.py                                           599    599     0%
.tox/py3/lib/python3.7/site-packages/seldon_core/seldon_methods.py                                          244    190    22%
.tox/py3/lib/python3.7/site-packages/seldon_core/serving_test_gen.py                                         40     40     0%
.tox/py3/lib/python3.7/site-packages/seldon_core/storage.py                                                 155    127    18%
.tox/py3/lib/python3.7/site-packages/seldon_core/user_model.py                                              162     92    43%
.tox/py3/lib/python3.7/site-packages/seldon_core/utils.py                                                   282    177    37%
.tox/py3/lib/python3.7/site-packages/seldon_core/version.py                                                   1      0   100%
.tox/py3/lib/python3.7/site-packages/seldon_core/wrapper.py                                                 145     75    48%
seldon_core/__init__.py                                                                                       2      0   100%
seldon_core/api_tester.py                                                                                    81     38    53%
seldon_core/app.py                                                                                           36     22    39%
seldon_core/batch_processor.py                                                                               94     94     0%
seldon_core/flask_utils.py                                                                                   44      3    93%
seldon_core/imports_helper.py                                                                                27      3    89%
seldon_core/metadata.py                                                                                      32      0   100%
seldon_core/metrics.py                                                                                      130      5    96%
seldon_core/microservice.py                                                                                 201    120    40%
seldon_core/microservice_tester.py                                                                          140     43    69%
seldon_core/persistence.py                                                                                   45     23    49%
seldon_core/proto/__init__.py                                                                                 0      0   100%
seldon_core/proto/prediction_pb2.py                                                                         160      0   100%
seldon_core/proto/prediction_pb2_grpc.py                                                                    137     65    53%
seldon_core/proto/tensorflow/core/framework/__init__.py                                                       3      1    67%
seldon_core/proto/tensorflow/core/framework/resource_handle_pb2.py                                           22      0   100%
seldon_core/proto/tensorflow/core/framework/tensor_pb2.py                                                    36      0   100%
seldon_core/proto/tensorflow/core/framework/tensor_shape_pb2.py                                              18      0   100%
seldon_core/proto/tensorflow/core/framework/types_pb2.py                                                     62      0   100%
seldon_core/seldon_client.py                                                                                599    284    53%
seldon_core/seldon_methods.py                                                                               244     10    96%
seldon_core/serving_test_gen.py                                                                              40     40     0%
seldon_core/storage.py                                                                                      155     93    40%
seldon_core/user_model.py                                                                                   162     30    81%
seldon_core/utils.py                                                                                        282     43    85%
seldon_core/version.py                                                                                        1      0   100%
seldon_core/wrapper.py                                                                                      145     11    92%
-----------------------------------------------------------------------------------------------------------------------------
TOTAL                                                                                                      5796   2830    51%

=========================== short test summary info ============================
FAILED tests/test_metrics.py::test_seldon_metrics_predict[True-UserObject] - ...
FAILED tests/test_metrics.py::test_seldon_metrics_predict[True-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_predict[False-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_predict[False-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_send_feedback[UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_send_feedback[UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_aggregate[True-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_aggregate[True-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_aggregate[False-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_aggregate[False-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_input[True-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_input[True-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_input[False-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_input[False-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_output[True-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_output[True-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_output[False-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_output[False-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_route[True-UserObject] - Ke...
FAILED tests/test_metrics.py::test_seldon_metrics_route[True-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_route[False-UserObject] - K...
FAILED tests/test_metrics.py::test_seldon_metrics_route[False-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_predict[True-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_predict[True-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_predict[False-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_predict[False-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_aggregate[True-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_aggregate[True-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_aggregate[False-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_aggregate[False-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_input[True-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_input[True-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_input[False-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_input[False-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_output[True-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_output[True-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_output[False-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_output[False-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_route[True-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_route[True-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_route[False-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_route[False-UserObjectLowLevelGrpc]
FAILED tests/test_microservice.py::test_model_template_app_rest - AssertionEr...
FAILED tests/test_microservice.py::test_model_template_app_rest_submodule[microservice0]
FAILED tests/test_microservice.py::test_model_template_app_grpc[microservice0]
FAILED tests/test_microservice.py::test_model_template_app_tracing_config[microservice0]
FAILED tests/test_model_microservice.py::test_model_feedback_ok - IndexError:...
FAILED tests/test_model_microservice.py::test_unimplemented_feedback_raw - js...
FAILED tests/test_router_microservice.py::test_router_feedback_ok - assert 40...
FAILED tests/test_router_microservice.py::test_proto_feedback - UnboundLocalE...
============ 50 failed, 307 passed, 14 skipped in 112.38s (0:01:52) ============
ERROR: InvocationError for command /workspace/source/python/.tox/py3/bin/pytest (exited with code 1)
tensorflow create: /workspace/source/python/.tox/tensorflow
tensorflow installdeps: tenacity, pytest, pytest-cov, Pillow
tensorflow inst: /workspace/source/python/.tox/.tmp/package/1/seldon-core-1.2.2.zip
tensorflow installed: absl-py==0.9.0,astunparse==1.6.3,attrs==19.3.0,cachetools==4.1.1,certifi==2020.6.20,chardet==3.0.4,click==7.1.2,configparser==5.0.0,coverage==5.2.1,Flask==1.1.2,Flask-Cors==3.0.8,Flask-OpenTracing==1.1.0,flatbuffers==1.12,gast==0.3.3,google-auth==1.19.2,google-auth-oauthlib==0.4.1,google-pasta==0.2.0,grpcio==1.30.0,grpcio-opentracing==1.1.4,gunicorn==20.0.4,h5py==2.10.0,idna==2.10,importlib-metadata==1.7.0,itsdangerous==1.1.0,jaeger-client==4.3.0,Jinja2==2.11.2,jsonschema==3.2.0,Keras-Preprocessing==1.1.2,Markdown==3.2.2,MarkupSafe==1.1.1,minio==5.0.10,more-itertools==8.4.0,numpy==1.19.1,oauthlib==3.1.0,opentracing==2.3.0,opt-einsum==3.3.0,packaging==20.4,Pillow==7.2.0,pluggy==0.13.1,prometheus-client==0.8.0,protobuf==3.12.2,py==1.9.0,pyasn1==0.4.8,pyasn1-modules==0.2.8,pyparsing==2.4.7,pyrsistent==0.16.0,pytest==5.4.3,pytest-cov==2.10.0,python-dateutil==2.8.1,pytz==2020.1,PyYAML==5.3.1,redis==3.5.3,requests==2.24.0,requests-oauthlib==1.3.0,rsa==4.6,scipy==1.4.1,seldon-core @ file:///workspace/source/python/.tox/.tmp/package/1/seldon-core-1.2.2.zip,six==1.15.0,tenacity==6.2.0,tensorboard==2.3.0,tensorboard-plugin-wit==1.7.0,tensorflow==2.3.0,tensorflow-estimator==2.3.0,termcolor==1.1.0,threadloop==1.0.2,thrift==0.13.0,tornado==6.0.4,urllib3==1.25.10,wcwidth==0.2.5,Werkzeug==1.0.1,wrapt==1.12.1,zipp==3.1.0
tensorflow run-test-pre: PYTHONHASHSEED='417737162'
tensorflow run-test: commands[0] | pytest
============================= test session starts ==============================
platform linux -- Python 3.7.1, pytest-5.4.3, py-1.9.0, pluggy-0.13.1
cachedir: .tox/tensorflow/.pytest_cache
rootdir: /workspace/source/python, inifile: setup.cfg
plugins: cov-2.10.0
collected 371 items

tests/test_api_tester.py ..                                              [  0%]
tests/test_application_exception_microservice.py ..                      [  1%]
tests/test_azure_storage.py ssssss                                       [  2%]
tests/test_combiner_microservice.py .....................                [  8%]
tests/test_metadata.py ................................................. [ 21%]
...                                                                      [ 22%]
tests/test_metrics.py ...................FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF [ 35%]
FFFFFFFFFFF........                                                      [ 40%]
tests/test_microservice.py .F...FF..F...                                 [ 44%]
tests/test_microservice_tester.py .....                                  [ 45%]
tests/test_model_microservice.py ..........F............................ [ 56%]
.......F                                                                 [ 58%]
tests/test_router_microservice.py ........F....F...                      [ 63%]
tests/test_s3_storage.py ...                                             [ 63%]
tests/test_seldon_client.py ..................................           [ 73%]
tests/test_storage.py ...ss..s                                           [ 75%]
tests/test_transformer_microservice.py ................................. [ 84%]
........                                                                 [ 86%]
tests/test_user_model.py ....                                            [ 87%]
tests/test_utils.py ...............................................      [100%]

=================================== FAILURES ===================================
_________________ test_seldon_metrics_predict[True-UserObject] _________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 345, in test_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Predict called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:57 REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:159 Predict called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:65 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
_____________ test_seldon_metrics_predict[True-UserObjectLowLevel] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 345, in test_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Predict raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:57 REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:207 Predict raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:65 REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
________________ test_seldon_metrics_predict[False-UserObject] _________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 345, in test_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Predict called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:57 REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:159 Predict called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:65 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
____________ test_seldon_metrics_predict[False-UserObjectLowLevel] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 345, in test_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Predict raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:57 REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:207 Predict raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:65 REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
________________ test_seldon_metrics_send_feedback[UserObject] _________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 364, in test_seldon_metrics_send_feedback
    assert rv.status_code == 200
AssertionError: assert 500 == 200
 +  where 500 = <Response streamed [500 INTERNAL SERVER ERROR]>.status_code
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/send-feedback?json=%7B%22reward%22:%2042%7D' [GET]>
ERROR:seldon_core.wrapper:Exception on /send-feedback [GET]
Traceback (most recent call last):
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask/app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask_cors/extension.py", line 161, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask/app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/workspace/source/python/seldon_core/wrapper.py", line 75, in SendFeedback
    user_model, requestJson, PRED_UNIT_ID, seldon_metrics
  File "/workspace/source/python/seldon_core/seldon_methods.py", line 183, in send_feedback
    raise Exception("TODO: Not implemented")
Exception: TODO: Not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:73 REST Request: <Request 'http://localhost/send-feedback?json=%7B%22reward%22:%2042%7D' [GET]>
ERROR    seldon_core.wrapper:app.py:1892 Exception on /send-feedback [GET]
Traceback (most recent call last):
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask/app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask_cors/extension.py", line 161, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask/app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/workspace/source/python/seldon_core/wrapper.py", line 75, in SendFeedback
    user_model, requestJson, PRED_UNIT_ID, seldon_metrics
  File "/workspace/source/python/seldon_core/seldon_methods.py", line 183, in send_feedback
    raise Exception("TODO: Not implemented")
Exception: TODO: Not implemented
____________ test_seldon_metrics_send_feedback[UserObjectLowLevel] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 364, in test_seldon_metrics_send_feedback
    assert rv.status_code == 200
AssertionError: assert 500 == 200
 +  where 500 = <Response streamed [500 INTERNAL SERVER ERROR]>.status_code
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/send-feedback?json=%7B%22reward%22:%2042%7D' [GET]>
ERROR:seldon_core.wrapper:Exception on /send-feedback [GET]
Traceback (most recent call last):
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask/app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask_cors/extension.py", line 161, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask/app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/workspace/source/python/seldon_core/wrapper.py", line 75, in SendFeedback
    user_model, requestJson, PRED_UNIT_ID, seldon_metrics
  File "/workspace/source/python/seldon_core/seldon_methods.py", line 183, in send_feedback
    raise Exception("TODO: Not implemented")
Exception: TODO: Not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:73 REST Request: <Request 'http://localhost/send-feedback?json=%7B%22reward%22:%2042%7D' [GET]>
ERROR    seldon_core.wrapper:app.py:1892 Exception on /send-feedback [GET]
Traceback (most recent call last):
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask/app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask_cors/extension.py", line 161, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask/app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/workspace/source/python/seldon_core/wrapper.py", line 75, in SendFeedback
    user_model, requestJson, PRED_UNIT_ID, seldon_metrics
  File "/workspace/source/python/seldon_core/seldon_methods.py", line 183, in send_feedback
    raise Exception("TODO: Not implemented")
Exception: TODO: Not implemented
________________ test_seldon_metrics_aggregate[True-UserObject] ________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 399, in test_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO:root:Aggregate called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:112 REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO     root:test_metrics.py:163 Aggregate called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:116 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
____________ test_seldon_metrics_aggregate[True-UserObjectLowLevel] ____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 399, in test_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO:root:Aggregate raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:112 REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO     root:test_metrics.py:214 Aggregate raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:116 REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
_______________ test_seldon_metrics_aggregate[False-UserObject] ________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 399, in test_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO:root:Aggregate called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:112 REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO     root:test_metrics.py:163 Aggregate called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:116 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
___________ test_seldon_metrics_aggregate[False-UserObjectLowLevel] ____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 399, in test_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO:root:Aggregate raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:112 REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO     root:test_metrics.py:214 Aggregate raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:116 REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
_____________ test_seldon_metrics_transform_input[True-UserObject] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 426, in test_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform input called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:82 REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:167 Transform input called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:86 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
_________ test_seldon_metrics_transform_input[True-UserObjectLowLevel] _________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 426, in test_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform input raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:82 REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:221 Transform input raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:86 REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
____________ test_seldon_metrics_transform_input[False-UserObject] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 426, in test_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform input called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:82 REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:167 Transform input called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:86 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
________ test_seldon_metrics_transform_input[False-UserObjectLowLevel] _________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 426, in test_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform input raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:82 REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:221 Transform input raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:86 REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
____________ test_seldon_metrics_transform_output[True-UserObject] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 453, in test_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform output called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:92 REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:171 Transform output called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:96 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
________ test_seldon_metrics_transform_output[True-UserObjectLowLevel] _________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 453, in test_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform output raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:92 REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:228 Transform output raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:96 REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
____________ test_seldon_metrics_transform_output[False-UserObject] ____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 453, in test_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform output called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:92 REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:171 Transform output called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:96 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
________ test_seldon_metrics_transform_output[False-UserObjectLowLevel] ________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 453, in test_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform output raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:92 REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:228 Transform output raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:96 REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
__________________ test_seldon_metrics_route[True-UserObject] __________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 478, in test_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Route called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:class_names is not implemented
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': [[22]], 'names': ['t:0']}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:102 REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:175 Route called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:106 REST Response: {'data': {'ndarray': [[22]], 'names': ['t:0']}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
______________ test_seldon_metrics_route[True-UserObjectLowLevel] ______________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 478, in test_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Route raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': [22]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:102 REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:235 Route raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:106 REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': [22]}}
_________________ test_seldon_metrics_route[False-UserObject] __________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 478, in test_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Route called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:class_names is not implemented
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': [[22]], 'names': ['t:0']}, 'meta': {}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:102 REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:175 Route called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:106 REST Response: {'data': {'ndarray': [[22]], 'names': ['t:0']}, 'meta': {}}
_____________ test_seldon_metrics_route[False-UserObjectLowLevel] ______________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 478, in test_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Route raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': [22]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:102 REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:235 Route raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:106 REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': [22]}}
______________ test_proto_seldon_metrics_predict[True-UserObject] ______________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 506, in test_proto_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Predict called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:159 Predict called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
________ test_proto_seldon_metrics_predict[True-UserObjectLowLevelGrpc] ________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 506, in test_proto_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Predict raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:256 Predict raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
_____________ test_proto_seldon_metrics_predict[False-UserObject] ______________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 506, in test_proto_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Predict called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:159 Predict called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
_______ test_proto_seldon_metrics_predict[False-UserObjectLowLevelGrpc] ________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 506, in test_proto_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Predict raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:256 Predict raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
_____________ test_proto_seldon_metrics_aggregate[True-UserObject] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 540, in test_proto_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Aggregate called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:163 Aggregate called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
_______ test_proto_seldon_metrics_aggregate[True-UserObjectLowLevelGrpc] _______
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 540, in test_proto_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Aggregate raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:269 Aggregate raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
____________ test_proto_seldon_metrics_aggregate[False-UserObject] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 540, in test_proto_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Aggregate called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:163 Aggregate called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
______ test_proto_seldon_metrics_aggregate[False-UserObjectLowLevelGrpc] _______
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 540, in test_proto_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Aggregate raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:269 Aggregate raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
__________ test_proto_seldon_metrics_transform_input[True-UserObject] __________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 567, in test_proto_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform input called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:167 Transform input called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
____ test_proto_seldon_metrics_transform_input[True-UserObjectLowLevelGrpc] ____
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 567, in test_proto_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform input raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:282 Transform input raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
_________ test_proto_seldon_metrics_transform_input[False-UserObject] __________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 567, in test_proto_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform input called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:167 Transform input called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
___ test_proto_seldon_metrics_transform_input[False-UserObjectLowLevelGrpc] ____
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 567, in test_proto_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform input raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:282 Transform input raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
_________ test_proto_seldon_metrics_transform_output[True-UserObject] __________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 594, in test_proto_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform output called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:171 Transform output called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
___ test_proto_seldon_metrics_transform_output[True-UserObjectLowLevelGrpc] ____
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 594, in test_proto_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform output raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:295 Transform output raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
_________ test_proto_seldon_metrics_transform_output[False-UserObject] _________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 594, in test_proto_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform output called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:171 Transform output called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
___ test_proto_seldon_metrics_transform_output[False-UserObjectLowLevelGrpc] ___
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 594, in test_proto_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform output raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:295 Transform output raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
_______________ test_proto_seldon_metrics_route[True-UserObject] _______________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 621, in test_proto_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Route called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:175 Route called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
_________ test_proto_seldon_metrics_route[True-UserObjectLowLevelGrpc] _________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 621, in test_proto_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Route raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:308 Route raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
______________ test_proto_seldon_metrics_route[False-UserObject] _______________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 621, in test_proto_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Route called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:175 Route called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
________ test_proto_seldon_metrics_route[False-UserObjectLowLevelGrpc] _________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 621, in test_proto_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Route raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:308 Route raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
_________________________ test_model_template_app_rest _________________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_microservice.py", line 56, in test_model_template_app_rest
    assert response.json() == {"data": {"ndarray": []}, "meta": {}}
AssertionError: assert {'data': {'na...}, 'meta': {}} == {'data': {'nd...}, 'meta': {}}
  Omitting 1 identical items, use -vv to show
  Differing items:
  {'data': {'names': [], 'ndarray': []}} != {'data': {'ndarray': []}}
  Use -v to get the full diff
---------------------------- Captured stderr setup -----------------------------
INFO:root:starting: seldon-core-microservice MyModel REST --service-type MODEL --persistence 0
2020-07-28 14:16:16.870046: W tensorflow/stream_executor/platform/default/dso_loader.cc:59] Could not load dynamic library 'libcudart.so.10.1'; dlerror: libcudart.so.10.1: cannot open shared object file: No such file or directory
2020-07-28 14:16:16.870137: I tensorflow/stream_executor/cuda/cudart_stub.cc:29] Ignore above cudart dlerror if you do not have a GPU set up on your machine.
DEBUG:root:=== trying again
2020-07-28 14:16:19,110 - seldon_core.microservice:main:207 - INFO:  Starting microservice.py:main
2020-07-28 14:16:19,110 - seldon_core.microservice:main:208 - INFO:  Seldon Core version: 1.2.2
2020-07-28 14:16:19,113 - seldon_core.microservice:main:310 - INFO:  Parse JAEGER_EXTRA_TAGS []
2020-07-28 14:16:19,113 - seldon_core.microservice:main:313 - INFO:  Annotations: {}
2020-07-28 14:16:19,113 - seldon_core.microservice:main:317 - INFO:  Importing MyModel
2020-07-28 14:16:19,113 - MyModel:__init__:15 - INFO:  Initializing model
2020-07-28 14:16:19,638 - seldon_core.microservice:main:388 - INFO:  REST gunicorn microservice running on port 5000
2020-07-28 14:16:19,640 - seldon_core.microservice:main:446 - INFO:  REST metrics microservice running on port 6005
2020-07-28 14:16:19,640 - seldon_core.microservice:main:456 - INFO:  Starting servers
[2020-07-28 14:16:19 +0000] [11927] [INFO] Starting gunicorn 20.0.4
[2020-07-28 14:16:19 +0000] [11927] [INFO] Listening at: http://0.0.0.0:5000 (11927)
[2020-07-28 14:16:19 +0000] [11927] [INFO] Using worker: threads
[2020-07-28 14:16:19 +0000] [11976] [INFO] Booting worker with pid: 11976
[2020-07-28 14:16:20 +0000] [11975] [INFO] Starting gunicorn 20.0.4
[2020-07-28 14:16:20 +0000] [11975] [INFO] Listening at: http://0.0.0.0:6005 (11975)
[2020-07-28 14:16:20 +0000] [11975] [INFO] Using worker: sync
[2020-07-28 14:16:20 +0000] [11983] [INFO] Booting worker with pid: 11983
DEBUG:root:=== trying again
INFO:root:microservice ready
------------------------------ Captured log setup ------------------------------
INFO     root:helpers.py:65 starting: seldon-core-microservice MyModel REST --service-type MODEL --persistence 0
DEBUG    root:helpers.py:80 === trying again
DEBUG    root:helpers.py:80 === trying again
INFO     root:helpers.py:88 microservice ready
----------------------------- Captured stdout call -----------------------------
127.0.0.1 - - [28/Jul/2020:14:16:20 +0000] "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45 "-" "python-requests/2.24.0"
----------------------------- Captured stderr call -----------------------------
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): 127.0.0.1:5000
2020-07-28 14:16:20,927 - MyModel:predict:26 - INFO:  Predict called - will run idenity function
DEBUG:urllib3.connectionpool:http://127.0.0.1:5000 "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): 127.0.0.1:5000
2020-07-28 14:16:20,948 - MyModel:send_feedback:40 - INFO:  Send feedback called
DEBUG:urllib3.connectionpool:http://127.0.0.1:5000 "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45
------------------------------ Captured log call -------------------------------
DEBUG    urllib3.connectionpool:connectionpool.py:230 Starting new HTTP connection (1): 127.0.0.1:5000
DEBUG    urllib3.connectionpool:connectionpool.py:442 http://127.0.0.1:5000 "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65
DEBUG    urllib3.connectionpool:connectionpool.py:230 Starting new HTTP connection (1): 127.0.0.1:5000
DEBUG    urllib3.connectionpool:connectionpool.py:442 http://127.0.0.1:5000 "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45
--------------------------- Captured stdout teardown ---------------------------
127.0.0.1 - - [28/Jul/2020:14:16:20 +0000] "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65 "-" "python-requests/2.24.0"
--------------------------- Captured stderr teardown ---------------------------
[2020-07-28 14:16:20 +0000] [11983] [INFO] Worker exiting (pid: 11983)
[2020-07-28 14:16:21 +0000] [11927] [INFO] Handling signal: term
____________ test_model_template_app_rest_submodule[microservice0] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_microservice.py", line 106, in test_model_template_app_rest_submodule
    assert response.json() == {"data": {"ndarray": []}, "meta": {}}
AssertionError: assert {'data': {'na...}, 'meta': {}} == {'data': {'nd...}, 'meta': {}}
  Omitting 1 identical items, use -vv to show
  Differing items:
  {'data': {'names': [], 'ndarray': []}} != {'data': {'ndarray': []}}
  Use -v to get the full diff
---------------------------- Captured stdout setup -----------------------------
127.0.0.1 - - [28/Jul/2020:14:16:36 +0000] "GET /metrics-endpoint HTTP/1.1" 200 0 "-" "python-requests/2.24.0"
---------------------------- Captured stderr setup -----------------------------
INFO:root:starting: seldon-core-microservice mymodule.my_model.MyModel REST --service-type MODEL --persistence 0
[2020-07-28 14:16:36 +0000] [12159] [INFO] Handling signal: term
[2020-07-28 14:16:36 +0000] [12111] [INFO] Handling signal: term
[2020-07-28 14:16:36 +0000] [12167] [INFO] Worker exiting (pid: 12167)
[2020-07-28 14:16:36 +0000] [12159] [INFO] Shutting down: Master
2020-07-28 14:16:37.112324: W tensorflow/stream_executor/platform/default/dso_loader.cc:59] Could not load dynamic library 'libcudart.so.10.1'; dlerror: libcudart.so.10.1: cannot open shared object file: No such file or directory
2020-07-28 14:16:37.112385: I tensorflow/stream_executor/cuda/cudart_stub.cc:29] Ignore above cudart dlerror if you do not have a GPU set up on your machine.
[2020-07-28 14:16:37 +0000] [12160] [INFO] Worker exiting (pid: 12160)
Error in atexit._run_exitfuncs:
Traceback (most recent call last):
  File "/opt/conda/lib/python3.7/multiprocessing/util.py", line 322, in _exit_function
    p.join()
  File "/opt/conda/lib/python3.7/multiprocessing/process.py", line 138, in join
    assert self._parent_pid == os.getpid(), 'can only join a child process'
AssertionError: can only join a child process
DEBUG:root:=== trying again
[2020-07-28 14:16:37 +0000] [12111] [INFO] Shutting down: Master
2020-07-28 14:16:39,258 - seldon_core.microservice:main:207 - INFO:  Starting microservice.py:main
2020-07-28 14:16:39,258 - seldon_core.microservice:main:208 - INFO:  Seldon Core version: 1.2.2
2020-07-28 14:16:39,260 - seldon_core.microservice:main:310 - INFO:  Parse JAEGER_EXTRA_TAGS []
2020-07-28 14:16:39,261 - seldon_core.microservice:main:313 - INFO:  Annotations: {}
2020-07-28 14:16:39,261 - seldon_core.microservice:main:321 - INFO:  Importing submodule ['mymodule.my_model', 'MyModel']
2020-07-28 14:16:39,262 - mymodule.my_model:__init__:15 - INFO:  Initializing model
2020-07-28 14:16:39,780 - seldon_core.microservice:main:388 - INFO:  REST gunicorn microservice running on port 5000
2020-07-28 14:16:39,783 - seldon_core.microservice:main:446 - INFO:  REST metrics microservice running on port 6005
2020-07-28 14:16:39,783 - seldon_core.microservice:main:456 - INFO:  Starting servers
[2020-07-28 14:16:39 +0000] [12170] [INFO] Starting gunicorn 20.0.4
[2020-07-28 14:16:39 +0000] [12170] [INFO] Listening at: http://0.0.0.0:5000 (12170)
[2020-07-28 14:16:39 +0000] [12170] [INFO] Using worker: threads
[2020-07-28 14:16:39 +0000] [12219] [INFO] Booting worker with pid: 12219
[2020-07-28 14:16:40 +0000] [12218] [INFO] Starting gunicorn 20.0.4
[2020-07-28 14:16:40 +0000] [12218] [INFO] Listening at: http://0.0.0.0:6005 (12218)
[2020-07-28 14:16:40 +0000] [12218] [INFO] Using worker: sync
[2020-07-28 14:16:40 +0000] [12222] [INFO] Booting worker with pid: 12222
DEBUG:root:=== trying again
INFO:root:microservice ready
------------------------------ Captured log setup ------------------------------
INFO     root:helpers.py:65 starting: seldon-core-microservice mymodule.my_model.MyModel REST --service-type MODEL --persistence 0
DEBUG    root:helpers.py:80 === trying again
DEBUG    root:helpers.py:80 === trying again
INFO     root:helpers.py:88 microservice ready
----------------------------- Captured stdout call -----------------------------
127.0.0.1 - - [28/Jul/2020:14:16:41 +0000] "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45 "-" "python-requests/2.24.0"
----------------------------- Captured stderr call -----------------------------
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): 127.0.0.1:5000
2020-07-28 14:16:41,320 - mymodule.my_model:predict:26 - INFO:  Predict called - will run idenity function
DEBUG:urllib3.connectionpool:http://127.0.0.1:5000 "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): 127.0.0.1:5000
2020-07-28 14:16:41,331 - mymodule.my_model:send_feedback:40 - INFO:  Send feedback called
DEBUG:urllib3.connectionpool:http://127.0.0.1:5000 "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45
------------------------------ Captured log call -------------------------------
DEBUG    urllib3.connectionpool:connectionpool.py:230 Starting new HTTP connection (1): 127.0.0.1:5000
DEBUG    urllib3.connectionpool:connectionpool.py:442 http://127.0.0.1:5000 "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65
DEBUG    urllib3.connectionpool:connectionpool.py:230 Starting new HTTP connection (1): 127.0.0.1:5000
DEBUG    urllib3.connectionpool:connectionpool.py:442 http://127.0.0.1:5000 "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45
--------------------------- Captured stdout teardown ---------------------------
127.0.0.1 - - [28/Jul/2020:14:16:41 +0000] "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65 "-" "python-requests/2.24.0"
--------------------------- Captured stderr teardown ---------------------------
[2020-07-28 14:16:41 +0000] [12222] [INFO] Worker exiting (pid: 12222)
[2020-07-28 14:16:41 +0000] [12219] [INFO] Worker exiting (pid: 12219)
[2020-07-28 14:16:41 +0000] [12170] [INFO] Handling signal: term
_________________ test_model_template_app_grpc[microservice0] __________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_microservice.py", line 130, in test_model_template_app_grpc
    response = stub.SendFeedback(request=request)
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/grpc/_channel.py", line 826, in __call__
    return _end_unary_response_blocking(state, call, False, None)
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/grpc/_channel.py", line 729, in _end_unary_response_blocking
    raise _InactiveRpcError(state)
grpc._channel._InactiveRpcError: <_InactiveRpcError of RPC that terminated with:
	status = StatusCode.UNKNOWN
	details = "Exception calling application: local variable 'request_proto' referenced before assignment"
	debug_error_string = "{"created":"@1595945806.416864390","description":"Error received from peer ipv4:0.0.0.0:5000","file":"src/core/lib/surface/call.cc","file_line":1055,"grpc_message":"Exception calling application: local variable 'request_proto' referenced before assignment","grpc_status":2}"
>
---------------------------- Captured stderr setup -----------------------------
[2020-07-28 14:16:41 +0000] [12218] [INFO] Handling signal: term
[2020-07-28 14:16:41 +0000] [12218] [INFO] Shutting down: Master
INFO:root:starting: seldon-core-microservice MyModel GRPC --service-type MODEL --persistence 0
Error in atexit._run_exitfuncs:
Traceback (most recent call last):
  File "/opt/conda/lib/python3.7/multiprocessing/util.py", line 322, in _exit_function
    p.join()
  File "/opt/conda/lib/python3.7/multiprocessing/process.py", line 138, in join
    assert self._parent_pid == os.getpid(), 'can only join a child process'
AssertionError: can only join a child process
[2020-07-28 14:16:42 +0000] [12170] [INFO] Shutting down: Master
2020-07-28 14:16:42.293574: W tensorflow/stream_executor/platform/default/dso_loader.cc:59] Could not load dynamic library 'libcudart.so.10.1'; dlerror: libcudart.so.10.1: cannot open shared object file: No such file or directory
2020-07-28 14:16:42.293639: I tensorflow/stream_executor/cuda/cudart_stub.cc:29] Ignore above cudart dlerror if you do not have a GPU set up on your machine.
DEBUG:root:=== trying again
2020-07-28 14:16:44,576 - seldon_core.microservice:main:207 - INFO:  Starting microservice.py:main
2020-07-28 14:16:44,576 - seldon_core.microservice:main:208 - INFO:  Seldon Core version: 1.2.2
2020-07-28 14:16:44,581 - seldon_core.microservice:main:310 - INFO:  Parse JAEGER_EXTRA_TAGS []
2020-07-28 14:16:44,581 - seldon_core.microservice:main:313 - INFO:  Annotations: {}
2020-07-28 14:16:44,581 - seldon_core.microservice:main:317 - INFO:  Importing MyModel
2020-07-28 14:16:44,582 - MyModel:__init__:15 - INFO:  Initializing model
2020-07-28 14:16:44,873 - seldon_core.microservice:main:446 - INFO:  REST metrics microservice running on port 6005
2020-07-28 14:16:44,875 - seldon_core.microservice:main:456 - INFO:  Starting servers
2020-07-28 14:16:44,966 - seldon_core.microservice:grpc_prediction_server:422 - INFO:  GRPC microservice Running on port 5000
[2020-07-28 14:16:45 +0000] [12280] [INFO] Starting gunicorn 20.0.4
[2020-07-28 14:16:45 +0000] [12280] [INFO] Listening at: http://0.0.0.0:6005 (12280)
[2020-07-28 14:16:45 +0000] [12280] [INFO] Using worker: sync
[2020-07-28 14:16:45 +0000] [12287] [INFO] Booting worker with pid: 12287
DEBUG:root:=== trying again
INFO:root:microservice ready
------------------------------ Captured log setup ------------------------------
INFO     root:helpers.py:65 starting: seldon-core-microservice MyModel GRPC --service-type MODEL --persistence 0
DEBUG    root:helpers.py:80 === trying again
DEBUG    root:helpers.py:80 === trying again
INFO     root:helpers.py:88 microservice ready
----------------------------- Captured stderr call -----------------------------
INFO:root:Calling method... try: 1
2020-07-28 14:16:46,411 - MyModel:predict:26 - INFO:  Predict called - will run idenity function
2020-07-28 14:16:46,413 - grpc._server:_call_behavior:445 - ERROR:  Exception calling application: local variable 'request_proto' referenced before assignment
Traceback (most recent call last):
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/grpc/_server.py", line 435, in _call_behavior
    response_or_iterator = behavior(argument, context)
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/seldon_core/wrapper.py", line 203, in SendFeedback
    self.user_model, feedback_grpc, PRED_UNIT_ID, self.seldon_metrics
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/seldon_core/seldon_methods.py", line 160, in send_feedback
    request_proto
UnboundLocalError: local variable 'request_proto' referenced before assignment
------------------------------ Captured log call -------------------------------
INFO     root:test_microservice.py:27 Calling method... try: 1
--------------------------- Captured stderr teardown ---------------------------
[2020-07-28 14:16:46 +0000] [12287] [INFO] Worker exiting (pid: 12287)
____________ test_model_template_app_tracing_config[microservice0] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_microservice.py", line 212, in test_model_template_app_tracing_config
    assert response.json() == {"data": {"ndarray": []}, "meta": {}}
AssertionError: assert {'data': {'na...}, 'meta': {}} == {'data': {'nd...}, 'meta': {}}
  Omitting 1 identical items, use -vv to show
  Differing items:
  {'data': {'names': [], 'ndarray': []}} != {'data': {'ndarray': []}}
  Use -v to get the full diff
---------------------------- Captured stderr setup -----------------------------
INFO:root:starting: seldon-core-microservice MyModel REST --service-type MODEL --persistence 0 --tracing
[2020-07-28 14:16:56 +0000] [12405] [INFO] Handling signal: term
[2020-07-28 14:16:56 +0000] [12416] [INFO] Worker exiting (pid: 12416)
[2020-07-28 14:16:56 +0000] [12405] [INFO] Shutting down: Master
2020-07-28 14:16:57.605138: W tensorflow/stream_executor/platform/default/dso_loader.cc:59] Could not load dynamic library 'libcudart.so.10.1'; dlerror: libcudart.so.10.1: cannot open shared object file: No such file or directory
2020-07-28 14:16:57.605191: I tensorflow/stream_executor/cuda/cudart_stub.cc:29] Ignore above cudart dlerror if you do not have a GPU set up on your machine.
DEBUG:root:=== trying again
2020-07-28 14:16:59,860 - seldon_core.microservice:main:207 - INFO:  Starting microservice.py:main
2020-07-28 14:16:59,860 - seldon_core.microservice:main:208 - INFO:  Seldon Core version: 1.2.2
2020-07-28 14:16:59,863 - seldon_core.microservice:main:310 - INFO:  Parse JAEGER_EXTRA_TAGS []
2020-07-28 14:16:59,863 - seldon_core.microservice:main:313 - INFO:  Annotations: {}
2020-07-28 14:16:59,863 - seldon_core.microservice:main:317 - INFO:  Importing MyModel
2020-07-28 14:16:59,864 - MyModel:__init__:15 - INFO:  Initializing model
2020-07-28 14:16:59,864 - seldon_core.microservice:setup_tracing:145 - INFO:  Initializing tracing
2020-07-28 14:16:59,909 - seldon_core.microservice:setup_tracing:166 - INFO:  Loading tracing config from /workspace/source/python/tests/resources/tracing_config/tracing.yaml
/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/seldon_core/microservice.py:170: YAMLLoadWarning: calling yaml.load() without Loader=... is deprecated, as the default Loader is unsafe. Please read https://msg.pyyaml.org/load for full details.
  config_dict = yaml.load(stream)
2020-07-28 14:16:59,911 - jaeger_tracing:_create_local_agent_channel:446 - INFO:  Initializing Jaeger Tracer with UDP reporter
2020-07-28 14:16:59,915 - jaeger_tracing:new_tracer:384 - INFO:  Using sampler ConstSampler(True)
2020-07-28 14:16:59,918 - jaeger_tracing:_initialize_global_tracer:436 - INFO:  opentracing.tracer initialized to <jaeger_client.tracer.Tracer object at 0x7f1189cb86a0>[app_name=MyModel]
2020-07-28 14:17:00,397 - seldon_core.microservice:main:388 - INFO:  REST gunicorn microservice running on port 5000
2020-07-28 14:17:00,405 - seldon_core.microservice:main:446 - INFO:  REST metrics microservice running on port 6005
2020-07-28 14:17:00,405 - seldon_core.microservice:main:456 - INFO:  Starting servers
[2020-07-28 14:17:00 +0000] [12419] [INFO] Starting gunicorn 20.0.4
[2020-07-28 14:17:00 +0000] [12419] [INFO] Listening at: http://0.0.0.0:5000 (12419)
[2020-07-28 14:17:00 +0000] [12419] [INFO] Using worker: threads
[2020-07-28 14:17:00 +0000] [12469] [INFO] Booting worker with pid: 12469
[2020-07-28 14:17:00 +0000] [12468] [INFO] Starting gunicorn 20.0.4
[2020-07-28 14:17:00 +0000] [12468] [INFO] Listening at: http://0.0.0.0:6005 (12468)
[2020-07-28 14:17:00 +0000] [12468] [INFO] Using worker: sync
[2020-07-28 14:17:00 +0000] [12472] [INFO] Booting worker with pid: 12472
DEBUG:root:=== trying again
INFO:root:microservice ready
------------------------------ Captured log setup ------------------------------
INFO     root:helpers.py:65 starting: seldon-core-microservice MyModel REST --service-type MODEL --persistence 0 --tracing
DEBUG    root:helpers.py:80 === trying again
DEBUG    root:helpers.py:80 === trying again
INFO     root:helpers.py:88 microservice ready
----------------------------- Captured stdout call -----------------------------
127.0.0.1 - - [28/Jul/2020:14:17:01 +0000] "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45 "-" "python-requests/2.24.0"
----------------------------- Captured stderr call -----------------------------
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): 127.0.0.1:5000
2020-07-28 14:17:01,666 - MyModel:predict:26 - INFO:  Predict called - will run idenity function
DEBUG:urllib3.connectionpool:http://127.0.0.1:5000 "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): 127.0.0.1:5000
2020-07-28 14:17:01,677 - MyModel:send_feedback:40 - INFO:  Send feedback called
DEBUG:urllib3.connectionpool:http://127.0.0.1:5000 "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45
------------------------------ Captured log call -------------------------------
DEBUG    urllib3.connectionpool:connectionpool.py:230 Starting new HTTP connection (1): 127.0.0.1:5000
DEBUG    urllib3.connectionpool:connectionpool.py:442 http://127.0.0.1:5000 "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65
DEBUG    urllib3.connectionpool:connectionpool.py:230 Starting new HTTP connection (1): 127.0.0.1:5000
DEBUG    urllib3.connectionpool:connectionpool.py:442 http://127.0.0.1:5000 "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45
--------------------------- Captured stdout teardown ---------------------------
127.0.0.1 - - [28/Jul/2020:14:17:01 +0000] "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65 "-" "python-requests/2.24.0"
--------------------------- Captured stderr teardown ---------------------------
[2020-07-28 14:17:01 +0000] [12472] [INFO] Worker exiting (pid: 12472)
[2020-07-28 14:17:01 +0000] [12419] [INFO] Handling signal: term
[2020-07-28 14:17:01 +0000] [12468] [INFO] Handling signal: term
____________________________ test_model_feedback_ok ____________________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_model_microservice.py", line 441, in test_model_feedback_ok
    assert user_object.rewards[-1] == 1.0
IndexError: list index out of range
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "my-model-name",
  "versions": [
    "model-version"
  ],
  "platform": "model-platform",
  "inputs": [
    {
      "name": "input",
      "datatype": "BYTES",
      "shape": [
        1
      ]
    }
  ],
  "outputs": [
    {
      "name": "output",
      "datatype": "BYTES",
      "shape": [
        1
      ]
    }
  ]
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22ndarray%22:%5B%5D%7D%7D,%22reward%22:1.0%7D' [GET]>
INFO:root:None
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "my-model-name",
  "versions": [
    "model-version"
  ],
  "platform": "model-platform",
  "inputs": [
    {
      "name": "input",
      "datatype": "BYTES",
      "shape": [
        1
      ]
    }
  ],
  "outputs": [
    {
      "name": "output",
      "datatype": "BYTES",
      "shape": [
        1
      ]
    }
  ]
}
DEBUG    seldon_core.wrapper:wrapper.py:73 REST Request: <Request 'http://localhost/send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22ndarray%22:%5B%5D%7D%7D,%22reward%22:1.0%7D' [GET]>
INFO     root:test_model_microservice.py:439 None
_______________________ test_unimplemented_feedback_raw ________________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_model_microservice.py", line 992, in test_unimplemented_feedback_raw
    j = json.loads(rv.data)
  File "/opt/conda/lib/python3.7/json/__init__.py", line 348, in loads
    return _default_decoder.decode(s)
  File "/opt/conda/lib/python3.7/json/decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "/opt/conda/lib/python3.7/json/decoder.py", line 355, in raw_decode
    raise JSONDecodeError("Expecting value", s, err.value) from None
json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22ndarray%22:%5B%5D%7D%7D,%22reward%22:1.0%7D' [GET]>
ERROR:seldon_core.wrapper:Exception on /send-feedback [GET]
Traceback (most recent call last):
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask/app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask_cors/extension.py", line 161, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask/app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/workspace/source/python/seldon_core/wrapper.py", line 75, in SendFeedback
    user_model, requestJson, PRED_UNIT_ID, seldon_metrics
  File "/workspace/source/python/seldon_core/seldon_methods.py", line 183, in send_feedback
    raise Exception("TODO: Not implemented")
Exception: TODO: Not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:73 REST Request: <Request 'http://localhost/send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22ndarray%22:%5B%5D%7D%7D,%22reward%22:1.0%7D' [GET]>
ERROR    seldon_core.wrapper:app.py:1892 Exception on /send-feedback [GET]
Traceback (most recent call last):
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask/app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask_cors/extension.py", line 161, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask/app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/workspace/source/python/seldon_core/wrapper.py", line 75, in SendFeedback
    user_model, requestJson, PRED_UNIT_ID, seldon_metrics
  File "/workspace/source/python/seldon_core/seldon_methods.py", line 183, in send_feedback
    raise Exception("TODO: Not implemented")
Exception: TODO: Not implemented
___________________________ test_router_feedback_ok ____________________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_router_microservice.py", line 227, in test_router_feedback_ok
    assert rv.status_code == 200
AssertionError: assert 400 == 200
 +  where 400 = <Response 146 bytes [400 BAD REQUEST]>.status_code
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22ndarray%22:%5B%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%221%22:1%7D%7D%7D,%22reward%22:1.0%7D' [GET]>
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
INFO:root:Feedback called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
ERROR:seldon_core.wrapper:{'status': {'status': 1, 'info': 'Unknown data type returned as payload (must be list or np array):None', 'code': -1, 'reason': 'MICROSERVICE_BAD_DATA'}}
INFO:root:{'status': {'code': -1, 'info': 'Unknown data type returned as payload (must be list or np array):None', 'reason': 'MICROSERVICE_BAD_DATA', 'status': 1}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:73 REST Request: <Request 'http://localhost/send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22ndarray%22:%5B%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%221%22:1%7D%7D%7D,%22reward%22:1.0%7D' [GET]>
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
INFO     root:test_router_microservice.py:30 Feedback called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
ERROR    seldon_core.wrapper:wrapper.py:44 {'status': {'status': 1, 'info': 'Unknown data type returned as payload (must be list or np array):None', 'code': -1, 'reason': 'MICROSERVICE_BAD_DATA'}}
INFO     root:test_router_microservice.py:226 {'status': {'code': -1, 'info': 'Unknown data type returned as payload (must be list or np array):None', 'reason': 'MICROSERVICE_BAD_DATA', 'status': 1}}
_____________________________ test_proto_feedback ______________________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_router_microservice.py", line 315, in test_proto_feedback
    resp = app.SendFeedback(feedback, None)
  File "/workspace/source/python/seldon_core/wrapper.py", line 203, in SendFeedback
    self.user_model, feedback_grpc, PRED_UNIT_ID, self.seldon_metrics
  File "/workspace/source/python/seldon_core/seldon_methods.py", line 160, in send_feedback
    request_proto
UnboundLocalError: local variable 'request_proto' referenced before assignment
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}

----------- coverage: platform linux, python 3.7.1-final-0 -----------
Name                                                                                                  Stmts   Miss  Cover
-------------------------------------------------------------------------------------------------------------------------
.tox/tensorflow/lib/python3.7/site-packages/seldon_core/__init__.py                                       2      0   100%
.tox/tensorflow/lib/python3.7/site-packages/seldon_core/api_tester.py                                    81     81     0%
.tox/tensorflow/lib/python3.7/site-packages/seldon_core/app.py                                           36      3    92%
.tox/tensorflow/lib/python3.7/site-packages/seldon_core/batch_processor.py                               94     94     0%
.tox/tensorflow/lib/python3.7/site-packages/seldon_core/flask_utils.py                                   44     24    45%
.tox/tensorflow/lib/python3.7/site-packages/seldon_core/imports_helper.py                                27      6    78%
.tox/tensorflow/lib/python3.7/site-packages/seldon_core/metadata.py                                      32      3    91%
.tox/tensorflow/lib/python3.7/site-packages/seldon_core/metrics.py                                      130     76    42%
.tox/tensorflow/lib/python3.7/site-packages/seldon_core/microservice.py                                 201     65    68%
.tox/tensorflow/lib/python3.7/site-packages/seldon_core/microservice_tester.py                          140    140     0%
.tox/tensorflow/lib/python3.7/site-packages/seldon_core/persistence.py                                   45     23    49%
.tox/tensorflow/lib/python3.7/site-packages/seldon_core/proto/__init__.py                                 0      0   100%
.tox/tensorflow/lib/python3.7/site-packages/seldon_core/proto/prediction_pb2.py                         160      0   100%
.tox/tensorflow/lib/python3.7/site-packages/seldon_core/proto/prediction_pb2_grpc.py                    137     89    35%
.tox/tensorflow/lib/python3.7/site-packages/seldon_core/proto/tensorflow/core/framework/__init__.py       3      0   100%
.tox/tensorflow/lib/python3.7/site-packages/seldon_core/seldon_client.py                                599    599     0%
.tox/tensorflow/lib/python3.7/site-packages/seldon_core/seldon_methods.py                               244    190    22%
.tox/tensorflow/lib/python3.7/site-packages/seldon_core/serving_test_gen.py                              40     40     0%
.tox/tensorflow/lib/python3.7/site-packages/seldon_core/storage.py                                      155    127    18%
.tox/tensorflow/lib/python3.7/site-packages/seldon_core/user_model.py                                   162     92    43%
.tox/tensorflow/lib/python3.7/site-packages/seldon_core/utils.py                                        282    175    38%
.tox/tensorflow/lib/python3.7/site-packages/seldon_core/version.py                                        1      0   100%
.tox/tensorflow/lib/python3.7/site-packages/seldon_core/wrapper.py                                      145     75    48%
seldon_core/__init__.py                                                                                   2      0   100%
seldon_core/api_tester.py                                                                                81     38    53%
seldon_core/app.py                                                                                       36     22    39%
seldon_core/batch_processor.py                                                                           94     94     0%
seldon_core/flask_utils.py                                                                               44      3    93%
seldon_core/imports_helper.py                                                                            27      6    78%
seldon_core/metadata.py                                                                                  32      0   100%
seldon_core/metrics.py                                                                                  130      5    96%
seldon_core/microservice.py                                                                             201    120    40%
seldon_core/microservice_tester.py                                                                      140     43    69%
seldon_core/persistence.py                                                                               45     23    49%
seldon_core/proto/__init__.py                                                                             0      0   100%
seldon_core/proto/prediction_pb2.py                                                                     160      0   100%
seldon_core/proto/prediction_pb2_grpc.py                                                                137     65    53%
seldon_core/proto/tensorflow/core/framework/__init__.py                                                   3      0   100%
seldon_core/seldon_client.py                                                                            599    284    53%
seldon_core/seldon_methods.py                                                                           244     10    96%
seldon_core/serving_test_gen.py                                                                          40     40     0%
seldon_core/storage.py                                                                                  155     93    40%
seldon_core/user_model.py                                                                               162     30    81%
seldon_core/utils.py                                                                                    282     31    89%
seldon_core/version.py                                                                                    1      0   100%
seldon_core/wrapper.py                                                                                  145     11    92%
-------------------------------------------------------------------------------------------------------------------------
TOTAL                                                                                                  5520   2820    49%

=========================== short test summary info ============================
FAILED tests/test_metrics.py::test_seldon_metrics_predict[True-UserObject] - ...
FAILED tests/test_metrics.py::test_seldon_metrics_predict[True-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_predict[False-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_predict[False-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_send_feedback[UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_send_feedback[UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_aggregate[True-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_aggregate[True-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_aggregate[False-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_aggregate[False-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_input[True-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_input[True-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_input[False-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_input[False-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_output[True-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_output[True-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_output[False-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_output[False-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_route[True-UserObject] - Ke...
FAILED tests/test_metrics.py::test_seldon_metrics_route[True-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_route[False-UserObject] - K...
FAILED tests/test_metrics.py::test_seldon_metrics_route[False-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_predict[True-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_predict[True-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_predict[False-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_predict[False-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_aggregate[True-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_aggregate[True-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_aggregate[False-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_aggregate[False-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_input[True-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_input[True-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_input[False-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_input[False-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_output[True-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_output[True-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_output[False-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_output[False-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_route[True-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_route[True-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_route[False-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_route[False-UserObjectLowLevelGrpc]
FAILED tests/test_microservice.py::test_model_template_app_rest - AssertionEr...
FAILED tests/test_microservice.py::test_model_template_app_rest_submodule[microservice0]
FAILED tests/test_microservice.py::test_model_template_app_grpc[microservice0]
FAILED tests/test_microservice.py::test_model_template_app_tracing_config[microservice0]
FAILED tests/test_model_microservice.py::test_model_feedback_ok - IndexError:...
FAILED tests/test_model_microservice.py::test_unimplemented_feedback_raw - js...
FAILED tests/test_router_microservice.py::test_router_feedback_ok - assert 40...
FAILED tests/test_router_microservice.py::test_proto_feedback - UnboundLocalE...
============ 50 failed, 312 passed, 9 skipped in 161.77s (0:02:41) =============
ERROR: InvocationError for command /workspace/source/python/.tox/tensorflow/bin/pytest (exited with code 1)
gcs create: /workspace/source/python/.tox/gcs
gcs installdeps: tenacity, pytest, pytest-cov, Pillow
gcs inst: /workspace/source/python/.tox/.tmp/package/1/seldon-core-1.2.2.zip
gcs installed: attrs==19.3.0,cachetools==4.1.1,certifi==2020.6.20,cffi==1.14.1,chardet==3.0.4,click==7.1.2,configparser==5.0.0,coverage==5.2.1,Flask==1.1.2,Flask-Cors==3.0.8,Flask-OpenTracing==1.1.0,flatbuffers==1.12,google-api-core==1.22.0,google-auth==1.19.2,google-cloud-core==1.3.0,google-cloud-storage==1.30.0,google-crc32c==0.1.0,google-resumable-media==0.7.0,googleapis-common-protos==1.52.0,grpcio==1.30.0,grpcio-opentracing==1.1.4,gunicorn==20.0.4,idna==2.10,importlib-metadata==1.7.0,itsdangerous==1.1.0,jaeger-client==4.3.0,Jinja2==2.11.2,jsonschema==3.2.0,MarkupSafe==1.1.1,minio==5.0.10,more-itertools==8.4.0,numpy==1.19.1,opentracing==2.3.0,packaging==20.4,Pillow==7.2.0,pluggy==0.13.1,prometheus-client==0.8.0,protobuf==3.12.2,py==1.9.0,pyasn1==0.4.8,pyasn1-modules==0.2.8,pycparser==2.20,pyparsing==2.4.7,pyrsistent==0.16.0,pytest==5.4.3,pytest-cov==2.10.0,python-dateutil==2.8.1,pytz==2020.1,PyYAML==5.3.1,redis==3.5.3,requests==2.24.0,rsa==4.6,seldon-core @ file:///workspace/source/python/.tox/.tmp/package/1/seldon-core-1.2.2.zip,six==1.15.0,tenacity==6.2.0,threadloop==1.0.2,thrift==0.13.0,tornado==6.0.4,urllib3==1.25.10,wcwidth==0.2.5,Werkzeug==1.0.1,zipp==3.1.0
gcs run-test-pre: PYTHONHASHSEED='417737162'
gcs run-test: commands[0] | pytest
============================= test session starts ==============================
platform linux -- Python 3.7.1, pytest-5.4.3, py-1.9.0, pluggy-0.13.1
cachedir: .tox/gcs/.pytest_cache
rootdir: /workspace/source/python, inifile: setup.cfg
plugins: cov-2.10.0
collected 371 items

tests/test_api_tester.py ..                                              [  0%]
tests/test_application_exception_microservice.py ..                      [  1%]
tests/test_azure_storage.py ssssss                                       [  2%]
tests/test_combiner_microservice.py .....................                [  8%]
tests/test_metadata.py ................................................. [ 21%]
...                                                                      [ 22%]
tests/test_metrics.py ...................FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF [ 35%]
FFFFFFFFFFF........                                                      [ 40%]
tests/test_microservice.py .F...FF..F...                                 [ 44%]
tests/test_microservice_tester.py .....                                  [ 45%]
tests/test_model_microservice.py ..........F....s......................s [ 56%]
.......F                                                                 [ 58%]
tests/test_router_microservice.py ........F....F...                      [ 63%]
tests/test_s3_storage.py ...                                             [ 63%]
tests/test_seldon_client.py ..................................           [ 73%]
tests/test_storage.py ....s...                                           [ 75%]
tests/test_transformer_microservice.py ................................. [ 84%]
........                                                                 [ 86%]
tests/test_user_model.py ....                                            [ 87%]
tests/test_utils.py ..............................sss..............      [100%]

=================================== FAILURES ===================================
_________________ test_seldon_metrics_predict[True-UserObject] _________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 345, in test_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Predict called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:57 REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:159 Predict called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:65 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
_____________ test_seldon_metrics_predict[True-UserObjectLowLevel] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 345, in test_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Predict raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:57 REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:207 Predict raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:65 REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
________________ test_seldon_metrics_predict[False-UserObject] _________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 345, in test_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Predict called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:57 REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:159 Predict called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:65 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
____________ test_seldon_metrics_predict[False-UserObjectLowLevel] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 345, in test_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Predict raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:57 REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:207 Predict raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:65 REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
________________ test_seldon_metrics_send_feedback[UserObject] _________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 364, in test_seldon_metrics_send_feedback
    assert rv.status_code == 200
AssertionError: assert 500 == 200
 +  where 500 = <Response streamed [500 INTERNAL SERVER ERROR]>.status_code
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/send-feedback?json=%7B%22reward%22:%2042%7D' [GET]>
ERROR:seldon_core.wrapper:Exception on /send-feedback [GET]
Traceback (most recent call last):
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask/app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask_cors/extension.py", line 161, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask/app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/workspace/source/python/seldon_core/wrapper.py", line 75, in SendFeedback
    user_model, requestJson, PRED_UNIT_ID, seldon_metrics
  File "/workspace/source/python/seldon_core/seldon_methods.py", line 183, in send_feedback
    raise Exception("TODO: Not implemented")
Exception: TODO: Not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:73 REST Request: <Request 'http://localhost/send-feedback?json=%7B%22reward%22:%2042%7D' [GET]>
ERROR    seldon_core.wrapper:app.py:1892 Exception on /send-feedback [GET]
Traceback (most recent call last):
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask/app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask_cors/extension.py", line 161, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask/app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/workspace/source/python/seldon_core/wrapper.py", line 75, in SendFeedback
    user_model, requestJson, PRED_UNIT_ID, seldon_metrics
  File "/workspace/source/python/seldon_core/seldon_methods.py", line 183, in send_feedback
    raise Exception("TODO: Not implemented")
Exception: TODO: Not implemented
____________ test_seldon_metrics_send_feedback[UserObjectLowLevel] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 364, in test_seldon_metrics_send_feedback
    assert rv.status_code == 200
AssertionError: assert 500 == 200
 +  where 500 = <Response streamed [500 INTERNAL SERVER ERROR]>.status_code
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/send-feedback?json=%7B%22reward%22:%2042%7D' [GET]>
ERROR:seldon_core.wrapper:Exception on /send-feedback [GET]
Traceback (most recent call last):
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask/app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask_cors/extension.py", line 161, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask/app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/workspace/source/python/seldon_core/wrapper.py", line 75, in SendFeedback
    user_model, requestJson, PRED_UNIT_ID, seldon_metrics
  File "/workspace/source/python/seldon_core/seldon_methods.py", line 183, in send_feedback
    raise Exception("TODO: Not implemented")
Exception: TODO: Not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:73 REST Request: <Request 'http://localhost/send-feedback?json=%7B%22reward%22:%2042%7D' [GET]>
ERROR    seldon_core.wrapper:app.py:1892 Exception on /send-feedback [GET]
Traceback (most recent call last):
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask/app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask_cors/extension.py", line 161, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask/app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/workspace/source/python/seldon_core/wrapper.py", line 75, in SendFeedback
    user_model, requestJson, PRED_UNIT_ID, seldon_metrics
  File "/workspace/source/python/seldon_core/seldon_methods.py", line 183, in send_feedback
    raise Exception("TODO: Not implemented")
Exception: TODO: Not implemented
________________ test_seldon_metrics_aggregate[True-UserObject] ________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 399, in test_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO:root:Aggregate called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:112 REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO     root:test_metrics.py:163 Aggregate called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:116 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
____________ test_seldon_metrics_aggregate[True-UserObjectLowLevel] ____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 399, in test_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO:root:Aggregate raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:112 REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO     root:test_metrics.py:214 Aggregate raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:116 REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
_______________ test_seldon_metrics_aggregate[False-UserObject] ________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 399, in test_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO:root:Aggregate called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:112 REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO     root:test_metrics.py:163 Aggregate called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:116 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
___________ test_seldon_metrics_aggregate[False-UserObjectLowLevel] ____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 399, in test_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO:root:Aggregate raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:112 REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO     root:test_metrics.py:214 Aggregate raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:116 REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
_____________ test_seldon_metrics_transform_input[True-UserObject] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 426, in test_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform input called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:82 REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:167 Transform input called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:86 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
_________ test_seldon_metrics_transform_input[True-UserObjectLowLevel] _________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 426, in test_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform input raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:82 REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:221 Transform input raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:86 REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
____________ test_seldon_metrics_transform_input[False-UserObject] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 426, in test_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform input called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:82 REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:167 Transform input called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:86 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
________ test_seldon_metrics_transform_input[False-UserObjectLowLevel] _________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 426, in test_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform input raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:82 REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:221 Transform input raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:86 REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
____________ test_seldon_metrics_transform_output[True-UserObject] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 453, in test_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform output called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:92 REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:171 Transform output called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:96 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
________ test_seldon_metrics_transform_output[True-UserObjectLowLevel] _________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 453, in test_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform output raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:92 REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:228 Transform output raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:96 REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
____________ test_seldon_metrics_transform_output[False-UserObject] ____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 453, in test_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform output called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:92 REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:171 Transform output called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:96 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
________ test_seldon_metrics_transform_output[False-UserObjectLowLevel] ________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 453, in test_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform output raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:92 REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:228 Transform output raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:96 REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
__________________ test_seldon_metrics_route[True-UserObject] __________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 478, in test_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Route called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:class_names is not implemented
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': [[22]], 'names': ['t:0']}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:102 REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:175 Route called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:106 REST Response: {'data': {'ndarray': [[22]], 'names': ['t:0']}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
______________ test_seldon_metrics_route[True-UserObjectLowLevel] ______________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 478, in test_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Route raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': [22]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:102 REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:235 Route raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:106 REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': [22]}}
_________________ test_seldon_metrics_route[False-UserObject] __________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 478, in test_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Route called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:class_names is not implemented
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': [[22]], 'names': ['t:0']}, 'meta': {}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:102 REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:175 Route called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:106 REST Response: {'data': {'ndarray': [[22]], 'names': ['t:0']}, 'meta': {}}
_____________ test_seldon_metrics_route[False-UserObjectLowLevel] ______________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 478, in test_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Route raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': [22]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:102 REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:235 Route raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:106 REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': [22]}}
______________ test_proto_seldon_metrics_predict[True-UserObject] ______________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 506, in test_proto_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Predict called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:159 Predict called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
________ test_proto_seldon_metrics_predict[True-UserObjectLowLevelGrpc] ________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 506, in test_proto_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Predict raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:256 Predict raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
_____________ test_proto_seldon_metrics_predict[False-UserObject] ______________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 506, in test_proto_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Predict called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:159 Predict called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
_______ test_proto_seldon_metrics_predict[False-UserObjectLowLevelGrpc] ________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 506, in test_proto_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Predict raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:256 Predict raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
_____________ test_proto_seldon_metrics_aggregate[True-UserObject] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 540, in test_proto_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Aggregate called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:163 Aggregate called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
_______ test_proto_seldon_metrics_aggregate[True-UserObjectLowLevelGrpc] _______
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 540, in test_proto_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Aggregate raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:269 Aggregate raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
____________ test_proto_seldon_metrics_aggregate[False-UserObject] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 540, in test_proto_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Aggregate called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:163 Aggregate called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
______ test_proto_seldon_metrics_aggregate[False-UserObjectLowLevelGrpc] _______
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 540, in test_proto_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Aggregate raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:269 Aggregate raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
__________ test_proto_seldon_metrics_transform_input[True-UserObject] __________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 567, in test_proto_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform input called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:167 Transform input called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
____ test_proto_seldon_metrics_transform_input[True-UserObjectLowLevelGrpc] ____
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 567, in test_proto_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform input raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:282 Transform input raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
_________ test_proto_seldon_metrics_transform_input[False-UserObject] __________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 567, in test_proto_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform input called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:167 Transform input called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
___ test_proto_seldon_metrics_transform_input[False-UserObjectLowLevelGrpc] ____
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 567, in test_proto_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform input raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:282 Transform input raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
_________ test_proto_seldon_metrics_transform_output[True-UserObject] __________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 594, in test_proto_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform output called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:171 Transform output called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
___ test_proto_seldon_metrics_transform_output[True-UserObjectLowLevelGrpc] ____
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 594, in test_proto_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform output raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:295 Transform output raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
_________ test_proto_seldon_metrics_transform_output[False-UserObject] _________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 594, in test_proto_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform output called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:171 Transform output called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
___ test_proto_seldon_metrics_transform_output[False-UserObjectLowLevelGrpc] ___
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 594, in test_proto_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform output raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:295 Transform output raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
_______________ test_proto_seldon_metrics_route[True-UserObject] _______________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 621, in test_proto_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Route called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:175 Route called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
_________ test_proto_seldon_metrics_route[True-UserObjectLowLevelGrpc] _________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 621, in test_proto_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Route raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:308 Route raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
______________ test_proto_seldon_metrics_route[False-UserObject] _______________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 621, in test_proto_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Route called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:175 Route called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
________ test_proto_seldon_metrics_route[False-UserObjectLowLevelGrpc] _________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 621, in test_proto_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Route raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:308 Route raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
_________________________ test_model_template_app_rest _________________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_microservice.py", line 56, in test_model_template_app_rest
    assert response.json() == {"data": {"ndarray": []}, "meta": {}}
AssertionError: assert {'data': {'na...}, 'meta': {}} == {'data': {'nd...}, 'meta': {}}
  Omitting 1 identical items, use -vv to show
  Differing items:
  {'data': {'names': [], 'ndarray': []}} != {'data': {'ndarray': []}}
  Use -v to get the full diff
---------------------------- Captured stderr setup -----------------------------
INFO:root:starting: seldon-core-microservice MyModel REST --service-type MODEL --persistence 0
DEBUG:root:=== trying again
2020-07-28 14:19:01,445 - seldon_core.microservice:main:207 - INFO:  Starting microservice.py:main
2020-07-28 14:19:01,445 - seldon_core.microservice:main:208 - INFO:  Seldon Core version: 1.2.2
2020-07-28 14:19:01,448 - seldon_core.microservice:main:310 - INFO:  Parse JAEGER_EXTRA_TAGS []
2020-07-28 14:19:01,448 - seldon_core.microservice:main:313 - INFO:  Annotations: {}
2020-07-28 14:19:01,448 - seldon_core.microservice:main:317 - INFO:  Importing MyModel
2020-07-28 14:19:01,449 - MyModel:__init__:15 - INFO:  Initializing model
2020-07-28 14:19:01,577 - seldon_core.microservice:main:388 - INFO:  REST gunicorn microservice running on port 5000
2020-07-28 14:19:01,578 - seldon_core.microservice:main:446 - INFO:  REST metrics microservice running on port 6005
2020-07-28 14:19:01,578 - seldon_core.microservice:main:456 - INFO:  Starting servers
[2020-07-28 14:19:01 +0000] [19652] [INFO] Starting gunicorn 20.0.4
[2020-07-28 14:19:01 +0000] [19652] [INFO] Listening at: http://0.0.0.0:5000 (19652)
[2020-07-28 14:19:01 +0000] [19652] [INFO] Using worker: threads
[2020-07-28 14:19:01 +0000] [19686] [INFO] Booting worker with pid: 19686
[2020-07-28 14:19:01 +0000] [19685] [INFO] Starting gunicorn 20.0.4
[2020-07-28 14:19:01 +0000] [19685] [INFO] Listening at: http://0.0.0.0:6005 (19685)
[2020-07-28 14:19:01 +0000] [19685] [INFO] Using worker: sync
[2020-07-28 14:19:01 +0000] [19693] [INFO] Booting worker with pid: 19693
DEBUG:root:=== trying again
INFO:root:microservice ready
------------------------------ Captured log setup ------------------------------
INFO     root:helpers.py:65 starting: seldon-core-microservice MyModel REST --service-type MODEL --persistence 0
DEBUG    root:helpers.py:80 === trying again
DEBUG    root:helpers.py:80 === trying again
INFO     root:helpers.py:88 microservice ready
----------------------------- Captured stdout call -----------------------------
127.0.0.1 - - [28/Jul/2020:14:19:05 +0000] "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65 "-" "python-requests/2.24.0"
127.0.0.1 - - [28/Jul/2020:14:19:05 +0000] "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45 "-" "python-requests/2.24.0"
----------------------------- Captured stderr call -----------------------------
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): 127.0.0.1:5000
2020-07-28 14:19:05,223 - MyModel:predict:26 - INFO:  Predict called - will run idenity function
DEBUG:urllib3.connectionpool:http://127.0.0.1:5000 "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): 127.0.0.1:5000
2020-07-28 14:19:05,235 - MyModel:send_feedback:40 - INFO:  Send feedback called
DEBUG:urllib3.connectionpool:http://127.0.0.1:5000 "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45
------------------------------ Captured log call -------------------------------
DEBUG    urllib3.connectionpool:connectionpool.py:230 Starting new HTTP connection (1): 127.0.0.1:5000
DEBUG    urllib3.connectionpool:connectionpool.py:442 http://127.0.0.1:5000 "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65
DEBUG    urllib3.connectionpool:connectionpool.py:230 Starting new HTTP connection (1): 127.0.0.1:5000
DEBUG    urllib3.connectionpool:connectionpool.py:442 http://127.0.0.1:5000 "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45
--------------------------- Captured stderr teardown ---------------------------
[2020-07-28 14:19:05 +0000] [19652] [INFO] Handling signal: term
____________ test_model_template_app_rest_submodule[microservice0] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_microservice.py", line 106, in test_model_template_app_rest_submodule
    assert response.json() == {"data": {"ndarray": []}, "meta": {}}
AssertionError: assert {'data': {'na...}, 'meta': {}} == {'data': {'nd...}, 'meta': {}}
  Omitting 1 identical items, use -vv to show
  Differing items:
  {'data': {'names': [], 'ndarray': []}} != {'data': {'ndarray': []}}
  Use -v to get the full diff
---------------------------- Captured stdout setup -----------------------------
127.0.0.1 - - [28/Jul/2020:14:19:20 +0000] "GET /metrics-endpoint HTTP/1.1" 200 0 "-" "python-requests/2.24.0"
---------------------------- Captured stderr setup -----------------------------
INFO:root:starting: seldon-core-microservice mymodule.my_model.MyModel REST --service-type MODEL --persistence 0
[2020-07-28 14:19:20 +0000] [19822] [INFO] Handling signal: term
[2020-07-28 14:19:20 +0000] [19789] [INFO] Handling signal: term
[2020-07-28 14:19:20 +0000] [19830] [INFO] Worker exiting (pid: 19830)
[2020-07-28 14:19:20 +0000] [19822] [INFO] Shutting down: Master
[2020-07-28 14:19:21 +0000] [19823] [INFO] Worker exiting (pid: 19823)
Error in atexit._run_exitfuncs:
Traceback (most recent call last):
  File "/opt/conda/lib/python3.7/multiprocessing/util.py", line 322, in _exit_function
    p.join()
  File "/opt/conda/lib/python3.7/multiprocessing/process.py", line 138, in join
    assert self._parent_pid == os.getpid(), 'can only join a child process'
AssertionError: can only join a child process
DEBUG:root:=== trying again
2020-07-28 14:19:21,598 - seldon_core.microservice:main:207 - INFO:  Starting microservice.py:main
2020-07-28 14:19:21,598 - seldon_core.microservice:main:208 - INFO:  Seldon Core version: 1.2.2
2020-07-28 14:19:21,601 - seldon_core.microservice:main:310 - INFO:  Parse JAEGER_EXTRA_TAGS []
2020-07-28 14:19:21,601 - seldon_core.microservice:main:313 - INFO:  Annotations: {}
2020-07-28 14:19:21,601 - seldon_core.microservice:main:321 - INFO:  Importing submodule ['mymodule.my_model', 'MyModel']
2020-07-28 14:19:21,602 - mymodule.my_model:__init__:15 - INFO:  Initializing model
[2020-07-28 14:19:21 +0000] [19789] [INFO] Shutting down: Master
2020-07-28 14:19:21,719 - seldon_core.microservice:main:388 - INFO:  REST gunicorn microservice running on port 5000
2020-07-28 14:19:21,721 - seldon_core.microservice:main:446 - INFO:  REST metrics microservice running on port 6005
2020-07-28 14:19:21,721 - seldon_core.microservice:main:456 - INFO:  Starting servers
[2020-07-28 14:19:21 +0000] [19833] [INFO] Starting gunicorn 20.0.4
[2020-07-28 14:19:21 +0000] [19833] [INFO] Listening at: http://0.0.0.0:5000 (19833)
[2020-07-28 14:19:21 +0000] [19833] [INFO] Using worker: threads
[2020-07-28 14:19:21 +0000] [19867] [INFO] Booting worker with pid: 19867
[2020-07-28 14:19:21 +0000] [19866] [INFO] Starting gunicorn 20.0.4
[2020-07-28 14:19:21 +0000] [19866] [INFO] Listening at: http://0.0.0.0:6005 (19866)
[2020-07-28 14:19:21 +0000] [19866] [INFO] Using worker: sync
[2020-07-28 14:19:21 +0000] [19874] [INFO] Booting worker with pid: 19874
DEBUG:root:=== trying again
INFO:root:microservice ready
------------------------------ Captured log setup ------------------------------
INFO     root:helpers.py:65 starting: seldon-core-microservice mymodule.my_model.MyModel REST --service-type MODEL --persistence 0
DEBUG    root:helpers.py:80 === trying again
DEBUG    root:helpers.py:80 === trying again
INFO     root:helpers.py:88 microservice ready
----------------------------- Captured stdout call -----------------------------
127.0.0.1 - - [28/Jul/2020:14:19:25 +0000] "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65 "-" "python-requests/2.24.0"
127.0.0.1 - - [28/Jul/2020:14:19:25 +0000] "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45 "-" "python-requests/2.24.0"
----------------------------- Captured stderr call -----------------------------
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): 127.0.0.1:5000
2020-07-28 14:19:25,420 - mymodule.my_model:predict:26 - INFO:  Predict called - will run idenity function
DEBUG:urllib3.connectionpool:http://127.0.0.1:5000 "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): 127.0.0.1:5000
2020-07-28 14:19:25,447 - mymodule.my_model:send_feedback:40 - INFO:  Send feedback called
DEBUG:urllib3.connectionpool:http://127.0.0.1:5000 "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45
------------------------------ Captured log call -------------------------------
DEBUG    urllib3.connectionpool:connectionpool.py:230 Starting new HTTP connection (1): 127.0.0.1:5000
DEBUG    urllib3.connectionpool:connectionpool.py:442 http://127.0.0.1:5000 "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65
DEBUG    urllib3.connectionpool:connectionpool.py:230 Starting new HTTP connection (1): 127.0.0.1:5000
DEBUG    urllib3.connectionpool:connectionpool.py:442 http://127.0.0.1:5000 "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45
--------------------------- Captured stderr teardown ---------------------------
[2020-07-28 14:19:25 +0000] [19874] [INFO] Worker exiting (pid: 19874)
[2020-07-28 14:19:25 +0000] [19833] [INFO] Handling signal: term
_________________ test_model_template_app_grpc[microservice0] __________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_microservice.py", line 130, in test_model_template_app_grpc
    response = stub.SendFeedback(request=request)
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/grpc/_channel.py", line 826, in __call__
    return _end_unary_response_blocking(state, call, False, None)
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/grpc/_channel.py", line 729, in _end_unary_response_blocking
    raise _InactiveRpcError(state)
grpc._channel._InactiveRpcError: <_InactiveRpcError of RPC that terminated with:
	status = StatusCode.UNKNOWN
	details = "Exception calling application: local variable 'request_proto' referenced before assignment"
	debug_error_string = "{"created":"@1595945970.536326950","description":"Error received from peer ipv4:0.0.0.0:5000","file":"src/core/lib/surface/call.cc","file_line":1055,"grpc_message":"Exception calling application: local variable 'request_proto' referenced before assignment","grpc_status":2}"
>
---------------------------- Captured stderr setup -----------------------------
[2020-07-28 14:19:25 +0000] [19866] [INFO] Handling signal: term
[2020-07-28 14:19:25 +0000] [19866] [INFO] Shutting down: Master
INFO:root:starting: seldon-core-microservice MyModel GRPC --service-type MODEL --persistence 0
[2020-07-28 14:19:26 +0000] [19867] [INFO] Worker exiting (pid: 19867)
Error in atexit._run_exitfuncs:
Traceback (most recent call last):
  File "/opt/conda/lib/python3.7/multiprocessing/util.py", line 322, in _exit_function
    p.join()
  File "/opt/conda/lib/python3.7/multiprocessing/process.py", line 138, in join
    assert self._parent_pid == os.getpid(), 'can only join a child process'
AssertionError: can only join a child process
DEBUG:root:=== trying again
2020-07-28 14:19:26,669 - seldon_core.microservice:main:207 - INFO:  Starting microservice.py:main
2020-07-28 14:19:26,669 - seldon_core.microservice:main:208 - INFO:  Seldon Core version: 1.2.2
2020-07-28 14:19:26,672 - seldon_core.microservice:main:310 - INFO:  Parse JAEGER_EXTRA_TAGS []
2020-07-28 14:19:26,673 - seldon_core.microservice:main:313 - INFO:  Annotations: {}
2020-07-28 14:19:26,673 - seldon_core.microservice:main:317 - INFO:  Importing MyModel
2020-07-28 14:19:26,674 - MyModel:__init__:15 - INFO:  Initializing model
[2020-07-28 14:19:26 +0000] [19833] [INFO] Shutting down: Master
2020-07-28 14:19:26,808 - seldon_core.microservice:main:446 - INFO:  REST metrics microservice running on port 6005
2020-07-28 14:19:26,810 - seldon_core.microservice:main:456 - INFO:  Starting servers
2020-07-28 14:19:26,863 - seldon_core.microservice:grpc_prediction_server:422 - INFO:  GRPC microservice Running on port 5000
[2020-07-28 14:19:27 +0000] [19913] [INFO] Starting gunicorn 20.0.4
[2020-07-28 14:19:27 +0000] [19913] [INFO] Listening at: http://0.0.0.0:6005 (19913)
[2020-07-28 14:19:27 +0000] [19913] [INFO] Using worker: sync
[2020-07-28 14:19:27 +0000] [19924] [INFO] Booting worker with pid: 19924
DEBUG:root:=== trying again
INFO:root:microservice ready
------------------------------ Captured log setup ------------------------------
INFO     root:helpers.py:65 starting: seldon-core-microservice MyModel GRPC --service-type MODEL --persistence 0
DEBUG    root:helpers.py:80 === trying again
DEBUG    root:helpers.py:80 === trying again
INFO     root:helpers.py:88 microservice ready
----------------------------- Captured stderr call -----------------------------
INFO:root:Calling method... try: 1
2020-07-28 14:19:30,525 - MyModel:predict:26 - INFO:  Predict called - will run idenity function
2020-07-28 14:19:30,532 - grpc._server:_call_behavior:445 - ERROR:  Exception calling application: local variable 'request_proto' referenced before assignment
Traceback (most recent call last):
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/grpc/_server.py", line 435, in _call_behavior
    response_or_iterator = behavior(argument, context)
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/seldon_core/wrapper.py", line 203, in SendFeedback
    self.user_model, feedback_grpc, PRED_UNIT_ID, self.seldon_metrics
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/seldon_core/seldon_methods.py", line 160, in send_feedback
    request_proto
UnboundLocalError: local variable 'request_proto' referenced before assignment
------------------------------ Captured log call -------------------------------
INFO     root:test_microservice.py:27 Calling method... try: 1
____________ test_model_template_app_tracing_config[microservice0] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_microservice.py", line 212, in test_model_template_app_tracing_config
    assert response.json() == {"data": {"ndarray": []}, "meta": {}}
AssertionError: assert {'data': {'na...}, 'meta': {}} == {'data': {'nd...}, 'meta': {}}
  Omitting 1 identical items, use -vv to show
  Differing items:
  {'data': {'names': [], 'ndarray': []}} != {'data': {'ndarray': []}}
  Use -v to get the full diff
---------------------------- Captured stderr setup -----------------------------
INFO:root:starting: seldon-core-microservice MyModel REST --service-type MODEL --persistence 0 --tracing
[2020-07-28 14:19:40 +0000] [20007] [INFO] Handling signal: term
[2020-07-28 14:19:40 +0000] [20007] [INFO] Shutting down: Master
DEBUG:root:=== trying again
2020-07-28 14:19:41,759 - seldon_core.microservice:main:207 - INFO:  Starting microservice.py:main
2020-07-28 14:19:41,759 - seldon_core.microservice:main:208 - INFO:  Seldon Core version: 1.2.2
2020-07-28 14:19:41,761 - seldon_core.microservice:main:310 - INFO:  Parse JAEGER_EXTRA_TAGS []
2020-07-28 14:19:41,762 - seldon_core.microservice:main:313 - INFO:  Annotations: {}
2020-07-28 14:19:41,762 - seldon_core.microservice:main:317 - INFO:  Importing MyModel
2020-07-28 14:19:41,762 - MyModel:__init__:15 - INFO:  Initializing model
2020-07-28 14:19:41,762 - seldon_core.microservice:setup_tracing:145 - INFO:  Initializing tracing
2020-07-28 14:19:41,835 - seldon_core.microservice:setup_tracing:166 - INFO:  Loading tracing config from /workspace/source/python/tests/resources/tracing_config/tracing.yaml
/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/seldon_core/microservice.py:170: YAMLLoadWarning: calling yaml.load() without Loader=... is deprecated, as the default Loader is unsafe. Please read https://msg.pyyaml.org/load for full details.
  config_dict = yaml.load(stream)
2020-07-28 14:19:41,838 - jaeger_tracing:_create_local_agent_channel:446 - INFO:  Initializing Jaeger Tracer with UDP reporter
2020-07-28 14:19:41,840 - jaeger_tracing:new_tracer:384 - INFO:  Using sampler ConstSampler(True)
2020-07-28 14:19:41,841 - jaeger_tracing:_initialize_global_tracer:436 - INFO:  opentracing.tracer initialized to <jaeger_client.tracer.Tracer object at 0x7fe21784e208>[app_name=MyModel]
2020-07-28 14:19:41,959 - seldon_core.microservice:main:388 - INFO:  REST gunicorn microservice running on port 5000
2020-07-28 14:19:41,961 - seldon_core.microservice:main:446 - INFO:  REST metrics microservice running on port 6005
2020-07-28 14:19:41,961 - seldon_core.microservice:main:456 - INFO:  Starting servers
[2020-07-28 14:19:42 +0000] [20020] [INFO] Starting gunicorn 20.0.4
[2020-07-28 14:19:42 +0000] [20020] [INFO] Listening at: http://0.0.0.0:5000 (20020)
[2020-07-28 14:19:42 +0000] [20020] [INFO] Using worker: threads
[2020-07-28 14:19:42 +0000] [20055] [INFO] Booting worker with pid: 20055
[2020-07-28 14:19:42 +0000] [20054] [INFO] Starting gunicorn 20.0.4
[2020-07-28 14:19:42 +0000] [20054] [INFO] Listening at: http://0.0.0.0:6005 (20054)
[2020-07-28 14:19:42 +0000] [20054] [INFO] Using worker: sync
[2020-07-28 14:19:42 +0000] [20062] [INFO] Booting worker with pid: 20062
DEBUG:root:=== trying again
INFO:root:microservice ready
------------------------------ Captured log setup ------------------------------
INFO     root:helpers.py:65 starting: seldon-core-microservice MyModel REST --service-type MODEL --persistence 0 --tracing
DEBUG    root:helpers.py:80 === trying again
DEBUG    root:helpers.py:80 === trying again
INFO     root:helpers.py:88 microservice ready
----------------------------- Captured stdout call -----------------------------
127.0.0.1 - - [28/Jul/2020:14:19:45 +0000] "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65 "-" "python-requests/2.24.0"
127.0.0.1 - - [28/Jul/2020:14:19:45 +0000] "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45 "-" "python-requests/2.24.0"
----------------------------- Captured stderr call -----------------------------
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): 127.0.0.1:5000
2020-07-28 14:19:45,701 - MyModel:predict:26 - INFO:  Predict called - will run idenity function
DEBUG:urllib3.connectionpool:http://127.0.0.1:5000 "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): 127.0.0.1:5000
2020-07-28 14:19:45,717 - MyModel:send_feedback:40 - INFO:  Send feedback called
DEBUG:urllib3.connectionpool:http://127.0.0.1:5000 "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45
------------------------------ Captured log call -------------------------------
DEBUG    urllib3.connectionpool:connectionpool.py:230 Starting new HTTP connection (1): 127.0.0.1:5000
DEBUG    urllib3.connectionpool:connectionpool.py:442 http://127.0.0.1:5000 "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65
DEBUG    urllib3.connectionpool:connectionpool.py:230 Starting new HTTP connection (1): 127.0.0.1:5000
DEBUG    urllib3.connectionpool:connectionpool.py:442 http://127.0.0.1:5000 "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45
--------------------------- Captured stderr teardown ---------------------------
[2020-07-28 14:19:45 +0000] [20062] [INFO] Worker exiting (pid: 20062)
[2020-07-28 14:19:45 +0000] [20020] [INFO] Handling signal: term
____________________________ test_model_feedback_ok ____________________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_model_microservice.py", line 441, in test_model_feedback_ok
    assert user_object.rewards[-1] == 1.0
IndexError: list index out of range
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "my-model-name",
  "versions": [
    "model-version"
  ],
  "platform": "model-platform",
  "inputs": [
    {
      "name": "input",
      "datatype": "BYTES",
      "shape": [
        1
      ]
    }
  ],
  "outputs": [
    {
      "name": "output",
      "datatype": "BYTES",
      "shape": [
        1
      ]
    }
  ]
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22ndarray%22:%5B%5D%7D%7D,%22reward%22:1.0%7D' [GET]>
INFO:root:None
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "my-model-name",
  "versions": [
    "model-version"
  ],
  "platform": "model-platform",
  "inputs": [
    {
      "name": "input",
      "datatype": "BYTES",
      "shape": [
        1
      ]
    }
  ],
  "outputs": [
    {
      "name": "output",
      "datatype": "BYTES",
      "shape": [
        1
      ]
    }
  ]
}
DEBUG    seldon_core.wrapper:wrapper.py:73 REST Request: <Request 'http://localhost/send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22ndarray%22:%5B%5D%7D%7D,%22reward%22:1.0%7D' [GET]>
INFO     root:test_model_microservice.py:439 None
_______________________ test_unimplemented_feedback_raw ________________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_model_microservice.py", line 992, in test_unimplemented_feedback_raw
    j = json.loads(rv.data)
  File "/opt/conda/lib/python3.7/json/__init__.py", line 348, in loads
    return _default_decoder.decode(s)
  File "/opt/conda/lib/python3.7/json/decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "/opt/conda/lib/python3.7/json/decoder.py", line 355, in raw_decode
    raise JSONDecodeError("Expecting value", s, err.value) from None
json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22ndarray%22:%5B%5D%7D%7D,%22reward%22:1.0%7D' [GET]>
ERROR:seldon_core.wrapper:Exception on /send-feedback [GET]
Traceback (most recent call last):
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask/app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask_cors/extension.py", line 161, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask/app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/workspace/source/python/seldon_core/wrapper.py", line 75, in SendFeedback
    user_model, requestJson, PRED_UNIT_ID, seldon_metrics
  File "/workspace/source/python/seldon_core/seldon_methods.py", line 183, in send_feedback
    raise Exception("TODO: Not implemented")
Exception: TODO: Not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:73 REST Request: <Request 'http://localhost/send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22ndarray%22:%5B%5D%7D%7D,%22reward%22:1.0%7D' [GET]>
ERROR    seldon_core.wrapper:app.py:1892 Exception on /send-feedback [GET]
Traceback (most recent call last):
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask/app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask_cors/extension.py", line 161, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask/app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/workspace/source/python/seldon_core/wrapper.py", line 75, in SendFeedback
    user_model, requestJson, PRED_UNIT_ID, seldon_metrics
  File "/workspace/source/python/seldon_core/seldon_methods.py", line 183, in send_feedback
    raise Exception("TODO: Not implemented")
Exception: TODO: Not implemented
___________________________ test_router_feedback_ok ____________________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_router_microservice.py", line 227, in test_router_feedback_ok
    assert rv.status_code == 200
AssertionError: assert 400 == 200
 +  where 400 = <Response 146 bytes [400 BAD REQUEST]>.status_code
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22ndarray%22:%5B%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%221%22:1%7D%7D%7D,%22reward%22:1.0%7D' [GET]>
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
INFO:root:Feedback called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
ERROR:seldon_core.wrapper:{'status': {'status': 1, 'info': 'Unknown data type returned as payload (must be list or np array):None', 'code': -1, 'reason': 'MICROSERVICE_BAD_DATA'}}
INFO:root:{'status': {'code': -1, 'info': 'Unknown data type returned as payload (must be list or np array):None', 'reason': 'MICROSERVICE_BAD_DATA', 'status': 1}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:73 REST Request: <Request 'http://localhost/send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22ndarray%22:%5B%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%221%22:1%7D%7D%7D,%22reward%22:1.0%7D' [GET]>
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
INFO     root:test_router_microservice.py:30 Feedback called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
ERROR    seldon_core.wrapper:wrapper.py:44 {'status': {'status': 1, 'info': 'Unknown data type returned as payload (must be list or np array):None', 'code': -1, 'reason': 'MICROSERVICE_BAD_DATA'}}
INFO     root:test_router_microservice.py:226 {'status': {'code': -1, 'info': 'Unknown data type returned as payload (must be list or np array):None', 'reason': 'MICROSERVICE_BAD_DATA', 'status': 1}}
_____________________________ test_proto_feedback ______________________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_router_microservice.py", line 315, in test_proto_feedback
    resp = app.SendFeedback(feedback, None)
  File "/workspace/source/python/seldon_core/wrapper.py", line 203, in SendFeedback
    self.user_model, feedback_grpc, PRED_UNIT_ID, self.seldon_metrics
  File "/workspace/source/python/seldon_core/seldon_methods.py", line 160, in send_feedback
    request_proto
UnboundLocalError: local variable 'request_proto' referenced before assignment
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}

----------- coverage: platform linux, python 3.7.1-final-0 -----------
Name                                                                                                      Stmts   Miss  Cover
-----------------------------------------------------------------------------------------------------------------------------
.tox/gcs/lib/python3.7/site-packages/seldon_core/__init__.py                                                  2      0   100%
.tox/gcs/lib/python3.7/site-packages/seldon_core/api_tester.py                                               81     81     0%
.tox/gcs/lib/python3.7/site-packages/seldon_core/app.py                                                      36      3    92%
.tox/gcs/lib/python3.7/site-packages/seldon_core/batch_processor.py                                          94     94     0%
.tox/gcs/lib/python3.7/site-packages/seldon_core/flask_utils.py                                              44     24    45%
.tox/gcs/lib/python3.7/site-packages/seldon_core/imports_helper.py                                           27      6    78%
.tox/gcs/lib/python3.7/site-packages/seldon_core/metadata.py                                                 32      3    91%
.tox/gcs/lib/python3.7/site-packages/seldon_core/metrics.py                                                 130     76    42%
.tox/gcs/lib/python3.7/site-packages/seldon_core/microservice.py                                            201     65    68%
.tox/gcs/lib/python3.7/site-packages/seldon_core/microservice_tester.py                                     140    140     0%
.tox/gcs/lib/python3.7/site-packages/seldon_core/persistence.py                                              45     23    49%
.tox/gcs/lib/python3.7/site-packages/seldon_core/proto/__init__.py                                            0      0   100%
.tox/gcs/lib/python3.7/site-packages/seldon_core/proto/prediction_pb2.py                                    160      0   100%
.tox/gcs/lib/python3.7/site-packages/seldon_core/proto/prediction_pb2_grpc.py                               137     89    35%
.tox/gcs/lib/python3.7/site-packages/seldon_core/proto/tensorflow/core/framework/__init__.py                  3      1    67%
.tox/gcs/lib/python3.7/site-packages/seldon_core/proto/tensorflow/core/framework/resource_handle_pb2.py      22      0   100%
.tox/gcs/lib/python3.7/site-packages/seldon_core/proto/tensorflow/core/framework/tensor_pb2.py               36      0   100%
.tox/gcs/lib/python3.7/site-packages/seldon_core/proto/tensorflow/core/framework/tensor_shape_pb2.py         18      0   100%
.tox/gcs/lib/python3.7/site-packages/seldon_core/proto/tensorflow/core/framework/types_pb2.py                62      0   100%
.tox/gcs/lib/python3.7/site-packages/seldon_core/seldon_client.py                                           599    599     0%
.tox/gcs/lib/python3.7/site-packages/seldon_core/seldon_methods.py                                          244    190    22%
.tox/gcs/lib/python3.7/site-packages/seldon_core/serving_test_gen.py                                         40     40     0%
.tox/gcs/lib/python3.7/site-packages/seldon_core/storage.py                                                 155    125    19%
.tox/gcs/lib/python3.7/site-packages/seldon_core/user_model.py                                              162     92    43%
.tox/gcs/lib/python3.7/site-packages/seldon_core/utils.py                                                   282    177    37%
.tox/gcs/lib/python3.7/site-packages/seldon_core/version.py                                                   1      0   100%
.tox/gcs/lib/python3.7/site-packages/seldon_core/wrapper.py                                                 145     75    48%
seldon_core/__init__.py                                                                                       2      0   100%
seldon_core/api_tester.py                                                                                    81     38    53%
seldon_core/app.py                                                                                           36     22    39%
seldon_core/batch_processor.py                                                                               94     94     0%
seldon_core/flask_utils.py                                                                                   44      3    93%
seldon_core/imports_helper.py                                                                                27      6    78%
seldon_core/metadata.py                                                                                      32      0   100%
seldon_core/metrics.py                                                                                      130      5    96%
seldon_core/microservice.py                                                                                 201    120    40%
seldon_core/microservice_tester.py                                                                          140     43    69%
seldon_core/persistence.py                                                                                   45     23    49%
seldon_core/proto/__init__.py                                                                                 0      0   100%
seldon_core/proto/prediction_pb2.py                                                                         160      0   100%
seldon_core/proto/prediction_pb2_grpc.py                                                                    137     65    53%
seldon_core/proto/tensorflow/core/framework/__init__.py                                                       3      1    67%
seldon_core/proto/tensorflow/core/framework/resource_handle_pb2.py                                           22      0   100%
seldon_core/proto/tensorflow/core/framework/tensor_pb2.py                                                    36      0   100%
seldon_core/proto/tensorflow/core/framework/tensor_shape_pb2.py                                              18      0   100%
seldon_core/proto/tensorflow/core/framework/types_pb2.py                                                     62      0   100%
seldon_core/seldon_client.py                                                                                599    284    53%
seldon_core/seldon_methods.py                                                                               244     10    96%
seldon_core/serving_test_gen.py                                                                              40     40     0%
seldon_core/storage.py                                                                                      155     68    56%
seldon_core/user_model.py                                                                                   162     30    81%
seldon_core/utils.py                                                                                        282     43    85%
seldon_core/version.py                                                                                        1      0   100%
seldon_core/wrapper.py                                                                                      145     11    92%
-----------------------------------------------------------------------------------------------------------------------------
TOTAL                                                                                                      5796   2809    52%

=========================== short test summary info ============================
FAILED tests/test_metrics.py::test_seldon_metrics_predict[True-UserObject] - ...
FAILED tests/test_metrics.py::test_seldon_metrics_predict[True-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_predict[False-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_predict[False-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_send_feedback[UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_send_feedback[UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_aggregate[True-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_aggregate[True-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_aggregate[False-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_aggregate[False-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_input[True-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_input[True-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_input[False-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_input[False-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_output[True-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_output[True-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_output[False-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_output[False-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_route[True-UserObject] - Ke...
FAILED tests/test_metrics.py::test_seldon_metrics_route[True-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_route[False-UserObject] - K...
FAILED tests/test_metrics.py::test_seldon_metrics_route[False-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_predict[True-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_predict[True-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_predict[False-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_predict[False-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_aggregate[True-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_aggregate[True-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_aggregate[False-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_aggregate[False-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_input[True-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_input[True-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_input[False-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_input[False-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_output[True-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_output[True-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_output[False-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_output[False-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_route[True-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_route[True-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_route[False-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_route[False-UserObjectLowLevelGrpc]
FAILED tests/test_microservice.py::test_model_template_app_rest - AssertionEr...
FAILED tests/test_microservice.py::test_model_template_app_rest_submodule[microservice0]
FAILED tests/test_microservice.py::test_model_template_app_grpc[microservice0]
FAILED tests/test_microservice.py::test_model_template_app_tracing_config[microservice0]
FAILED tests/test_model_microservice.py::test_model_feedback_ok - IndexError:...
FAILED tests/test_model_microservice.py::test_unimplemented_feedback_raw - js...
FAILED tests/test_router_microservice.py::test_router_feedback_ok - assert 40...
FAILED tests/test_router_microservice.py::test_proto_feedback - UnboundLocalE...
============ 50 failed, 309 passed, 12 skipped in 97.08s (0:01:37) =============
ERROR: InvocationError for command /workspace/source/python/.tox/gcs/bin/pytest (exited with code 1)
azure create: /workspace/source/python/.tox/azure
azure installdeps: tenacity, pytest, pytest-cov, Pillow
azure inst: /workspace/source/python/.tox/.tmp/package/1/seldon-core-1.2.2.zip
azure installed: attrs==19.3.0,azure-common==1.1.25,azure-storage-blob==2.1.0,azure-storage-common==2.1.0,certifi==2020.6.20,cffi==1.14.1,chardet==3.0.4,click==7.1.2,configparser==5.0.0,coverage==5.2.1,cryptography==3.0,Flask==1.1.2,Flask-Cors==3.0.8,Flask-OpenTracing==1.1.0,flatbuffers==1.12,grpcio==1.30.0,grpcio-opentracing==1.1.4,gunicorn==20.0.4,idna==2.10,importlib-metadata==1.7.0,itsdangerous==1.1.0,jaeger-client==4.3.0,Jinja2==2.11.2,jsonschema==3.2.0,MarkupSafe==1.1.1,minio==5.0.10,more-itertools==8.4.0,numpy==1.19.1,opentracing==2.3.0,packaging==20.4,Pillow==7.2.0,pluggy==0.13.1,prometheus-client==0.8.0,protobuf==3.12.2,py==1.9.0,pycparser==2.20,pyparsing==2.4.7,pyrsistent==0.16.0,pytest==5.4.3,pytest-cov==2.10.0,python-dateutil==2.8.1,pytz==2020.1,PyYAML==5.3.1,redis==3.5.3,requests==2.24.0,seldon-core @ file:///workspace/source/python/.tox/.tmp/package/1/seldon-core-1.2.2.zip,six==1.15.0,tenacity==6.2.0,threadloop==1.0.2,thrift==0.13.0,tornado==6.0.4,urllib3==1.25.10,wcwidth==0.2.5,Werkzeug==1.0.1,zipp==3.1.0
azure run-test-pre: PYTHONHASHSEED='417737162'
azure run-test: commands[0] | pytest
============================= test session starts ==============================
platform linux -- Python 3.7.1, pytest-5.4.3, py-1.9.0, pluggy-0.13.1
cachedir: .tox/azure/.pytest_cache
rootdir: /workspace/source/python, inifile: setup.cfg
plugins: cov-2.10.0
collected 371 items

tests/test_api_tester.py ..                                              [  0%]
tests/test_application_exception_microservice.py ..                      [  1%]
tests/test_azure_storage.py ......                                       [  2%]
tests/test_combiner_microservice.py .....................                [  8%]
tests/test_metadata.py ................................................. [ 21%]
...                                                                      [ 22%]
tests/test_metrics.py ...................FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF [ 35%]
FFFFFFFFFFF........                                                      [ 40%]
tests/test_microservice.py .F...FF..F...                                 [ 44%]
tests/test_microservice_tester.py .....                                  [ 45%]
tests/test_model_microservice.py ..........F....s......................s [ 56%]
.......F                                                                 [ 58%]
tests/test_router_microservice.py ........F....F...                      [ 63%]
tests/test_s3_storage.py ...                                             [ 63%]
tests/test_seldon_client.py ..................................           [ 73%]
tests/test_storage.py ...s...s                                           [ 75%]
tests/test_transformer_microservice.py ................................. [ 84%]
........                                                                 [ 86%]
tests/test_user_model.py ....                                            [ 87%]
tests/test_utils.py ..............................sss..............      [100%]

=================================== FAILURES ===================================
_________________ test_seldon_metrics_predict[True-UserObject] _________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 345, in test_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Predict called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:57 REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:159 Predict called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:65 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
_____________ test_seldon_metrics_predict[True-UserObjectLowLevel] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 345, in test_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Predict raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:57 REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:207 Predict raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:65 REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
________________ test_seldon_metrics_predict[False-UserObject] _________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 345, in test_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Predict called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:57 REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:159 Predict called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:65 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
____________ test_seldon_metrics_predict[False-UserObjectLowLevel] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 345, in test_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Predict raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:57 REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:207 Predict raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:65 REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
________________ test_seldon_metrics_send_feedback[UserObject] _________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 364, in test_seldon_metrics_send_feedback
    assert rv.status_code == 200
AssertionError: assert 500 == 200
 +  where 500 = <Response streamed [500 INTERNAL SERVER ERROR]>.status_code
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/send-feedback?json=%7B%22reward%22:%2042%7D' [GET]>
ERROR:seldon_core.wrapper:Exception on /send-feedback [GET]
Traceback (most recent call last):
  File "/workspace/source/python/.tox/azure/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "/workspace/source/python/.tox/azure/lib/python3.7/site-packages/flask/app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/workspace/source/python/.tox/azure/lib/python3.7/site-packages/flask_cors/extension.py", line 161, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/workspace/source/python/.tox/azure/lib/python3.7/site-packages/flask/app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/workspace/source/python/.tox/azure/lib/python3.7/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/workspace/source/python/.tox/azure/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "/workspace/source/python/.tox/azure/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/workspace/source/python/seldon_core/wrapper.py", line 75, in SendFeedback
    user_model, requestJson, PRED_UNIT_ID, seldon_metrics
  File "/workspace/source/python/seldon_core/seldon_methods.py", line 183, in send_feedback
    raise Exception("TODO: Not implemented")
Exception: TODO: Not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:73 REST Request: <Request 'http://localhost/send-feedback?json=%7B%22reward%22:%2042%7D' [GET]>
ERROR    seldon_core.wrapper:app.py:1892 Exception on /send-feedback [GET]
Traceback (most recent call last):
  File "/workspace/source/python/.tox/azure/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "/workspace/source/python/.tox/azure/lib/python3.7/site-packages/flask/app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/workspace/source/python/.tox/azure/lib/python3.7/site-packages/flask_cors/extension.py", line 161, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/workspace/source/python/.tox/azure/lib/python3.7/site-packages/flask/app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/workspace/source/python/.tox/azure/lib/python3.7/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/workspace/source/python/.tox/azure/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "/workspace/source/python/.tox/azure/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/workspace/source/python/seldon_core/wrapper.py", line 75, in SendFeedback
    user_model, requestJson, PRED_UNIT_ID, seldon_metrics
  File "/workspace/source/python/seldon_core/seldon_methods.py", line 183, in send_feedback
    raise Exception("TODO: Not implemented")
Exception: TODO: Not implemented
____________ test_seldon_metrics_send_feedback[UserObjectLowLevel] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 364, in test_seldon_metrics_send_feedback
    assert rv.status_code == 200
AssertionError: assert 500 == 200
 +  where 500 = <Response streamed [500 INTERNAL SERVER ERROR]>.status_code
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/send-feedback?json=%7B%22reward%22:%2042%7D' [GET]>
ERROR:seldon_core.wrapper:Exception on /send-feedback [GET]
Traceback (most recent call last):
  File "/workspace/source/python/.tox/azure/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "/workspace/source/python/.tox/azure/lib/python3.7/site-packages/flask/app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/workspace/source/python/.tox/azure/lib/python3.7/site-packages/flask_cors/extension.py", line 161, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/workspace/source/python/.tox/azure/lib/python3.7/site-packages/flask/app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/workspace/source/python/.tox/azure/lib/python3.7/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/workspace/source/python/.tox/azure/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "/workspace/source/python/.tox/azure/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/workspace/source/python/seldon_core/wrapper.py", line 75, in SendFeedback
    user_model, requestJson, PRED_UNIT_ID, seldon_metrics
  File "/workspace/source/python/seldon_core/seldon_methods.py", line 183, in send_feedback
    raise Exception("TODO: Not implemented")
Exception: TODO: Not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:73 REST Request: <Request 'http://localhost/send-feedback?json=%7B%22reward%22:%2042%7D' [GET]>
ERROR    seldon_core.wrapper:app.py:1892 Exception on /send-feedback [GET]
Traceback (most recent call last):
  File "/workspace/source/python/.tox/azure/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "/workspace/source/python/.tox/azure/lib/python3.7/site-packages/flask/app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/workspace/source/python/.tox/azure/lib/python3.7/site-packages/flask_cors/extension.py", line 161, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/workspace/source/python/.tox/azure/lib/python3.7/site-packages/flask/app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/workspace/source/python/.tox/azure/lib/python3.7/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/workspace/source/python/.tox/azure/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "/workspace/source/python/.tox/azure/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/workspace/source/python/seldon_core/wrapper.py", line 75, in SendFeedback
    user_model, requestJson, PRED_UNIT_ID, seldon_metrics
  File "/workspace/source/python/seldon_core/seldon_methods.py", line 183, in send_feedback
    raise Exception("TODO: Not implemented")
Exception: TODO: Not implemented
________________ test_seldon_metrics_aggregate[True-UserObject] ________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 399, in test_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO:root:Aggregate called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:112 REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO     root:test_metrics.py:163 Aggregate called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:116 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
____________ test_seldon_metrics_aggregate[True-UserObjectLowLevel] ____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 399, in test_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO:root:Aggregate raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:112 REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO     root:test_metrics.py:214 Aggregate raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:116 REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
_______________ test_seldon_metrics_aggregate[False-UserObject] ________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 399, in test_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO:root:Aggregate called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:112 REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO     root:test_metrics.py:163 Aggregate called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:116 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
___________ test_seldon_metrics_aggregate[False-UserObjectLowLevel] ____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 399, in test_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO:root:Aggregate raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:112 REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO     root:test_metrics.py:214 Aggregate raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:116 REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
_____________ test_seldon_metrics_transform_input[True-UserObject] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 426, in test_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform input called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:82 REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:167 Transform input called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:86 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
_________ test_seldon_metrics_transform_input[True-UserObjectLowLevel] _________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 426, in test_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform input raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:82 REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:221 Transform input raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:86 REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
____________ test_seldon_metrics_transform_input[False-UserObject] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 426, in test_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform input called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:82 REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:167 Transform input called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:86 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
________ test_seldon_metrics_transform_input[False-UserObjectLowLevel] _________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 426, in test_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform input raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:82 REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:221 Transform input raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:86 REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
____________ test_seldon_metrics_transform_output[True-UserObject] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 453, in test_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform output called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:92 REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:171 Transform output called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:96 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
________ test_seldon_metrics_transform_output[True-UserObjectLowLevel] _________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 453, in test_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform output raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:92 REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:228 Transform output raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:96 REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
____________ test_seldon_metrics_transform_output[False-UserObject] ____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 453, in test_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform output called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:92 REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:171 Transform output called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:96 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
________ test_seldon_metrics_transform_output[False-UserObjectLowLevel] ________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 453, in test_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform output raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:92 REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:228 Transform output raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:96 REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
__________________ test_seldon_metrics_route[True-UserObject] __________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 478, in test_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Route called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:class_names is not implemented
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': [[22]], 'names': ['t:0']}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:102 REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:175 Route called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:106 REST Response: {'data': {'ndarray': [[22]], 'names': ['t:0']}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
______________ test_seldon_metrics_route[True-UserObjectLowLevel] ______________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 478, in test_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Route raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': [22]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:102 REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:235 Route raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:106 REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': [22]}}
_________________ test_seldon_metrics_route[False-UserObject] __________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 478, in test_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Route called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:class_names is not implemented
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': [[22]], 'names': ['t:0']}, 'meta': {}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:102 REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:175 Route called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:106 REST Response: {'data': {'ndarray': [[22]], 'names': ['t:0']}, 'meta': {}}
_____________ test_seldon_metrics_route[False-UserObjectLowLevel] ______________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 478, in test_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Route raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': [22]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:102 REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:235 Route raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:106 REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': [22]}}
______________ test_proto_seldon_metrics_predict[True-UserObject] ______________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 506, in test_proto_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Predict called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:159 Predict called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
________ test_proto_seldon_metrics_predict[True-UserObjectLowLevelGrpc] ________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 506, in test_proto_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Predict raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:256 Predict raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
_____________ test_proto_seldon_metrics_predict[False-UserObject] ______________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 506, in test_proto_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Predict called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:159 Predict called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
_______ test_proto_seldon_metrics_predict[False-UserObjectLowLevelGrpc] ________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 506, in test_proto_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Predict raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:256 Predict raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
_____________ test_proto_seldon_metrics_aggregate[True-UserObject] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 540, in test_proto_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Aggregate called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:163 Aggregate called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
_______ test_proto_seldon_metrics_aggregate[True-UserObjectLowLevelGrpc] _______
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 540, in test_proto_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Aggregate raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:269 Aggregate raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
____________ test_proto_seldon_metrics_aggregate[False-UserObject] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 540, in test_proto_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Aggregate called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:163 Aggregate called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
______ test_proto_seldon_metrics_aggregate[False-UserObjectLowLevelGrpc] _______
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 540, in test_proto_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Aggregate raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:269 Aggregate raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
__________ test_proto_seldon_metrics_transform_input[True-UserObject] __________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 567, in test_proto_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform input called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:167 Transform input called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
____ test_proto_seldon_metrics_transform_input[True-UserObjectLowLevelGrpc] ____
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 567, in test_proto_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform input raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:282 Transform input raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
_________ test_proto_seldon_metrics_transform_input[False-UserObject] __________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 567, in test_proto_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform input called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:167 Transform input called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
___ test_proto_seldon_metrics_transform_input[False-UserObjectLowLevelGrpc] ____
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 567, in test_proto_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform input raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:282 Transform input raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
_________ test_proto_seldon_metrics_transform_output[True-UserObject] __________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 594, in test_proto_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform output called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:171 Transform output called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
___ test_proto_seldon_metrics_transform_output[True-UserObjectLowLevelGrpc] ____
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 594, in test_proto_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform output raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:295 Transform output raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
_________ test_proto_seldon_metrics_transform_output[False-UserObject] _________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 594, in test_proto_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform output called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:171 Transform output called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
___ test_proto_seldon_metrics_transform_output[False-UserObjectLowLevelGrpc] ___
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 594, in test_proto_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform output raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:295 Transform output raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
_______________ test_proto_seldon_metrics_route[True-UserObject] _______________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 621, in test_proto_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Route called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:175 Route called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
_________ test_proto_seldon_metrics_route[True-UserObjectLowLevelGrpc] _________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 621, in test_proto_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Route raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:308 Route raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
______________ test_proto_seldon_metrics_route[False-UserObject] _______________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 621, in test_proto_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Route called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:175 Route called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
________ test_proto_seldon_metrics_route[False-UserObjectLowLevelGrpc] _________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 621, in test_proto_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Route raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:308 Route raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
_________________________ test_model_template_app_rest _________________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_microservice.py", line 56, in test_model_template_app_rest
    assert response.json() == {"data": {"ndarray": []}, "meta": {}}
AssertionError: assert {'data': {'na...}, 'meta': {}} == {'data': {'nd...}, 'meta': {}}
  Omitting 1 identical items, use -vv to show
  Differing items:
  {'data': {'names': [], 'ndarray': []}} != {'data': {'ndarray': []}}
  Use -v to get the full diff
---------------------------- Captured stderr setup -----------------------------
INFO:root:starting: seldon-core-microservice MyModel REST --service-type MODEL --persistence 0
2020-07-28 14:20:58,846 - seldon_core.microservice:main:207 - INFO:  Starting microservice.py:main
2020-07-28 14:20:58,846 - seldon_core.microservice:main:208 - INFO:  Seldon Core version: 1.2.2
2020-07-28 14:20:58,849 - seldon_core.microservice:main:310 - INFO:  Parse JAEGER_EXTRA_TAGS []
2020-07-28 14:20:58,849 - seldon_core.microservice:main:313 - INFO:  Annotations: {}
2020-07-28 14:20:58,850 - seldon_core.microservice:main:317 - INFO:  Importing MyModel
2020-07-28 14:20:58,850 - MyModel:__init__:15 - INFO:  Initializing model
DEBUG:root:=== trying again
2020-07-28 14:20:58,975 - seldon_core.microservice:main:388 - INFO:  REST gunicorn microservice running on port 5000
2020-07-28 14:20:58,976 - seldon_core.microservice:main:446 - INFO:  REST metrics microservice running on port 6005
2020-07-28 14:20:58,977 - seldon_core.microservice:main:456 - INFO:  Starting servers
[2020-07-28 14:20:59 +0000] [27653] [INFO] Starting gunicorn 20.0.4
[2020-07-28 14:20:59 +0000] [27653] [INFO] Listening at: http://0.0.0.0:5000 (27653)
[2020-07-28 14:20:59 +0000] [27653] [INFO] Using worker: threads
[2020-07-28 14:20:59 +0000] [27687] [INFO] Booting worker with pid: 27687
[2020-07-28 14:20:59 +0000] [27686] [INFO] Starting gunicorn 20.0.4
[2020-07-28 14:20:59 +0000] [27686] [INFO] Listening at: http://0.0.0.0:6005 (27686)
[2020-07-28 14:20:59 +0000] [27686] [INFO] Using worker: sync
[2020-07-28 14:20:59 +0000] [27694] [INFO] Booting worker with pid: 27694
DEBUG:root:=== trying again
INFO:root:microservice ready
------------------------------ Captured log setup ------------------------------
INFO     root:helpers.py:65 starting: seldon-core-microservice MyModel REST --service-type MODEL --persistence 0
DEBUG    root:helpers.py:80 === trying again
DEBUG    root:helpers.py:80 === trying again
INFO     root:helpers.py:88 microservice ready
----------------------------- Captured stdout call -----------------------------
127.0.0.1 - - [28/Jul/2020:14:21:02 +0000] "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65 "-" "python-requests/2.24.0"
----------------------------- Captured stderr call -----------------------------
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): 127.0.0.1:5000
2020-07-28 14:21:02,896 - MyModel:predict:26 - INFO:  Predict called - will run idenity function
DEBUG:urllib3.connectionpool:http://127.0.0.1:5000 "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): 127.0.0.1:5000
2020-07-28 14:21:02,910 - MyModel:send_feedback:40 - INFO:  Send feedback called
DEBUG:urllib3.connectionpool:http://127.0.0.1:5000 "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45
------------------------------ Captured log call -------------------------------
DEBUG    urllib3.connectionpool:connectionpool.py:230 Starting new HTTP connection (1): 127.0.0.1:5000
DEBUG    urllib3.connectionpool:connectionpool.py:442 http://127.0.0.1:5000 "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65
DEBUG    urllib3.connectionpool:connectionpool.py:230 Starting new HTTP connection (1): 127.0.0.1:5000
DEBUG    urllib3.connectionpool:connectionpool.py:442 http://127.0.0.1:5000 "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45
--------------------------- Captured stdout teardown ---------------------------
127.0.0.1 - - [28/Jul/2020:14:21:02 +0000] "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45 "-" "python-requests/2.24.0"
--------------------------- Captured stderr teardown ---------------------------
[2020-07-28 14:21:02 +0000] [27694] [INFO] Worker exiting (pid: 27694)
[2020-07-28 14:21:02 +0000] [27653] [INFO] Handling signal: term
____________ test_model_template_app_rest_submodule[microservice0] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_microservice.py", line 106, in test_model_template_app_rest_submodule
    assert response.json() == {"data": {"ndarray": []}, "meta": {}}
AssertionError: assert {'data': {'na...}, 'meta': {}} == {'data': {'nd...}, 'meta': {}}
  Omitting 1 identical items, use -vv to show
  Differing items:
  {'data': {'names': [], 'ndarray': []}} != {'data': {'ndarray': []}}
  Use -v to get the full diff
---------------------------- Captured stdout setup -----------------------------
127.0.0.1 - - [28/Jul/2020:14:21:18 +0000] "GET /metrics-endpoint HTTP/1.1" 200 0 "-" "python-requests/2.24.0"
---------------------------- Captured stderr setup -----------------------------
[2020-07-28 14:21:18 +0000] [27833] [INFO] Worker exiting (pid: 27833)
INFO:root:starting: seldon-core-microservice mymodule.my_model.MyModel REST --service-type MODEL --persistence 0
[2020-07-28 14:21:18 +0000] [27825] [INFO] Shutting down: Master
[2020-07-28 14:21:19 +0000] [27826] [INFO] Worker exiting (pid: 27826)
Error in atexit._run_exitfuncs:
Traceback (most recent call last):
  File "/opt/conda/lib/python3.7/multiprocessing/util.py", line 322, in _exit_function
    p.join()
  File "/opt/conda/lib/python3.7/multiprocessing/process.py", line 138, in join
    assert self._parent_pid == os.getpid(), 'can only join a child process'
AssertionError: can only join a child process
2020-07-28 14:21:19,128 - seldon_core.microservice:main:207 - INFO:  Starting microservice.py:main
2020-07-28 14:21:19,128 - seldon_core.microservice:main:208 - INFO:  Seldon Core version: 1.2.2
2020-07-28 14:21:19,131 - seldon_core.microservice:main:310 - INFO:  Parse JAEGER_EXTRA_TAGS []
2020-07-28 14:21:19,131 - seldon_core.microservice:main:313 - INFO:  Annotations: {}
2020-07-28 14:21:19,131 - seldon_core.microservice:main:321 - INFO:  Importing submodule ['mymodule.my_model', 'MyModel']
2020-07-28 14:21:19,132 - mymodule.my_model:__init__:15 - INFO:  Initializing model
DEBUG:root:=== trying again
2020-07-28 14:21:19,248 - seldon_core.microservice:main:388 - INFO:  REST gunicorn microservice running on port 5000
2020-07-28 14:21:19,249 - seldon_core.microservice:main:446 - INFO:  REST metrics microservice running on port 6005
2020-07-28 14:21:19,249 - seldon_core.microservice:main:456 - INFO:  Starting servers
[2020-07-28 14:21:19 +0000] [27836] [INFO] Starting gunicorn 20.0.4
[2020-07-28 14:21:19 +0000] [27836] [INFO] Listening at: http://0.0.0.0:5000 (27836)
[2020-07-28 14:21:19 +0000] [27836] [INFO] Using worker: threads
[2020-07-28 14:21:19 +0000] [27870] [INFO] Booting worker with pid: 27870
[2020-07-28 14:21:19 +0000] [27869] [INFO] Starting gunicorn 20.0.4
[2020-07-28 14:21:19 +0000] [27869] [INFO] Listening at: http://0.0.0.0:6005 (27869)
[2020-07-28 14:21:19 +0000] [27869] [INFO] Using worker: sync
[2020-07-28 14:21:19 +0000] [27873] [INFO] Booting worker with pid: 27873
[2020-07-28 14:21:19 +0000] [27792] [INFO] Shutting down: Master
DEBUG:root:=== trying again
INFO:root:microservice ready
------------------------------ Captured log setup ------------------------------
INFO     root:helpers.py:65 starting: seldon-core-microservice mymodule.my_model.MyModel REST --service-type MODEL --persistence 0
DEBUG    root:helpers.py:80 === trying again
DEBUG    root:helpers.py:80 === trying again
INFO     root:helpers.py:88 microservice ready
----------------------------- Captured stdout call -----------------------------
127.0.0.1 - - [28/Jul/2020:14:21:23 +0000] "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65 "-" "python-requests/2.24.0"
127.0.0.1 - - [28/Jul/2020:14:21:23 +0000] "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45 "-" "python-requests/2.24.0"
----------------------------- Captured stderr call -----------------------------
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): 127.0.0.1:5000
2020-07-28 14:21:23,180 - mymodule.my_model:predict:26 - INFO:  Predict called - will run idenity function
DEBUG:urllib3.connectionpool:http://127.0.0.1:5000 "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): 127.0.0.1:5000
2020-07-28 14:21:23,192 - mymodule.my_model:send_feedback:40 - INFO:  Send feedback called
DEBUG:urllib3.connectionpool:http://127.0.0.1:5000 "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45
------------------------------ Captured log call -------------------------------
DEBUG    urllib3.connectionpool:connectionpool.py:230 Starting new HTTP connection (1): 127.0.0.1:5000
DEBUG    urllib3.connectionpool:connectionpool.py:442 http://127.0.0.1:5000 "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65
DEBUG    urllib3.connectionpool:connectionpool.py:230 Starting new HTTP connection (1): 127.0.0.1:5000
DEBUG    urllib3.connectionpool:connectionpool.py:442 http://127.0.0.1:5000 "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45
--------------------------- Captured stderr teardown ---------------------------
[2020-07-28 14:21:23 +0000] [27873] [INFO] Worker exiting (pid: 27873)
_________________ test_model_template_app_grpc[microservice0] __________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_microservice.py", line 130, in test_model_template_app_grpc
    response = stub.SendFeedback(request=request)
  File "/workspace/source/python/.tox/azure/lib/python3.7/site-packages/grpc/_channel.py", line 826, in __call__
    return _end_unary_response_blocking(state, call, False, None)
  File "/workspace/source/python/.tox/azure/lib/python3.7/site-packages/grpc/_channel.py", line 729, in _end_unary_response_blocking
    raise _InactiveRpcError(state)
grpc._channel._InactiveRpcError: <_InactiveRpcError of RPC that terminated with:
	status = StatusCode.UNKNOWN
	details = "Exception calling application: local variable 'request_proto' referenced before assignment"
	debug_error_string = "{"created":"@1595946088.242198968","description":"Error received from peer ipv4:0.0.0.0:5000","file":"src/core/lib/surface/call.cc","file_line":1055,"grpc_message":"Exception calling application: local variable 'request_proto' referenced before assignment","grpc_status":2}"
>
---------------------------- Captured stderr setup -----------------------------
[2020-07-28 14:21:23 +0000] [27869] [INFO] Handling signal: term
INFO:root:starting: seldon-core-microservice MyModel GRPC --service-type MODEL --persistence 0
[2020-07-28 14:21:23 +0000] [27836] [INFO] Handling signal: term
[2020-07-28 14:21:23 +0000] [27869] [INFO] Shutting down: Master
[2020-07-28 14:21:24 +0000] [27870] [INFO] Worker exiting (pid: 27870)
DEBUG:root:=== trying again
Error in atexit._run_exitfuncs:
Traceback (most recent call last):
  File "/opt/conda/lib/python3.7/multiprocessing/util.py", line 322, in _exit_function
    p.join()
  File "/opt/conda/lib/python3.7/multiprocessing/process.py", line 138, in join
    assert self._parent_pid == os.getpid(), 'can only join a child process'
AssertionError: can only join a child process
2020-07-28 14:21:24,314 - seldon_core.microservice:main:207 - INFO:  Starting microservice.py:main
2020-07-28 14:21:24,314 - seldon_core.microservice:main:208 - INFO:  Seldon Core version: 1.2.2
2020-07-28 14:21:24,318 - seldon_core.microservice:main:310 - INFO:  Parse JAEGER_EXTRA_TAGS []
2020-07-28 14:21:24,318 - seldon_core.microservice:main:313 - INFO:  Annotations: {}
2020-07-28 14:21:24,318 - seldon_core.microservice:main:317 - INFO:  Importing MyModel
2020-07-28 14:21:24,319 - MyModel:__init__:15 - INFO:  Initializing model
2020-07-28 14:21:24,440 - seldon_core.microservice:main:446 - INFO:  REST metrics microservice running on port 6005
2020-07-28 14:21:24,441 - seldon_core.microservice:main:456 - INFO:  Starting servers
2020-07-28 14:21:24,496 - seldon_core.microservice:grpc_prediction_server:422 - INFO:  GRPC microservice Running on port 5000
[2020-07-28 14:21:24 +0000] [27836] [INFO] Shutting down: Master
[2020-07-28 14:21:24 +0000] [27916] [INFO] Starting gunicorn 20.0.4
[2020-07-28 14:21:24 +0000] [27916] [INFO] Listening at: http://0.0.0.0:6005 (27916)
[2020-07-28 14:21:24 +0000] [27916] [INFO] Using worker: sync
[2020-07-28 14:21:24 +0000] [27927] [INFO] Booting worker with pid: 27927
DEBUG:root:=== trying again
INFO:root:microservice ready
------------------------------ Captured log setup ------------------------------
INFO     root:helpers.py:65 starting: seldon-core-microservice MyModel GRPC --service-type MODEL --persistence 0
DEBUG    root:helpers.py:80 === trying again
DEBUG    root:helpers.py:80 === trying again
INFO     root:helpers.py:88 microservice ready
----------------------------- Captured stderr call -----------------------------
INFO:root:Calling method... try: 1
2020-07-28 14:21:28,237 - MyModel:predict:26 - INFO:  Predict called - will run idenity function
2020-07-28 14:21:28,240 - grpc._server:_call_behavior:445 - ERROR:  Exception calling application: local variable 'request_proto' referenced before assignment
Traceback (most recent call last):
  File "/workspace/source/python/.tox/azure/lib/python3.7/site-packages/grpc/_server.py", line 435, in _call_behavior
    response_or_iterator = behavior(argument, context)
  File "/workspace/source/python/.tox/azure/lib/python3.7/site-packages/seldon_core/wrapper.py", line 203, in SendFeedback
    self.user_model, feedback_grpc, PRED_UNIT_ID, self.seldon_metrics
  File "/workspace/source/python/.tox/azure/lib/python3.7/site-packages/seldon_core/seldon_methods.py", line 160, in send_feedback
    request_proto
UnboundLocalError: local variable 'request_proto' referenced before assignment
------------------------------ Captured log call -------------------------------
INFO     root:test_microservice.py:27 Calling method... try: 1
--------------------------- Captured stderr teardown ---------------------------
[2020-07-28 14:21:28 +0000] [27916] [INFO] Handling signal: term
[2020-07-28 14:21:28 +0000] [27927] [INFO] Worker exiting (pid: 27927)
____________ test_model_template_app_tracing_config[microservice0] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_microservice.py", line 212, in test_model_template_app_tracing_config
    assert response.json() == {"data": {"ndarray": []}, "meta": {}}
AssertionError: assert {'data': {'na...}, 'meta': {}} == {'data': {'nd...}, 'meta': {}}
  Omitting 1 identical items, use -vv to show
  Differing items:
  {'data': {'names': [], 'ndarray': []}} != {'data': {'ndarray': []}}
  Use -v to get the full diff
---------------------------- Captured stderr setup -----------------------------
INFO:root:starting: seldon-core-microservice MyModel REST --service-type MODEL --persistence 0 --tracing
[2020-07-28 14:21:38 +0000] [28021] [INFO] Worker exiting (pid: 28021)
[2020-07-28 14:21:38 +0000] [28010] [INFO] Handling signal: term
[2020-07-28 14:21:38 +0000] [28010] [INFO] Shutting down: Master
2020-07-28 14:21:39,319 - seldon_core.microservice:main:207 - INFO:  Starting microservice.py:main
2020-07-28 14:21:39,319 - seldon_core.microservice:main:208 - INFO:  Seldon Core version: 1.2.2
2020-07-28 14:21:39,321 - seldon_core.microservice:main:310 - INFO:  Parse JAEGER_EXTRA_TAGS []
2020-07-28 14:21:39,322 - seldon_core.microservice:main:313 - INFO:  Annotations: {}
2020-07-28 14:21:39,322 - seldon_core.microservice:main:317 - INFO:  Importing MyModel
2020-07-28 14:21:39,322 - MyModel:__init__:15 - INFO:  Initializing model
2020-07-28 14:21:39,322 - seldon_core.microservice:setup_tracing:145 - INFO:  Initializing tracing
2020-07-28 14:21:39,368 - seldon_core.microservice:setup_tracing:166 - INFO:  Loading tracing config from /workspace/source/python/tests/resources/tracing_config/tracing.yaml
/workspace/source/python/.tox/azure/lib/python3.7/site-packages/seldon_core/microservice.py:170: YAMLLoadWarning: calling yaml.load() without Loader=... is deprecated, as the default Loader is unsafe. Please read https://msg.pyyaml.org/load for full details.
  config_dict = yaml.load(stream)
2020-07-28 14:21:39,370 - jaeger_tracing:_create_local_agent_channel:446 - INFO:  Initializing Jaeger Tracer with UDP reporter
2020-07-28 14:21:39,373 - jaeger_tracing:new_tracer:384 - INFO:  Using sampler ConstSampler(True)
2020-07-28 14:21:39,374 - jaeger_tracing:_initialize_global_tracer:436 - INFO:  opentracing.tracer initialized to <jaeger_client.tracer.Tracer object at 0x7f393474a048>[app_name=MyModel]
DEBUG:root:=== trying again
2020-07-28 14:21:39,494 - seldon_core.microservice:main:388 - INFO:  REST gunicorn microservice running on port 5000
2020-07-28 14:21:39,496 - seldon_core.microservice:main:446 - INFO:  REST metrics microservice running on port 6005
2020-07-28 14:21:39,496 - seldon_core.microservice:main:456 - INFO:  Starting servers
[2020-07-28 14:21:39 +0000] [28024] [INFO] Starting gunicorn 20.0.4
[2020-07-28 14:21:39 +0000] [28024] [INFO] Listening at: http://0.0.0.0:5000 (28024)
[2020-07-28 14:21:39 +0000] [28024] [INFO] Using worker: threads
[2020-07-28 14:21:39 +0000] [28059] [INFO] Booting worker with pid: 28059
[2020-07-28 14:21:39 +0000] [28058] [INFO] Starting gunicorn 20.0.4
[2020-07-28 14:21:39 +0000] [28058] [INFO] Listening at: http://0.0.0.0:6005 (28058)
[2020-07-28 14:21:39 +0000] [28058] [INFO] Using worker: sync
[2020-07-28 14:21:39 +0000] [28066] [INFO] Booting worker with pid: 28066
DEBUG:root:=== trying again
INFO:root:microservice ready
------------------------------ Captured log setup ------------------------------
INFO     root:helpers.py:65 starting: seldon-core-microservice MyModel REST --service-type MODEL --persistence 0 --tracing
DEBUG    root:helpers.py:80 === trying again
DEBUG    root:helpers.py:80 === trying again
INFO     root:helpers.py:88 microservice ready
----------------------------- Captured stdout call -----------------------------
127.0.0.1 - - [28/Jul/2020:14:21:43 +0000] "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65 "-" "python-requests/2.24.0"
127.0.0.1 - - [28/Jul/2020:14:21:43 +0000] "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45 "-" "python-requests/2.24.0"
----------------------------- Captured stderr call -----------------------------
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): 127.0.0.1:5000
2020-07-28 14:21:43,401 - MyModel:predict:26 - INFO:  Predict called - will run idenity function
DEBUG:urllib3.connectionpool:http://127.0.0.1:5000 "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): 127.0.0.1:5000
2020-07-28 14:21:43,707 - MyModel:send_feedback:40 - INFO:  Send feedback called
DEBUG:urllib3.connectionpool:http://127.0.0.1:5000 "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45
------------------------------ Captured log call -------------------------------
DEBUG    urllib3.connectionpool:connectionpool.py:230 Starting new HTTP connection (1): 127.0.0.1:5000
DEBUG    urllib3.connectionpool:connectionpool.py:442 http://127.0.0.1:5000 "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65
DEBUG    urllib3.connectionpool:connectionpool.py:230 Starting new HTTP connection (1): 127.0.0.1:5000
DEBUG    urllib3.connectionpool:connectionpool.py:442 http://127.0.0.1:5000 "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45
--------------------------- Captured stderr teardown ---------------------------
[2020-07-28 14:21:43 +0000] [28024] [INFO] Handling signal: term
____________________________ test_model_feedback_ok ____________________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_model_microservice.py", line 441, in test_model_feedback_ok
    assert user_object.rewards[-1] == 1.0
IndexError: list index out of range
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "my-model-name",
  "versions": [
    "model-version"
  ],
  "platform": "model-platform",
  "inputs": [
    {
      "name": "input",
      "datatype": "BYTES",
      "shape": [
        1
      ]
    }
  ],
  "outputs": [
    {
      "name": "output",
      "datatype": "BYTES",
      "shape": [
        1
      ]
    }
  ]
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22ndarray%22:%5B%5D%7D%7D,%22reward%22:1.0%7D' [GET]>
INFO:root:None
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "my-model-name",
  "versions": [
    "model-version"
  ],
  "platform": "model-platform",
  "inputs": [
    {
      "name": "input",
      "datatype": "BYTES",
      "shape": [
        1
      ]
    }
  ],
  "outputs": [
    {
      "name": "output",
      "datatype": "BYTES",
      "shape": [
        1
      ]
    }
  ]
}
DEBUG    seldon_core.wrapper:wrapper.py:73 REST Request: <Request 'http://localhost/send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22ndarray%22:%5B%5D%7D%7D,%22reward%22:1.0%7D' [GET]>
INFO     root:test_model_microservice.py:439 None
_______________________ test_unimplemented_feedback_raw ________________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_model_microservice.py", line 992, in test_unimplemented_feedback_raw
    j = json.loads(rv.data)
  File "/opt/conda/lib/python3.7/json/__init__.py", line 348, in loads
    return _default_decoder.decode(s)
  File "/opt/conda/lib/python3.7/json/decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "/opt/conda/lib/python3.7/json/decoder.py", line 355, in raw_decode
    raise JSONDecodeError("Expecting value", s, err.value) from None
json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22ndarray%22:%5B%5D%7D%7D,%22reward%22:1.0%7D' [GET]>
ERROR:seldon_core.wrapper:Exception on /send-feedback [GET]
Traceback (most recent call last):
  File "/workspace/source/python/.tox/azure/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "/workspace/source/python/.tox/azure/lib/python3.7/site-packages/flask/app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/workspace/source/python/.tox/azure/lib/python3.7/site-packages/flask_cors/extension.py", line 161, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/workspace/source/python/.tox/azure/lib/python3.7/site-packages/flask/app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/workspace/source/python/.tox/azure/lib/python3.7/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/workspace/source/python/.tox/azure/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "/workspace/source/python/.tox/azure/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/workspace/source/python/seldon_core/wrapper.py", line 75, in SendFeedback
    user_model, requestJson, PRED_UNIT_ID, seldon_metrics
  File "/workspace/source/python/seldon_core/seldon_methods.py", line 183, in send_feedback
    raise Exception("TODO: Not implemented")
Exception: TODO: Not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:73 REST Request: <Request 'http://localhost/send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22ndarray%22:%5B%5D%7D%7D,%22reward%22:1.0%7D' [GET]>
ERROR    seldon_core.wrapper:app.py:1892 Exception on /send-feedback [GET]
Traceback (most recent call last):
  File "/workspace/source/python/.tox/azure/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "/workspace/source/python/.tox/azure/lib/python3.7/site-packages/flask/app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/workspace/source/python/.tox/azure/lib/python3.7/site-packages/flask_cors/extension.py", line 161, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/workspace/source/python/.tox/azure/lib/python3.7/site-packages/flask/app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/workspace/source/python/.tox/azure/lib/python3.7/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/workspace/source/python/.tox/azure/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "/workspace/source/python/.tox/azure/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/workspace/source/python/seldon_core/wrapper.py", line 75, in SendFeedback
    user_model, requestJson, PRED_UNIT_ID, seldon_metrics
  File "/workspace/source/python/seldon_core/seldon_methods.py", line 183, in send_feedback
    raise Exception("TODO: Not implemented")
Exception: TODO: Not implemented
___________________________ test_router_feedback_ok ____________________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_router_microservice.py", line 227, in test_router_feedback_ok
    assert rv.status_code == 200
AssertionError: assert 400 == 200
 +  where 400 = <Response 146 bytes [400 BAD REQUEST]>.status_code
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22ndarray%22:%5B%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%221%22:1%7D%7D%7D,%22reward%22:1.0%7D' [GET]>
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
INFO:root:Feedback called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
ERROR:seldon_core.wrapper:{'status': {'status': 1, 'info': 'Unknown data type returned as payload (must be list or np array):None', 'code': -1, 'reason': 'MICROSERVICE_BAD_DATA'}}
INFO:root:{'status': {'code': -1, 'info': 'Unknown data type returned as payload (must be list or np array):None', 'reason': 'MICROSERVICE_BAD_DATA', 'status': 1}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:73 REST Request: <Request 'http://localhost/send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22ndarray%22:%5B%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%221%22:1%7D%7D%7D,%22reward%22:1.0%7D' [GET]>
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
INFO     root:test_router_microservice.py:30 Feedback called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
ERROR    seldon_core.wrapper:wrapper.py:44 {'status': {'status': 1, 'info': 'Unknown data type returned as payload (must be list or np array):None', 'code': -1, 'reason': 'MICROSERVICE_BAD_DATA'}}
INFO     root:test_router_microservice.py:226 {'status': {'code': -1, 'info': 'Unknown data type returned as payload (must be list or np array):None', 'reason': 'MICROSERVICE_BAD_DATA', 'status': 1}}
_____________________________ test_proto_feedback ______________________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_router_microservice.py", line 315, in test_proto_feedback
    resp = app.SendFeedback(feedback, None)
  File "/workspace/source/python/seldon_core/wrapper.py", line 203, in SendFeedback
    self.user_model, feedback_grpc, PRED_UNIT_ID, self.seldon_metrics
  File "/workspace/source/python/seldon_core/seldon_methods.py", line 160, in send_feedback
    request_proto
UnboundLocalError: local variable 'request_proto' referenced before assignment
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}

----------- coverage: platform linux, python 3.7.1-final-0 -----------
Name                                                                                                        Stmts   Miss  Cover
-------------------------------------------------------------------------------------------------------------------------------
.tox/azure/lib/python3.7/site-packages/seldon_core/__init__.py                                                  2      0   100%
.tox/azure/lib/python3.7/site-packages/seldon_core/api_tester.py                                               81     81     0%
.tox/azure/lib/python3.7/site-packages/seldon_core/app.py                                                      36      3    92%
.tox/azure/lib/python3.7/site-packages/seldon_core/batch_processor.py                                          94     94     0%
.tox/azure/lib/python3.7/site-packages/seldon_core/flask_utils.py                                              44     24    45%
.tox/azure/lib/python3.7/site-packages/seldon_core/imports_helper.py                                           27      6    78%
.tox/azure/lib/python3.7/site-packages/seldon_core/metadata.py                                                 32      3    91%
.tox/azure/lib/python3.7/site-packages/seldon_core/metrics.py                                                 130     76    42%
.tox/azure/lib/python3.7/site-packages/seldon_core/microservice.py                                            201     65    68%
.tox/azure/lib/python3.7/site-packages/seldon_core/microservice_tester.py                                     140    140     0%
.tox/azure/lib/python3.7/site-packages/seldon_core/persistence.py                                              45     23    49%
.tox/azure/lib/python3.7/site-packages/seldon_core/proto/__init__.py                                            0      0   100%
.tox/azure/lib/python3.7/site-packages/seldon_core/proto/prediction_pb2.py                                    160      0   100%
.tox/azure/lib/python3.7/site-packages/seldon_core/proto/prediction_pb2_grpc.py                               137     89    35%
.tox/azure/lib/python3.7/site-packages/seldon_core/proto/tensorflow/core/framework/__init__.py                  3      1    67%
.tox/azure/lib/python3.7/site-packages/seldon_core/proto/tensorflow/core/framework/resource_handle_pb2.py      22      0   100%
.tox/azure/lib/python3.7/site-packages/seldon_core/proto/tensorflow/core/framework/tensor_pb2.py               36      0   100%
.tox/azure/lib/python3.7/site-packages/seldon_core/proto/tensorflow/core/framework/tensor_shape_pb2.py         18      0   100%
.tox/azure/lib/python3.7/site-packages/seldon_core/proto/tensorflow/core/framework/types_pb2.py                62      0   100%
.tox/azure/lib/python3.7/site-packages/seldon_core/seldon_client.py                                           599    599     0%
.tox/azure/lib/python3.7/site-packages/seldon_core/seldon_methods.py                                          244    190    22%
.tox/azure/lib/python3.7/site-packages/seldon_core/serving_test_gen.py                                         40     40     0%
.tox/azure/lib/python3.7/site-packages/seldon_core/storage.py                                                 155    126    19%
.tox/azure/lib/python3.7/site-packages/seldon_core/user_model.py                                              162     92    43%
.tox/azure/lib/python3.7/site-packages/seldon_core/utils.py                                                   282    177    37%
.tox/azure/lib/python3.7/site-packages/seldon_core/version.py                                                   1      0   100%
.tox/azure/lib/python3.7/site-packages/seldon_core/wrapper.py                                                 145     75    48%
seldon_core/__init__.py                                                                                         2      0   100%
seldon_core/api_tester.py                                                                                      81     38    53%
seldon_core/app.py                                                                                             36     22    39%
seldon_core/batch_processor.py                                                                                 94     94     0%
seldon_core/flask_utils.py                                                                                     44      3    93%
seldon_core/imports_helper.py                                                                                  27      6    78%
seldon_core/metadata.py                                                                                        32      0   100%
seldon_core/metrics.py                                                                                        130      5    96%
seldon_core/microservice.py                                                                                   201    120    40%
seldon_core/microservice_tester.py                                                                            140     43    69%
seldon_core/persistence.py                                                                                     45     23    49%
seldon_core/proto/__init__.py                                                                                   0      0   100%
seldon_core/proto/prediction_pb2.py                                                                           160      0   100%
seldon_core/proto/prediction_pb2_grpc.py                                                                      137     65    53%
seldon_core/proto/tensorflow/core/framework/__init__.py                                                         3      1    67%
seldon_core/proto/tensorflow/core/framework/resource_handle_pb2.py                                             22      0   100%
seldon_core/proto/tensorflow/core/framework/tensor_pb2.py                                                      36      0   100%
seldon_core/proto/tensorflow/core/framework/tensor_shape_pb2.py                                                18      0   100%
seldon_core/proto/tensorflow/core/framework/types_pb2.py                                                       62      0   100%
seldon_core/seldon_client.py                                                                                  599    284    53%
seldon_core/seldon_methods.py                                                                                 244     10    96%
seldon_core/serving_test_gen.py                                                                                40     40     0%
seldon_core/storage.py                                                                                        155     53    66%
seldon_core/user_model.py                                                                                     162     30    81%
seldon_core/utils.py                                                                                          282     43    85%
seldon_core/version.py                                                                                          1      0   100%
seldon_core/wrapper.py                                                                                        145     11    92%
-------------------------------------------------------------------------------------------------------------------------------
TOTAL                                                                                                        5796   2795    52%

=========================== short test summary info ============================
FAILED tests/test_metrics.py::test_seldon_metrics_predict[True-UserObject] - ...
FAILED tests/test_metrics.py::test_seldon_metrics_predict[True-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_predict[False-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_predict[False-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_send_feedback[UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_send_feedback[UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_aggregate[True-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_aggregate[True-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_aggregate[False-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_aggregate[False-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_input[True-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_input[True-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_input[False-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_input[False-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_output[True-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_output[True-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_output[False-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_output[False-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_route[True-UserObject] - Ke...
FAILED tests/test_metrics.py::test_seldon_metrics_route[True-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_route[False-UserObject] - K...
FAILED tests/test_metrics.py::test_seldon_metrics_route[False-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_predict[True-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_predict[True-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_predict[False-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_predict[False-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_aggregate[True-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_aggregate[True-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_aggregate[False-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_aggregate[False-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_input[True-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_input[True-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_input[False-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_input[False-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_output[True-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_output[True-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_output[False-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_output[False-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_route[True-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_route[True-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_route[False-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_route[False-UserObjectLowLevelGrpc]
FAILED tests/test_microservice.py::test_model_template_app_rest - AssertionEr...
FAILED tests/test_microservice.py::test_model_template_app_rest_submodule[microservice0]
FAILED tests/test_microservice.py::test_model_template_app_grpc[microservice0]
FAILED tests/test_microservice.py::test_model_template_app_tracing_config[microservice0]
FAILED tests/test_model_microservice.py::test_model_feedback_ok - IndexError:...
FAILED tests/test_model_microservice.py::test_unimplemented_feedback_raw - js...
FAILED tests/test_router_microservice.py::test_router_feedback_ok - assert 40...
FAILED tests/test_router_microservice.py::test_proto_feedback - UnboundLocalE...
============= 50 failed, 314 passed, 7 skipped in 93.49s (0:01:33) =============
ERROR: InvocationError for command /workspace/source/python/.tox/azure/bin/pytest (exited with code 1)
all create: /workspace/source/python/.tox/all
all installdeps: tenacity, pytest, pytest-cov, Pillow
all inst: /workspace/source/python/.tox/.tmp/package/1/seldon-core-1.2.2.zip
all installed: absl-py==0.9.0,astunparse==1.6.3,attrs==19.3.0,azure-common==1.1.25,azure-storage-blob==2.1.0,azure-storage-common==2.1.0,cachetools==4.1.1,certifi==2020.6.20,cffi==1.14.1,chardet==3.0.4,click==7.1.2,configparser==5.0.0,coverage==5.2.1,cryptography==3.0,Flask==1.1.2,Flask-Cors==3.0.8,Flask-OpenTracing==1.1.0,flatbuffers==1.12,gast==0.3.3,google-api-core==1.22.0,google-auth==1.19.2,google-auth-oauthlib==0.4.1,google-cloud-core==1.3.0,google-cloud-storage==1.30.0,google-crc32c==0.1.0,google-pasta==0.2.0,google-resumable-media==0.7.0,googleapis-common-protos==1.52.0,grpcio==1.30.0,grpcio-opentracing==1.1.4,gunicorn==20.0.4,h5py==2.10.0,idna==2.10,importlib-metadata==1.7.0,itsdangerous==1.1.0,jaeger-client==4.3.0,Jinja2==2.11.2,jsonschema==3.2.0,Keras-Preprocessing==1.1.2,Markdown==3.2.2,MarkupSafe==1.1.1,minio==5.0.10,more-itertools==8.4.0,numpy==1.19.1,oauthlib==3.1.0,opentracing==2.3.0,opt-einsum==3.3.0,packaging==20.4,Pillow==7.2.0,pluggy==0.13.1,prometheus-client==0.8.0,protobuf==3.12.2,py==1.9.0,pyasn1==0.4.8,pyasn1-modules==0.2.8,pycparser==2.20,pyparsing==2.4.7,pyrsistent==0.16.0,pytest==5.4.3,pytest-cov==2.10.0,python-dateutil==2.8.1,pytz==2020.1,PyYAML==5.3.1,redis==3.5.3,requests==2.24.0,requests-oauthlib==1.3.0,rsa==4.6,scipy==1.4.1,seldon-core @ file:///workspace/source/python/.tox/.tmp/package/1/seldon-core-1.2.2.zip,six==1.15.0,tenacity==6.2.0,tensorboard==2.3.0,tensorboard-plugin-wit==1.7.0,tensorflow==2.3.0,tensorflow-estimator==2.3.0,termcolor==1.1.0,threadloop==1.0.2,thrift==0.13.0,tornado==6.0.4,urllib3==1.25.10,wcwidth==0.2.5,Werkzeug==1.0.1,wrapt==1.12.1,zipp==3.1.0
all run-test-pre: PYTHONHASHSEED='417737162'
all run-test: commands[0] | pytest
============================= test session starts ==============================
platform linux -- Python 3.7.1, pytest-5.4.3, py-1.9.0, pluggy-0.13.1
cachedir: .tox/all/.pytest_cache
rootdir: /workspace/source/python, inifile: setup.cfg
plugins: cov-2.10.0
collected 371 items

tests/test_api_tester.py ..                                              [  0%]
tests/test_application_exception_microservice.py ..                      [  1%]
tests/test_azure_storage.py ......                                       [  2%]
tests/test_combiner_microservice.py .....................                [  8%]
tests/test_metadata.py ................................................. [ 21%]
...                                                                      [ 22%]
tests/test_metrics.py ...................FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF [ 35%]
FFFFFFFFFFF........                                                      [ 40%]
tests/test_microservice.py .F...FF..F...                                 [ 44%]
tests/test_microservice_tester.py .....                                  [ 45%]
tests/test_model_microservice.py ..........F............................ [ 56%]
.......F                                                                 [ 58%]
tests/test_router_microservice.py ........F....F...                      [ 63%]
tests/test_s3_storage.py ...                                             [ 63%]
tests/test_seldon_client.py ..................................           [ 73%]
tests/test_storage.py ........                                           [ 75%]
tests/test_transformer_microservice.py ................................. [ 84%]
........                                                                 [ 86%]
tests/test_user_model.py ....                                            [ 87%]
tests/test_utils.py ...............................................      [100%]

=================================== FAILURES ===================================
_________________ test_seldon_metrics_predict[True-UserObject] _________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 345, in test_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Predict called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:57 REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:159 Predict called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:65 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
_____________ test_seldon_metrics_predict[True-UserObjectLowLevel] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 345, in test_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Predict raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:57 REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:207 Predict raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:65 REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
________________ test_seldon_metrics_predict[False-UserObject] _________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 345, in test_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Predict called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:57 REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:159 Predict called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:65 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
____________ test_seldon_metrics_predict[False-UserObjectLowLevel] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 345, in test_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Predict raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:57 REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:207 Predict raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:65 REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
________________ test_seldon_metrics_send_feedback[UserObject] _________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 364, in test_seldon_metrics_send_feedback
    assert rv.status_code == 200
AssertionError: assert 500 == 200
 +  where 500 = <Response streamed [500 INTERNAL SERVER ERROR]>.status_code
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/send-feedback?json=%7B%22reward%22:%2042%7D' [GET]>
ERROR:seldon_core.wrapper:Exception on /send-feedback [GET]
Traceback (most recent call last):
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask/app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask_cors/extension.py", line 161, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask/app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/workspace/source/python/seldon_core/wrapper.py", line 75, in SendFeedback
    user_model, requestJson, PRED_UNIT_ID, seldon_metrics
  File "/workspace/source/python/seldon_core/seldon_methods.py", line 183, in send_feedback
    raise Exception("TODO: Not implemented")
Exception: TODO: Not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:73 REST Request: <Request 'http://localhost/send-feedback?json=%7B%22reward%22:%2042%7D' [GET]>
ERROR    seldon_core.wrapper:app.py:1892 Exception on /send-feedback [GET]
Traceback (most recent call last):
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask/app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask_cors/extension.py", line 161, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask/app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/workspace/source/python/seldon_core/wrapper.py", line 75, in SendFeedback
    user_model, requestJson, PRED_UNIT_ID, seldon_metrics
  File "/workspace/source/python/seldon_core/seldon_methods.py", line 183, in send_feedback
    raise Exception("TODO: Not implemented")
Exception: TODO: Not implemented
____________ test_seldon_metrics_send_feedback[UserObjectLowLevel] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 364, in test_seldon_metrics_send_feedback
    assert rv.status_code == 200
AssertionError: assert 500 == 200
 +  where 500 = <Response streamed [500 INTERNAL SERVER ERROR]>.status_code
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/send-feedback?json=%7B%22reward%22:%2042%7D' [GET]>
ERROR:seldon_core.wrapper:Exception on /send-feedback [GET]
Traceback (most recent call last):
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask/app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask_cors/extension.py", line 161, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask/app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/workspace/source/python/seldon_core/wrapper.py", line 75, in SendFeedback
    user_model, requestJson, PRED_UNIT_ID, seldon_metrics
  File "/workspace/source/python/seldon_core/seldon_methods.py", line 183, in send_feedback
    raise Exception("TODO: Not implemented")
Exception: TODO: Not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:73 REST Request: <Request 'http://localhost/send-feedback?json=%7B%22reward%22:%2042%7D' [GET]>
ERROR    seldon_core.wrapper:app.py:1892 Exception on /send-feedback [GET]
Traceback (most recent call last):
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask/app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask_cors/extension.py", line 161, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask/app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/workspace/source/python/seldon_core/wrapper.py", line 75, in SendFeedback
    user_model, requestJson, PRED_UNIT_ID, seldon_metrics
  File "/workspace/source/python/seldon_core/seldon_methods.py", line 183, in send_feedback
    raise Exception("TODO: Not implemented")
Exception: TODO: Not implemented
________________ test_seldon_metrics_aggregate[True-UserObject] ________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 399, in test_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO:root:Aggregate called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:112 REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO     root:test_metrics.py:163 Aggregate called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:116 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
____________ test_seldon_metrics_aggregate[True-UserObjectLowLevel] ____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 399, in test_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO:root:Aggregate raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:112 REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO     root:test_metrics.py:214 Aggregate raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:116 REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
_______________ test_seldon_metrics_aggregate[False-UserObject] ________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 399, in test_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO:root:Aggregate called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:112 REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO     root:test_metrics.py:163 Aggregate called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:116 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
___________ test_seldon_metrics_aggregate[False-UserObjectLowLevel] ____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 399, in test_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO:root:Aggregate raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:112 REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO     root:test_metrics.py:214 Aggregate raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:116 REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
_____________ test_seldon_metrics_transform_input[True-UserObject] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 426, in test_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform input called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:82 REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:167 Transform input called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:86 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
_________ test_seldon_metrics_transform_input[True-UserObjectLowLevel] _________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 426, in test_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform input raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:82 REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:221 Transform input raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:86 REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
____________ test_seldon_metrics_transform_input[False-UserObject] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 426, in test_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform input called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:82 REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:167 Transform input called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:86 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
________ test_seldon_metrics_transform_input[False-UserObjectLowLevel] _________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 426, in test_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform input raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:82 REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:221 Transform input raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:86 REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
____________ test_seldon_metrics_transform_output[True-UserObject] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 453, in test_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform output called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:92 REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:171 Transform output called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:96 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
________ test_seldon_metrics_transform_output[True-UserObjectLowLevel] _________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 453, in test_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform output raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:92 REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:228 Transform output raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:96 REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
____________ test_seldon_metrics_transform_output[False-UserObject] ____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 453, in test_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform output called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:92 REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:171 Transform output called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:96 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
________ test_seldon_metrics_transform_output[False-UserObjectLowLevel] ________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 453, in test_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform output raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:92 REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:228 Transform output raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:96 REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
__________________ test_seldon_metrics_route[True-UserObject] __________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 478, in test_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Route called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:class_names is not implemented
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': [[22]], 'names': ['t:0']}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:102 REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:175 Route called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:106 REST Response: {'data': {'ndarray': [[22]], 'names': ['t:0']}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
______________ test_seldon_metrics_route[True-UserObjectLowLevel] ______________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 478, in test_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Route raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': [22]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:102 REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:235 Route raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:106 REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': [22]}}
_________________ test_seldon_metrics_route[False-UserObject] __________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 478, in test_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Route called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:class_names is not implemented
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': [[22]], 'names': ['t:0']}, 'meta': {}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:102 REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:175 Route called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:106 REST Response: {'data': {'ndarray': [[22]], 'names': ['t:0']}, 'meta': {}}
_____________ test_seldon_metrics_route[False-UserObjectLowLevel] ______________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 478, in test_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Route raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': [22]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:102 REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:235 Route raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:106 REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': [22]}}
______________ test_proto_seldon_metrics_predict[True-UserObject] ______________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 506, in test_proto_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Predict called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:159 Predict called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
________ test_proto_seldon_metrics_predict[True-UserObjectLowLevelGrpc] ________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 506, in test_proto_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Predict raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:256 Predict raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
_____________ test_proto_seldon_metrics_predict[False-UserObject] ______________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 506, in test_proto_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Predict called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:159 Predict called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
_______ test_proto_seldon_metrics_predict[False-UserObjectLowLevelGrpc] ________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 506, in test_proto_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Predict raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:256 Predict raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
_____________ test_proto_seldon_metrics_aggregate[True-UserObject] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 540, in test_proto_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Aggregate called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:163 Aggregate called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
_______ test_proto_seldon_metrics_aggregate[True-UserObjectLowLevelGrpc] _______
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 540, in test_proto_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Aggregate raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:269 Aggregate raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
____________ test_proto_seldon_metrics_aggregate[False-UserObject] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 540, in test_proto_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Aggregate called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:163 Aggregate called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
______ test_proto_seldon_metrics_aggregate[False-UserObjectLowLevelGrpc] _______
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 540, in test_proto_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Aggregate raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:269 Aggregate raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
__________ test_proto_seldon_metrics_transform_input[True-UserObject] __________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 567, in test_proto_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform input called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:167 Transform input called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
____ test_proto_seldon_metrics_transform_input[True-UserObjectLowLevelGrpc] ____
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 567, in test_proto_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform input raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:282 Transform input raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
_________ test_proto_seldon_metrics_transform_input[False-UserObject] __________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 567, in test_proto_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform input called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:167 Transform input called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
___ test_proto_seldon_metrics_transform_input[False-UserObjectLowLevelGrpc] ____
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 567, in test_proto_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform input raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:282 Transform input raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
_________ test_proto_seldon_metrics_transform_output[True-UserObject] __________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 594, in test_proto_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform output called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:171 Transform output called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
___ test_proto_seldon_metrics_transform_output[True-UserObjectLowLevelGrpc] ____
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 594, in test_proto_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform output raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:295 Transform output raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
_________ test_proto_seldon_metrics_transform_output[False-UserObject] _________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 594, in test_proto_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform output called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:171 Transform output called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
___ test_proto_seldon_metrics_transform_output[False-UserObjectLowLevelGrpc] ___
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 594, in test_proto_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform output raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:295 Transform output raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
_______________ test_proto_seldon_metrics_route[True-UserObject] _______________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 621, in test_proto_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Route called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:175 Route called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
_________ test_proto_seldon_metrics_route[True-UserObjectLowLevelGrpc] _________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 621, in test_proto_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Route raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:308 Route raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
______________ test_proto_seldon_metrics_route[False-UserObject] _______________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 621, in test_proto_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Route called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:175 Route called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
________ test_proto_seldon_metrics_route[False-UserObjectLowLevelGrpc] _________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 621, in test_proto_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Route raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:308 Route raw called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
_________________________ test_model_template_app_rest _________________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_microservice.py", line 56, in test_model_template_app_rest
    assert response.json() == {"data": {"ndarray": []}, "meta": {}}
AssertionError: assert {'data': {'na...}, 'meta': {}} == {'data': {'nd...}, 'meta': {}}
  Omitting 1 identical items, use -vv to show
  Differing items:
  {'data': {'names': [], 'ndarray': []}} != {'data': {'ndarray': []}}
  Use -v to get the full diff
---------------------------- Captured stderr setup -----------------------------
INFO:root:starting: seldon-core-microservice MyModel REST --service-type MODEL --persistence 0
2020-07-28 14:24:09.122192: W tensorflow/stream_executor/platform/default/dso_loader.cc:59] Could not load dynamic library 'libcudart.so.10.1'; dlerror: libcudart.so.10.1: cannot open shared object file: No such file or directory
2020-07-28 14:24:09.122258: I tensorflow/stream_executor/cuda/cudart_stub.cc:29] Ignore above cudart dlerror if you do not have a GPU set up on your machine.
DEBUG:root:=== trying again
2020-07-28 14:24:11,377 - seldon_core.microservice:main:207 - INFO:  Starting microservice.py:main
2020-07-28 14:24:11,377 - seldon_core.microservice:main:208 - INFO:  Seldon Core version: 1.2.2
2020-07-28 14:24:11,379 - seldon_core.microservice:main:310 - INFO:  Parse JAEGER_EXTRA_TAGS []
2020-07-28 14:24:11,380 - seldon_core.microservice:main:313 - INFO:  Annotations: {}
2020-07-28 14:24:11,380 - seldon_core.microservice:main:317 - INFO:  Importing MyModel
2020-07-28 14:24:11,380 - MyModel:__init__:15 - INFO:  Initializing model
2020-07-28 14:24:11,743 - seldon_core.microservice:main:388 - INFO:  REST gunicorn microservice running on port 5000
2020-07-28 14:24:11,748 - seldon_core.microservice:main:446 - INFO:  REST metrics microservice running on port 6005
2020-07-28 14:24:11,748 - seldon_core.microservice:main:456 - INFO:  Starting servers
[2020-07-28 14:24:11 +0000] [35766] [INFO] Starting gunicorn 20.0.4
[2020-07-28 14:24:11 +0000] [35766] [INFO] Listening at: http://0.0.0.0:5000 (35766)
[2020-07-28 14:24:11 +0000] [35766] [INFO] Using worker: threads
[2020-07-28 14:24:11 +0000] [35815] [INFO] Booting worker with pid: 35815
[2020-07-28 14:24:12 +0000] [35814] [INFO] Starting gunicorn 20.0.4
[2020-07-28 14:24:12 +0000] [35814] [INFO] Listening at: http://0.0.0.0:6005 (35814)
[2020-07-28 14:24:12 +0000] [35814] [INFO] Using worker: sync
[2020-07-28 14:24:12 +0000] [35822] [INFO] Booting worker with pid: 35822
DEBUG:root:=== trying again
INFO:root:microservice ready
------------------------------ Captured log setup ------------------------------
INFO     root:helpers.py:65 starting: seldon-core-microservice MyModel REST --service-type MODEL --persistence 0
DEBUG    root:helpers.py:80 === trying again
DEBUG    root:helpers.py:80 === trying again
INFO     root:helpers.py:88 microservice ready
----------------------------- Captured stdout call -----------------------------
127.0.0.1 - - [28/Jul/2020:14:24:13 +0000] "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65 "-" "python-requests/2.24.0"
127.0.0.1 - - [28/Jul/2020:14:24:13 +0000] "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45 "-" "python-requests/2.24.0"
----------------------------- Captured stderr call -----------------------------
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): 127.0.0.1:5000
2020-07-28 14:24:13,493 - MyModel:predict:26 - INFO:  Predict called - will run idenity function
DEBUG:urllib3.connectionpool:http://127.0.0.1:5000 "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): 127.0.0.1:5000
2020-07-28 14:24:13,505 - MyModel:send_feedback:40 - INFO:  Send feedback called
DEBUG:urllib3.connectionpool:http://127.0.0.1:5000 "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45
------------------------------ Captured log call -------------------------------
DEBUG    urllib3.connectionpool:connectionpool.py:230 Starting new HTTP connection (1): 127.0.0.1:5000
DEBUG    urllib3.connectionpool:connectionpool.py:442 http://127.0.0.1:5000 "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65
DEBUG    urllib3.connectionpool:connectionpool.py:230 Starting new HTTP connection (1): 127.0.0.1:5000
DEBUG    urllib3.connectionpool:connectionpool.py:442 http://127.0.0.1:5000 "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45
--------------------------- Captured stderr teardown ---------------------------
[2020-07-28 14:24:13 +0000] [35822] [INFO] Worker exiting (pid: 35822)
[2020-07-28 14:24:13 +0000] [35814] [INFO] Handling signal: term
[2020-07-28 14:24:13 +0000] [35766] [INFO] Handling signal: term
____________ test_model_template_app_rest_submodule[microservice0] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_microservice.py", line 106, in test_model_template_app_rest_submodule
    assert response.json() == {"data": {"ndarray": []}, "meta": {}}
AssertionError: assert {'data': {'na...}, 'meta': {}} == {'data': {'nd...}, 'meta': {}}
  Omitting 1 identical items, use -vv to show
  Differing items:
  {'data': {'names': [], 'ndarray': []}} != {'data': {'ndarray': []}}
  Use -v to get the full diff
---------------------------- Captured stdout setup -----------------------------
127.0.0.1 - - [28/Jul/2020:14:24:28 +0000] "GET /metrics-endpoint HTTP/1.1" 200 0 "-" "python-requests/2.24.0"
---------------------------- Captured stderr setup -----------------------------
[2020-07-28 14:24:28 +0000] [35996] [INFO] Handling signal: term
[2020-07-28 14:24:28 +0000] [35948] [INFO] Handling signal: term
INFO:root:starting: seldon-core-microservice mymodule.my_model.MyModel REST --service-type MODEL --persistence 0
[2020-07-28 14:24:28 +0000] [36000] [INFO] Worker exiting (pid: 36000)
[2020-07-28 14:24:28 +0000] [35996] [INFO] Shutting down: Master
2020-07-28 14:24:29.500990: W tensorflow/stream_executor/platform/default/dso_loader.cc:59] Could not load dynamic library 'libcudart.so.10.1'; dlerror: libcudart.so.10.1: cannot open shared object file: No such file or directory
2020-07-28 14:24:29.501044: I tensorflow/stream_executor/cuda/cudart_stub.cc:29] Ignore above cudart dlerror if you do not have a GPU set up on your machine.
[2020-07-28 14:24:29 +0000] [35997] [INFO] Worker exiting (pid: 35997)
Error in atexit._run_exitfuncs:
Traceback (most recent call last):
  File "/opt/conda/lib/python3.7/multiprocessing/util.py", line 322, in _exit_function
    p.join()
  File "/opt/conda/lib/python3.7/multiprocessing/process.py", line 138, in join
    assert self._parent_pid == os.getpid(), 'can only join a child process'
AssertionError: can only join a child process
DEBUG:root:=== trying again
[2020-07-28 14:24:30 +0000] [35948] [INFO] Shutting down: Master
2020-07-28 14:24:31,654 - seldon_core.microservice:main:207 - INFO:  Starting microservice.py:main
2020-07-28 14:24:31,654 - seldon_core.microservice:main:208 - INFO:  Seldon Core version: 1.2.2
2020-07-28 14:24:31,657 - seldon_core.microservice:main:310 - INFO:  Parse JAEGER_EXTRA_TAGS []
2020-07-28 14:24:31,657 - seldon_core.microservice:main:313 - INFO:  Annotations: {}
2020-07-28 14:24:31,657 - seldon_core.microservice:main:321 - INFO:  Importing submodule ['mymodule.my_model', 'MyModel']
2020-07-28 14:24:31,658 - mymodule.my_model:__init__:15 - INFO:  Initializing model
2020-07-28 14:24:32,012 - seldon_core.microservice:main:388 - INFO:  REST gunicorn microservice running on port 5000
2020-07-28 14:24:32,014 - seldon_core.microservice:main:446 - INFO:  REST metrics microservice running on port 6005
2020-07-28 14:24:32,015 - seldon_core.microservice:main:456 - INFO:  Starting servers
[2020-07-28 14:24:32 +0000] [36007] [INFO] Starting gunicorn 20.0.4
[2020-07-28 14:24:32 +0000] [36007] [INFO] Listening at: http://0.0.0.0:5000 (36007)
[2020-07-28 14:24:32 +0000] [36007] [INFO] Using worker: threads
[2020-07-28 14:24:32 +0000] [36056] [INFO] Booting worker with pid: 36056
[2020-07-28 14:24:32 +0000] [36055] [INFO] Starting gunicorn 20.0.4
[2020-07-28 14:24:32 +0000] [36055] [INFO] Listening at: http://0.0.0.0:6005 (36055)
[2020-07-28 14:24:32 +0000] [36055] [INFO] Using worker: sync
[2020-07-28 14:24:32 +0000] [36061] [INFO] Booting worker with pid: 36061
DEBUG:root:=== trying again
INFO:root:microservice ready
------------------------------ Captured log setup ------------------------------
INFO     root:helpers.py:65 starting: seldon-core-microservice mymodule.my_model.MyModel REST --service-type MODEL --persistence 0
DEBUG    root:helpers.py:80 === trying again
DEBUG    root:helpers.py:80 === trying again
INFO     root:helpers.py:88 microservice ready
----------------------------- Captured stdout call -----------------------------
127.0.0.1 - - [28/Jul/2020:14:24:33 +0000] "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65 "-" "python-requests/2.24.0"
127.0.0.1 - - [28/Jul/2020:14:24:33 +0000] "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45 "-" "python-requests/2.24.0"
----------------------------- Captured stderr call -----------------------------
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): 127.0.0.1:5000
2020-07-28 14:24:33,740 - mymodule.my_model:predict:26 - INFO:  Predict called - will run idenity function
DEBUG:urllib3.connectionpool:http://127.0.0.1:5000 "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): 127.0.0.1:5000
2020-07-28 14:24:33,757 - mymodule.my_model:send_feedback:40 - INFO:  Send feedback called
DEBUG:urllib3.connectionpool:http://127.0.0.1:5000 "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45
------------------------------ Captured log call -------------------------------
DEBUG    urllib3.connectionpool:connectionpool.py:230 Starting new HTTP connection (1): 127.0.0.1:5000
DEBUG    urllib3.connectionpool:connectionpool.py:442 http://127.0.0.1:5000 "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65
DEBUG    urllib3.connectionpool:connectionpool.py:230 Starting new HTTP connection (1): 127.0.0.1:5000
DEBUG    urllib3.connectionpool:connectionpool.py:442 http://127.0.0.1:5000 "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45
--------------------------- Captured stderr teardown ---------------------------
[2020-07-28 14:24:33 +0000] [36055] [INFO] Handling signal: term
[2020-07-28 14:24:33 +0000] [36007] [INFO] Handling signal: term
_________________ test_model_template_app_grpc[microservice0] __________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_microservice.py", line 130, in test_model_template_app_grpc
    response = stub.SendFeedback(request=request)
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/grpc/_channel.py", line 826, in __call__
    return _end_unary_response_blocking(state, call, False, None)
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/grpc/_channel.py", line 729, in _end_unary_response_blocking
    raise _InactiveRpcError(state)
grpc._channel._InactiveRpcError: <_InactiveRpcError of RPC that terminated with:
	status = StatusCode.UNKNOWN
	details = "Exception calling application: local variable 'request_proto' referenced before assignment"
	debug_error_string = "{"created":"@1595946278.823580059","description":"Error received from peer ipv4:0.0.0.0:5000","file":"src/core/lib/surface/call.cc","file_line":1055,"grpc_message":"Exception calling application: local variable 'request_proto' referenced before assignment","grpc_status":2}"
>
---------------------------- Captured stderr setup -----------------------------
[2020-07-28 14:24:33 +0000] [36061] [INFO] Worker exiting (pid: 36061)
INFO:root:starting: seldon-core-microservice MyModel GRPC --service-type MODEL --persistence 0
[2020-07-28 14:24:33 +0000] [36055] [INFO] Shutting down: Master
2020-07-28 14:24:34.507166: W tensorflow/stream_executor/platform/default/dso_loader.cc:59] Could not load dynamic library 'libcudart.so.10.1'; dlerror: libcudart.so.10.1: cannot open shared object file: No such file or directory
2020-07-28 14:24:34.507226: I tensorflow/stream_executor/cuda/cudart_stub.cc:29] Ignore above cudart dlerror if you do not have a GPU set up on your machine.
[2020-07-28 14:24:34 +0000] [36056] [INFO] Worker exiting (pid: 36056)
Error in atexit._run_exitfuncs:
Traceback (most recent call last):
  File "/opt/conda/lib/python3.7/multiprocessing/util.py", line 322, in _exit_function
    p.join()
  File "/opt/conda/lib/python3.7/multiprocessing/process.py", line 138, in join
    assert self._parent_pid == os.getpid(), 'can only join a child process'
AssertionError: can only join a child process
DEBUG:root:=== trying again
[2020-07-28 14:24:35 +0000] [36007] [INFO] Shutting down: Master
2020-07-28 14:24:36,764 - seldon_core.microservice:main:207 - INFO:  Starting microservice.py:main
2020-07-28 14:24:36,765 - seldon_core.microservice:main:208 - INFO:  Seldon Core version: 1.2.2
2020-07-28 14:24:36,767 - seldon_core.microservice:main:310 - INFO:  Parse JAEGER_EXTRA_TAGS []
2020-07-28 14:24:36,767 - seldon_core.microservice:main:313 - INFO:  Annotations: {}
2020-07-28 14:24:36,768 - seldon_core.microservice:main:317 - INFO:  Importing MyModel
2020-07-28 14:24:36,768 - MyModel:__init__:15 - INFO:  Initializing model
2020-07-28 14:24:37,076 - seldon_core.microservice:main:446 - INFO:  REST metrics microservice running on port 6005
2020-07-28 14:24:37,078 - seldon_core.microservice:main:456 - INFO:  Starting servers
2020-07-28 14:24:37,123 - seldon_core.microservice:grpc_prediction_server:422 - INFO:  GRPC microservice Running on port 5000
[2020-07-28 14:24:37 +0000] [36117] [INFO] Starting gunicorn 20.0.4
[2020-07-28 14:24:37 +0000] [36117] [INFO] Listening at: http://0.0.0.0:6005 (36117)
[2020-07-28 14:24:37 +0000] [36117] [INFO] Using worker: sync
[2020-07-28 14:24:37 +0000] [36128] [INFO] Booting worker with pid: 36128
DEBUG:root:=== trying again
INFO:root:microservice ready
------------------------------ Captured log setup ------------------------------
INFO     root:helpers.py:65 starting: seldon-core-microservice MyModel GRPC --service-type MODEL --persistence 0
DEBUG    root:helpers.py:80 === trying again
DEBUG    root:helpers.py:80 === trying again
INFO     root:helpers.py:88 microservice ready
----------------------------- Captured stderr call -----------------------------
INFO:root:Calling method... try: 1
2020-07-28 14:24:38,818 - MyModel:predict:26 - INFO:  Predict called - will run idenity function
2020-07-28 14:24:38,822 - grpc._server:_call_behavior:445 - ERROR:  Exception calling application: local variable 'request_proto' referenced before assignment
Traceback (most recent call last):
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/grpc/_server.py", line 435, in _call_behavior
    response_or_iterator = behavior(argument, context)
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/seldon_core/wrapper.py", line 203, in SendFeedback
    self.user_model, feedback_grpc, PRED_UNIT_ID, self.seldon_metrics
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/seldon_core/seldon_methods.py", line 160, in send_feedback
    request_proto
UnboundLocalError: local variable 'request_proto' referenced before assignment
------------------------------ Captured log call -------------------------------
INFO     root:test_microservice.py:27 Calling method... try: 1
--------------------------- Captured stderr teardown ---------------------------
[2020-07-28 14:24:38 +0000] [36128] [INFO] Worker exiting (pid: 36128)
[2020-07-28 14:24:38 +0000] [36117] [INFO] Handling signal: term
____________ test_model_template_app_tracing_config[microservice0] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_microservice.py", line 212, in test_model_template_app_tracing_config
    assert response.json() == {"data": {"ndarray": []}, "meta": {}}
AssertionError: assert {'data': {'na...}, 'meta': {}} == {'data': {'nd...}, 'meta': {}}
  Omitting 1 identical items, use -vv to show
  Differing items:
  {'data': {'names': [], 'ndarray': []}} != {'data': {'ndarray': []}}
  Use -v to get the full diff
---------------------------- Captured stderr setup -----------------------------
[2020-07-28 14:24:48 +0000] [36250] [INFO] Worker exiting (pid: 36250)
INFO:root:starting: seldon-core-microservice MyModel REST --service-type MODEL --persistence 0 --tracing
[2020-07-28 14:24:48 +0000] [36262] [INFO] Booting worker with pid: 36262
[2020-07-28 14:24:48 +0000] [36241] [INFO] Handling signal: term
[2020-07-28 14:24:48 +0000] [36262] [INFO] Worker exiting (pid: 36262)
[2020-07-28 14:24:49 +0000] [36241] [INFO] Shutting down: Master
2020-07-28 14:24:49.721854: W tensorflow/stream_executor/platform/default/dso_loader.cc:59] Could not load dynamic library 'libcudart.so.10.1'; dlerror: libcudart.so.10.1: cannot open shared object file: No such file or directory
2020-07-28 14:24:49.721916: I tensorflow/stream_executor/cuda/cudart_stub.cc:29] Ignore above cudart dlerror if you do not have a GPU set up on your machine.
DEBUG:root:=== trying again
2020-07-28 14:24:52,265 - seldon_core.microservice:main:207 - INFO:  Starting microservice.py:main
2020-07-28 14:24:52,265 - seldon_core.microservice:main:208 - INFO:  Seldon Core version: 1.2.2
2020-07-28 14:24:52,268 - seldon_core.microservice:main:310 - INFO:  Parse JAEGER_EXTRA_TAGS []
2020-07-28 14:24:52,268 - seldon_core.microservice:main:313 - INFO:  Annotations: {}
2020-07-28 14:24:52,268 - seldon_core.microservice:main:317 - INFO:  Importing MyModel
2020-07-28 14:24:52,269 - MyModel:__init__:15 - INFO:  Initializing model
2020-07-28 14:24:52,269 - seldon_core.microservice:setup_tracing:145 - INFO:  Initializing tracing
2020-07-28 14:24:52,320 - seldon_core.microservice:setup_tracing:166 - INFO:  Loading tracing config from /workspace/source/python/tests/resources/tracing_config/tracing.yaml
/workspace/source/python/.tox/all/lib/python3.7/site-packages/seldon_core/microservice.py:170: YAMLLoadWarning: calling yaml.load() without Loader=... is deprecated, as the default Loader is unsafe. Please read https://msg.pyyaml.org/load for full details.
  config_dict = yaml.load(stream)
2020-07-28 14:24:52,323 - jaeger_tracing:_create_local_agent_channel:446 - INFO:  Initializing Jaeger Tracer with UDP reporter
2020-07-28 14:24:52,326 - jaeger_tracing:new_tracer:384 - INFO:  Using sampler ConstSampler(True)
2020-07-28 14:24:52,329 - jaeger_tracing:_initialize_global_tracer:436 - INFO:  opentracing.tracer initialized to <jaeger_client.tracer.Tracer object at 0x7fb2a6b855f8>[app_name=MyModel]
2020-07-28 14:24:52,684 - seldon_core.microservice:main:388 - INFO:  REST gunicorn microservice running on port 5000
2020-07-28 14:24:52,687 - seldon_core.microservice:main:446 - INFO:  REST metrics microservice running on port 6005
2020-07-28 14:24:52,687 - seldon_core.microservice:main:456 - INFO:  Starting servers
[2020-07-28 14:24:52 +0000] [36255] [INFO] Starting gunicorn 20.0.4
[2020-07-28 14:24:52 +0000] [36255] [INFO] Listening at: http://0.0.0.0:5000 (36255)
[2020-07-28 14:24:52 +0000] [36255] [INFO] Using worker: threads
[2020-07-28 14:24:52 +0000] [36306] [INFO] Booting worker with pid: 36306
[2020-07-28 14:24:53 +0000] [36305] [INFO] Starting gunicorn 20.0.4
[2020-07-28 14:24:53 +0000] [36305] [INFO] Listening at: http://0.0.0.0:6005 (36305)
[2020-07-28 14:24:53 +0000] [36305] [INFO] Using worker: sync
[2020-07-28 14:24:53 +0000] [36313] [INFO] Booting worker with pid: 36313
DEBUG:root:=== trying again
INFO:root:microservice ready
------------------------------ Captured log setup ------------------------------
INFO     root:helpers.py:65 starting: seldon-core-microservice MyModel REST --service-type MODEL --persistence 0 --tracing
DEBUG    root:helpers.py:80 === trying again
DEBUG    root:helpers.py:80 === trying again
INFO     root:helpers.py:88 microservice ready
----------------------------- Captured stdout call -----------------------------
127.0.0.1 - - [28/Jul/2020:14:24:53 +0000] "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45 "-" "python-requests/2.24.0"
127.0.0.1 - - [28/Jul/2020:14:24:53 +0000] "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65 "-" "python-requests/2.24.0"
----------------------------- Captured stderr call -----------------------------
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): 127.0.0.1:5000
2020-07-28 14:24:53,975 - MyModel:predict:26 - INFO:  Predict called - will run idenity function
DEBUG:urllib3.connectionpool:http://127.0.0.1:5000 "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): 127.0.0.1:5000
2020-07-28 14:24:53,993 - MyModel:send_feedback:40 - INFO:  Send feedback called
DEBUG:urllib3.connectionpool:http://127.0.0.1:5000 "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45
------------------------------ Captured log call -------------------------------
DEBUG    urllib3.connectionpool:connectionpool.py:230 Starting new HTTP connection (1): 127.0.0.1:5000
DEBUG    urllib3.connectionpool:connectionpool.py:442 http://127.0.0.1:5000 "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65
DEBUG    urllib3.connectionpool:connectionpool.py:230 Starting new HTTP connection (1): 127.0.0.1:5000
DEBUG    urllib3.connectionpool:connectionpool.py:442 http://127.0.0.1:5000 "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45
--------------------------- Captured stderr teardown ---------------------------
[2020-07-28 14:24:54 +0000] [36305] [INFO] Handling signal: term
[2020-07-28 14:24:54 +0000] [36255] [INFO] Handling signal: term
[2020-07-28 14:24:54 +0000] [36313] [INFO] Worker exiting (pid: 36313)
____________________________ test_model_feedback_ok ____________________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_model_microservice.py", line 441, in test_model_feedback_ok
    assert user_object.rewards[-1] == 1.0
IndexError: list index out of range
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "my-model-name",
  "versions": [
    "model-version"
  ],
  "platform": "model-platform",
  "inputs": [
    {
      "name": "input",
      "datatype": "BYTES",
      "shape": [
        1
      ]
    }
  ],
  "outputs": [
    {
      "name": "output",
      "datatype": "BYTES",
      "shape": [
        1
      ]
    }
  ]
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22ndarray%22:%5B%5D%7D%7D,%22reward%22:1.0%7D' [GET]>
INFO:root:None
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "my-model-name",
  "versions": [
    "model-version"
  ],
  "platform": "model-platform",
  "inputs": [
    {
      "name": "input",
      "datatype": "BYTES",
      "shape": [
        1
      ]
    }
  ],
  "outputs": [
    {
      "name": "output",
      "datatype": "BYTES",
      "shape": [
        1
      ]
    }
  ]
}
DEBUG    seldon_core.wrapper:wrapper.py:73 REST Request: <Request 'http://localhost/send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22ndarray%22:%5B%5D%7D%7D,%22reward%22:1.0%7D' [GET]>
INFO     root:test_model_microservice.py:439 None
_______________________ test_unimplemented_feedback_raw ________________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_model_microservice.py", line 992, in test_unimplemented_feedback_raw
    j = json.loads(rv.data)
  File "/opt/conda/lib/python3.7/json/__init__.py", line 348, in loads
    return _default_decoder.decode(s)
  File "/opt/conda/lib/python3.7/json/decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "/opt/conda/lib/python3.7/json/decoder.py", line 355, in raw_decode
    raise JSONDecodeError("Expecting value", s, err.value) from None
json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22ndarray%22:%5B%5D%7D%7D,%22reward%22:1.0%7D' [GET]>
ERROR:seldon_core.wrapper:Exception on /send-feedback [GET]
Traceback (most recent call last):
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask/app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask_cors/extension.py", line 161, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask/app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/workspace/source/python/seldon_core/wrapper.py", line 75, in SendFeedback
    user_model, requestJson, PRED_UNIT_ID, seldon_metrics
  File "/workspace/source/python/seldon_core/seldon_methods.py", line 183, in send_feedback
    raise Exception("TODO: Not implemented")
Exception: TODO: Not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:73 REST Request: <Request 'http://localhost/send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22ndarray%22:%5B%5D%7D%7D,%22reward%22:1.0%7D' [GET]>
ERROR    seldon_core.wrapper:app.py:1892 Exception on /send-feedback [GET]
Traceback (most recent call last):
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask/app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask_cors/extension.py", line 161, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask/app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/workspace/source/python/seldon_core/wrapper.py", line 75, in SendFeedback
    user_model, requestJson, PRED_UNIT_ID, seldon_metrics
  File "/workspace/source/python/seldon_core/seldon_methods.py", line 183, in send_feedback
    raise Exception("TODO: Not implemented")
Exception: TODO: Not implemented
___________________________ test_router_feedback_ok ____________________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_router_microservice.py", line 227, in test_router_feedback_ok
    assert rv.status_code == 200
AssertionError: assert 400 == 200
 +  where 400 = <Response 146 bytes [400 BAD REQUEST]>.status_code
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22ndarray%22:%5B%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%221%22:1%7D%7D%7D,%22reward%22:1.0%7D' [GET]>
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
INFO:root:Feedback called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
ERROR:seldon_core.wrapper:{'status': {'status': 1, 'info': 'Unknown data type returned as payload (must be list or np array):None', 'code': -1, 'reason': 'MICROSERVICE_BAD_DATA'}}
INFO:root:{'status': {'code': -1, 'info': 'Unknown data type returned as payload (must be list or np array):None', 'reason': 'MICROSERVICE_BAD_DATA', 'status': 1}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:73 REST Request: <Request 'http://localhost/send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22ndarray%22:%5B%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%221%22:1%7D%7D%7D,%22reward%22:1.0%7D' [GET]>
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
INFO     root:test_router_microservice.py:30 Feedback called
DEBUG    seldon_core.metrics:metrics.py:108 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}]
DEBUG    seldon_core.metrics:metrics.py:111 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:139 Updated metrics in the shared memory.
ERROR    seldon_core.wrapper:wrapper.py:44 {'status': {'status': 1, 'info': 'Unknown data type returned as payload (must be list or np array):None', 'code': -1, 'reason': 'MICROSERVICE_BAD_DATA'}}
INFO     root:test_router_microservice.py:226 {'status': {'code': -1, 'info': 'Unknown data type returned as payload (must be list or np array):None', 'reason': 'MICROSERVICE_BAD_DATA', 'status': 1}}
_____________________________ test_proto_feedback ______________________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_router_microservice.py", line 315, in test_proto_feedback
    resp = app.SendFeedback(feedback, None)
  File "/workspace/source/python/seldon_core/wrapper.py", line 203, in SendFeedback
    self.user_model, feedback_grpc, PRED_UNIT_ID, self.seldon_metrics
  File "/workspace/source/python/seldon_core/seldon_methods.py", line 160, in send_feedback
    request_proto
UnboundLocalError: local variable 'request_proto' referenced before assignment
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}

----------- coverage: platform linux, python 3.7.1-final-0 -----------
Name                                                                                           Stmts   Miss  Cover
------------------------------------------------------------------------------------------------------------------
.tox/all/lib/python3.7/site-packages/seldon_core/__init__.py                                       2      0   100%
.tox/all/lib/python3.7/site-packages/seldon_core/api_tester.py                                    81     81     0%
.tox/all/lib/python3.7/site-packages/seldon_core/app.py                                           36      3    92%
.tox/all/lib/python3.7/site-packages/seldon_core/batch_processor.py                               94     94     0%
.tox/all/lib/python3.7/site-packages/seldon_core/flask_utils.py                                   44     24    45%
.tox/all/lib/python3.7/site-packages/seldon_core/imports_helper.py                                27     12    56%
.tox/all/lib/python3.7/site-packages/seldon_core/metadata.py                                      32      3    91%
.tox/all/lib/python3.7/site-packages/seldon_core/metrics.py                                      130     76    42%
.tox/all/lib/python3.7/site-packages/seldon_core/microservice.py                                 201     65    68%
.tox/all/lib/python3.7/site-packages/seldon_core/microservice_tester.py                          140    140     0%
.tox/all/lib/python3.7/site-packages/seldon_core/persistence.py                                   45     23    49%
.tox/all/lib/python3.7/site-packages/seldon_core/proto/__init__.py                                 0      0   100%
.tox/all/lib/python3.7/site-packages/seldon_core/proto/prediction_pb2.py                         160      0   100%
.tox/all/lib/python3.7/site-packages/seldon_core/proto/prediction_pb2_grpc.py                    137     89    35%
.tox/all/lib/python3.7/site-packages/seldon_core/proto/tensorflow/core/framework/__init__.py       3      0   100%
.tox/all/lib/python3.7/site-packages/seldon_core/seldon_client.py                                599    599     0%
.tox/all/lib/python3.7/site-packages/seldon_core/seldon_methods.py                               244    190    22%
.tox/all/lib/python3.7/site-packages/seldon_core/serving_test_gen.py                              40     40     0%
.tox/all/lib/python3.7/site-packages/seldon_core/storage.py                                      155    124    20%
.tox/all/lib/python3.7/site-packages/seldon_core/user_model.py                                   162     92    43%
.tox/all/lib/python3.7/site-packages/seldon_core/utils.py                                        282    175    38%
.tox/all/lib/python3.7/site-packages/seldon_core/version.py                                        1      0   100%
.tox/all/lib/python3.7/site-packages/seldon_core/wrapper.py                                      145     75    48%
seldon_core/__init__.py                                                                            2      0   100%
seldon_core/api_tester.py                                                                         81     38    53%
seldon_core/app.py                                                                                36     22    39%
seldon_core/batch_processor.py                                                                    94     94     0%
seldon_core/flask_utils.py                                                                        44      3    93%
seldon_core/imports_helper.py                                                                     27     12    56%
seldon_core/metadata.py                                                                           32      0   100%
seldon_core/metrics.py                                                                           130      5    96%
seldon_core/microservice.py                                                                      201    120    40%
seldon_core/microservice_tester.py                                                               140     43    69%
seldon_core/persistence.py                                                                        45     23    49%
seldon_core/proto/__init__.py                                                                      0      0   100%
seldon_core/proto/prediction_pb2.py                                                              160      0   100%
seldon_core/proto/prediction_pb2_grpc.py                                                         137     65    53%
seldon_core/proto/tensorflow/core/framework/__init__.py                                            3      0   100%
seldon_core/seldon_client.py                                                                     599    284    53%
seldon_core/seldon_methods.py                                                                    244     10    96%
seldon_core/serving_test_gen.py                                                                   40     40     0%
seldon_core/storage.py                                                                           155     28    82%
seldon_core/user_model.py                                                                        162     30    81%
seldon_core/utils.py                                                                             282     31    89%
seldon_core/version.py                                                                             1      0   100%
seldon_core/wrapper.py                                                                           145     11    92%
------------------------------------------------------------------------------------------------------------------
TOTAL                                                                                           5520   2764    50%

=========================== short test summary info ============================
FAILED tests/test_metrics.py::test_seldon_metrics_predict[True-UserObject] - ...
FAILED tests/test_metrics.py::test_seldon_metrics_predict[True-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_predict[False-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_predict[False-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_send_feedback[UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_send_feedback[UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_aggregate[True-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_aggregate[True-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_aggregate[False-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_aggregate[False-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_input[True-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_input[True-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_input[False-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_input[False-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_output[True-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_output[True-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_output[False-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_output[False-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_route[True-UserObject] - Ke...
FAILED tests/test_metrics.py::test_seldon_metrics_route[True-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_route[False-UserObject] - K...
FAILED tests/test_metrics.py::test_seldon_metrics_route[False-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_predict[True-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_predict[True-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_predict[False-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_predict[False-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_aggregate[True-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_aggregate[True-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_aggregate[False-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_aggregate[False-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_input[True-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_input[True-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_input[False-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_input[False-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_output[True-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_output[True-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_output[False-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_output[False-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_route[True-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_route[True-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_route[False-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_route[False-UserObjectLowLevelGrpc]
FAILED tests/test_microservice.py::test_model_template_app_rest - AssertionEr...
FAILED tests/test_microservice.py::test_model_template_app_rest_submodule[microservice0]
FAILED tests/test_microservice.py::test_model_template_app_grpc[microservice0]
FAILED tests/test_microservice.py::test_model_template_app_tracing_config[microservice0]
FAILED tests/test_model_microservice.py::test_model_feedback_ok - IndexError:...
FAILED tests/test_model_microservice.py::test_unimplemented_feedback_raw - js...
FAILED tests/test_router_microservice.py::test_router_feedback_ok - assert 40...
FAILED tests/test_router_microservice.py::test_proto_feedback - UnboundLocalE...
================== 50 failed, 321 passed in 148.80s (0:02:28) ==================
ERROR: InvocationError for command /workspace/source/python/.tox/all/bin/pytest (exited with code 1)
___________________________________ summary ____________________________________
ERROR:   py3: commands failed
ERROR:   tensorflow: commands failed
ERROR:   gcs: commands failed
ERROR:   azure: commands failed
ERROR:   all: commands failed
Makefile:68: recipe for target 'test' failed
make: *** [test] Error 1
make: Leaving directory '/workspace/source/python'
[31m
Pipeline failed on stage 'test-python' : container 'step-test-python'. The execution of the pipeline has stopped.[0m

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-gbtxw-17[0m stage [32mseldon-executor[0m and container [32mstep-credential-initializer-7nclc[0m
{"level":"info","ts":1595944714.4846854,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/refs/heads/0.8.0-ns-support: no such file or directory"}
{"level":"info","ts":1595944714.4854262,"logger":"fallback-logger","caller":"creds-init/main.go:40","msg":"Credentials initialized."}

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-gbtxw-17[0m stage [32mseldon-executor[0m and container [32mstep-working-dir-initializer-z2qll[0m
{"level":"info","ts":1595944717.5388322,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/HEAD: no such file or directory"}
{"level":"info","ts":1595944717.5411553,"logger":"fallback-logger","caller":"bash/main.go:64","msg":"Successfully executed command \"sh -c mkdir -p /workspace/source\"; output "}

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-gbtxw-17[0m stage [32mseldon-executor[0m and container [32mstep-place-tools[0m

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-gbtxw-17[0m stage [32mseldon-executor[0m and container [32mstep-create-dir-workspace-d47w9[0m
{"level":"info","ts":1595944730.1474097,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/HEAD: no such file or directory"}
{"level":"info","ts":1595944730.1499856,"logger":"fallback-logger","caller":"bash/main.go:64","msg":"Successfully executed command \"sh -c mkdir -p /workspace/source\"; output "}

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-gbtxw-17[0m stage [32mseldon-executor[0m and container [32mstep-source-copy-workspace-tdjvl[0m
{"level":"info","ts":1595944731.1233356,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/HEAD: no such file or directory"}
{"level":"info","ts":1595944741.2503242,"logger":"fallback-logger","caller":"bash/main.go:64","msg":"Successfully executed command \"sh -c cp -r /pvc/pr-build-comment/workspace/. /workspace/source\"; output "}

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-gbtxw-17[0m stage [32mseldon-executor[0m and container [32mstep-setup-builder-home[0m

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-gbtxw-17[0m stage [32mseldon-executor[0m and container [32mstep-test-executor[0m
make: Entering directory '/workspace/source/executor'
go fmt ./api/... ./predictor/... ./k8s/...
go: downloading github.com/prometheus/client_golang v1.7.1
go: downloading github.com/opentracing/opentracing-go v1.2.0
go: downloading github.com/uber/jaeger-client-go v2.25.0+incompatible
go: downloading github.com/golang/protobuf v1.4.2
go: downloading github.com/grpc-ecosystem/go-grpc-middleware v1.2.0
go: downloading google.golang.org/grpc v1.30.0
go: downloading github.com/go-logr/logr v0.1.0
go: downloading github.com/google/uuid v1.1.1
go: extracting github.com/uber/jaeger-client-go v2.25.0+incompatible
go: extracting github.com/golang/protobuf v1.4.2
go: downloading google.golang.org/protobuf v1.23.0
go: extracting github.com/go-logr/logr v0.1.0
go: extracting github.com/grpc-ecosystem/go-grpc-middleware v1.2.0
go: extracting github.com/google/uuid v1.1.1
go: extracting google.golang.org/grpc v1.30.0
go: extracting github.com/opentracing/opentracing-go v1.2.0
go: extracting github.com/prometheus/client_golang v1.7.1
go: downloading k8s.io/apimachinery v0.17.9
go: extracting google.golang.org/protobuf v1.23.0
go: downloading github.com/pkg/errors v0.9.1
go: extracting k8s.io/apimachinery v0.17.9
go: extracting github.com/pkg/errors v0.9.1
go: downloading golang.org/x/xerrors v0.0.0-20191204190536-9bdfabe68543
go: extracting golang.org/x/xerrors v0.0.0-20191204190536-9bdfabe68543
go: downloading github.com/prometheus/common v0.10.0
go: extracting github.com/prometheus/common v0.10.0
go: downloading github.com/prometheus/client_model v0.2.0
go: downloading github.com/cespare/xxhash/v2 v2.1.1
go: downloading github.com/uber/jaeger-lib v2.2.0+incompatible
go: extracting github.com/prometheus/client_model v0.2.0
go: extracting github.com/cespare/xxhash/v2 v2.1.1
go: downloading k8s.io/api v0.17.9
go: downloading github.com/prometheus/procfs v0.1.3
go: downloading github.com/beorn7/perks v1.0.1
go: downloading github.com/cloudevents/sdk-go v1.2.0
go: downloading sigs.k8s.io/controller-runtime v0.5.8
go: downloading github.com/gorilla/mux v1.7.4
go: extracting github.com/prometheus/procfs v0.1.3
go: extracting github.com/uber/jaeger-lib v2.2.0+incompatible
go: extracting github.com/gorilla/mux v1.7.4
go: downloading google.golang.org/genproto v0.0.0-20190916214212-f660b8655731
go: extracting github.com/beorn7/perks v1.0.1
go: extracting sigs.k8s.io/controller-runtime v0.5.8
go: extracting github.com/cloudevents/sdk-go v1.2.0
go: downloading golang.org/x/net v0.0.0-20200520004742-59133d7f0dd7
go: downloading go.uber.org/atomic v1.6.0
go: downloading github.com/google/gofuzz v1.0.0
go: extracting go.uber.org/atomic v1.6.0
go: extracting k8s.io/api v0.17.9
go: extracting github.com/google/gofuzz v1.0.0
go: downloading golang.org/x/sys v0.0.0-20200615200032-f1bc736245b1
go: downloading github.com/gogo/protobuf v1.3.1
go: downloading gomodules.xyz/jsonpatch/v2 v2.0.1
go: downloading k8s.io/client-go v0.17.9
go: downloading github.com/matttproud/golang_protobuf_extensions v1.0.1
go: extracting golang.org/x/net v0.0.0-20200520004742-59133d7f0dd7
go: extracting gomodules.xyz/jsonpatch/v2 v2.0.1
go: extracting github.com/matttproud/golang_protobuf_extensions v1.0.1
go: extracting k8s.io/client-go v0.17.9
go: extracting golang.org/x/sys v0.0.0-20200615200032-f1bc736245b1
go: downloading go.opencensus.io v0.22.0
go: downloading k8s.io/klog v1.0.0
go: extracting github.com/gogo/protobuf v1.3.1
go: downloading k8s.io/utils v0.0.0-20200619165400-6e3d28b6ed19
go: extracting google.golang.org/genproto v0.0.0-20190916214212-f660b8655731
go: downloading github.com/imdario/mergo v0.3.9
go: downloading golang.org/x/crypto v0.0.0-20200622213623-75b288015ac9
go: downloading golang.org/x/time v0.0.0-20190921001708-c4c64cad1fd0
go: extracting go.opencensus.io v0.22.0
go: extracting k8s.io/klog v1.0.0
go: downloading github.com/spf13/pflag v1.0.5
go: extracting k8s.io/utils v0.0.0-20200619165400-6e3d28b6ed19
go: downloading golang.org/x/oauth2 v0.0.0-20190604053449-0f29369cfe45
go: extracting github.com/imdario/mergo v0.3.9
go: extracting golang.org/x/time v0.0.0-20190921001708-c4c64cad1fd0
go: downloading golang.org/x/text v0.3.3
go: downloading go.uber.org/zap v1.15.0
go: downloading github.com/go-logr/zapr v0.1.0
go: downloading gopkg.in/inf.v0 v0.9.1
go: downloading gopkg.in/fsnotify.v1 v1.4.7
go: extracting github.com/spf13/pflag v1.0.5
go: extracting golang.org/x/crypto v0.0.0-20200622213623-75b288015ac9
go: extracting gopkg.in/inf.v0 v0.9.1
go: extracting golang.org/x/oauth2 v0.0.0-20190604053449-0f29369cfe45
go: extracting github.com/go-logr/zapr v0.1.0
go: downloading github.com/googleapis/gnostic v0.3.1
go: extracting gopkg.in/fsnotify.v1 v1.4.7
go: extracting go.uber.org/zap v1.15.0
go: downloading k8s.io/apiextensions-apiserver v0.17.9
go: downloading github.com/hashicorp/golang-lru v0.5.4
go: downloading go.uber.org/multierr v1.5.0
go: downloading sigs.k8s.io/yaml v1.1.0
go: downloading github.com/google/go-cmp v0.5.0
go: downloading github.com/evanphx/json-patch v4.5.0+incompatible
go: extracting golang.org/x/text v0.3.3
go: extracting sigs.k8s.io/yaml v1.1.0
go: extracting github.com/google/go-cmp v0.5.0
go: extracting go.uber.org/multierr v1.5.0
go: extracting github.com/hashicorp/golang-lru v0.5.4
go: extracting github.com/evanphx/json-patch v4.5.0+incompatible
go: downloading github.com/davecgh/go-spew v1.1.1
go: downloading github.com/modern-go/reflect2 v1.0.1
go: extracting k8s.io/apiextensions-apiserver v0.17.9
go: extracting github.com/googleapis/gnostic v0.3.1
go: downloading gopkg.in/yaml.v2 v2.3.0
go: downloading k8s.io/klog/v2 v2.0.0
go: downloading github.com/json-iterator/go v1.1.10
go: downloading github.com/lightstep/tracecontext.go v0.0.0-20181129014701-1757c391b1ac
go: downloading github.com/golang/groupcache v0.0.0-20190702054246-869f871628b6
go: downloading k8s.io/kube-openapi v0.0.0-20200410145947-bcb3869e6f29
go: extracting github.com/golang/groupcache v0.0.0-20190702054246-869f871628b6
go: extracting github.com/lightstep/tracecontext.go v0.0.0-20181129014701-1757c391b1ac
go: extracting gopkg.in/yaml.v2 v2.3.0
go: extracting k8s.io/kube-openapi v0.0.0-20200410145947-bcb3869e6f29
go: extracting github.com/modern-go/reflect2 v1.0.1
go: extracting k8s.io/klog/v2 v2.0.0
go: extracting github.com/davecgh/go-spew v1.1.1
go: extracting github.com/json-iterator/go v1.1.10
go: downloading github.com/modern-go/concurrent v0.0.0-20180306012644-bacd9c7ef1dd
go: extracting github.com/modern-go/concurrent v0.0.0-20180306012644-bacd9c7ef1dd
go: finding github.com/go-logr/logr v0.1.0
go: finding github.com/pkg/errors v0.9.1
go: finding github.com/golang/protobuf v1.4.2
go: finding github.com/uber/jaeger-client-go v2.25.0+incompatible
go: finding github.com/google/uuid v1.1.1
go: finding github.com/grpc-ecosystem/go-grpc-middleware v1.2.0
go: finding github.com/opentracing/opentracing-go v1.2.0
go: finding github.com/prometheus/client_golang v1.7.1
go: finding golang.org/x/xerrors v0.0.0-20191204190536-9bdfabe68543
go: finding google.golang.org/protobuf v1.23.0
go: finding google.golang.org/grpc v1.30.0
go: finding github.com/cloudevents/sdk-go v1.2.0
go: finding sigs.k8s.io/controller-runtime v0.5.8
go: finding k8s.io/api v0.17.9
go: finding github.com/beorn7/perks v1.0.1
go: finding github.com/gorilla/mux v1.7.4
go: finding k8s.io/apimachinery v0.17.9
go: finding github.com/cespare/xxhash/v2 v2.1.1
go: finding google.golang.org/genproto v0.0.0-20190916214212-f660b8655731
go: finding github.com/uber/jaeger-lib v2.2.0+incompatible
go: finding github.com/prometheus/client_model v0.2.0
go: finding github.com/prometheus/common v0.10.0
go: finding go.opencensus.io v0.22.0
go: finding github.com/go-logr/zapr v0.1.0
go: finding golang.org/x/net v0.0.0-20200520004742-59133d7f0dd7
go: finding github.com/gogo/protobuf v1.3.1
go: finding go.uber.org/zap v1.15.0
go: finding github.com/spf13/pflag v1.0.5
go: finding github.com/prometheus/procfs v0.1.3
go: finding github.com/lightstep/tracecontext.go v0.0.0-20181129014701-1757c391b1ac
go: finding github.com/matttproud/golang_protobuf_extensions v1.0.1
go: finding github.com/google/gofuzz v1.0.0
go: finding github.com/evanphx/json-patch v4.5.0+incompatible
go: finding go.uber.org/atomic v1.6.0
go: finding gopkg.in/inf.v0 v0.9.1
go: finding k8s.io/client-go v0.17.9
go: finding gomodules.xyz/jsonpatch/v2 v2.0.1
go: finding github.com/hashicorp/golang-lru v0.5.4
go: finding golang.org/x/sys v0.0.0-20200615200032-f1bc736245b1
go: finding go.uber.org/multierr v1.5.0
go: finding golang.org/x/time v0.0.0-20190921001708-c4c64cad1fd0
go: finding k8s.io/klog v1.0.0
go: finding k8s.io/utils v0.0.0-20200619165400-6e3d28b6ed19
go: finding gopkg.in/fsnotify.v1 v1.4.7
go: finding github.com/json-iterator/go v1.1.10
go: finding k8s.io/apiextensions-apiserver v0.17.9
go: finding github.com/imdario/mergo v0.3.9
go: finding github.com/modern-go/reflect2 v1.0.1
go: finding golang.org/x/text v0.3.3
go: finding golang.org/x/crypto v0.0.0-20200622213623-75b288015ac9
go: finding github.com/golang/groupcache v0.0.0-20190702054246-869f871628b6
go: finding github.com/googleapis/gnostic v0.3.1
go: finding github.com/modern-go/concurrent v0.0.0-20180306012644-bacd9c7ef1dd
go: finding github.com/davecgh/go-spew v1.1.1
go: finding sigs.k8s.io/yaml v1.1.0
go: finding k8s.io/kube-openapi v0.0.0-20200410145947-bcb3869e6f29
go: finding golang.org/x/oauth2 v0.0.0-20190604053449-0f29369cfe45
go: finding github.com/google/go-cmp v0.5.0
go: finding k8s.io/klog/v2 v2.0.0
go: finding gopkg.in/yaml.v2 v2.3.0
api/rest/server.go
go vet ./api/... ./predictor/... ./k8s/...
go: downloading github.com/onsi/gomega v1.10.1
go: downloading gotest.tools v2.2.0+incompatible
go: extracting gotest.tools v2.2.0+incompatible
go: extracting github.com/onsi/gomega v1.10.1
go: finding github.com/onsi/gomega v1.10.1
go: finding gotest.tools v2.2.0+incompatible
go test ./api/... ./predictor/... ./k8s/... -coverprofile cover.out
?   	github.com/seldonio/seldon-core/executor/api	[no test files]
?   	github.com/seldonio/seldon-core/executor/api/client	[no test files]
ok  	github.com/seldonio/seldon-core/executor/api/grpc	0.403s	coverage: 18.0% of statements
ok  	github.com/seldonio/seldon-core/executor/api/grpc/seldon	1.280s	coverage: 48.5% of statements
?   	github.com/seldonio/seldon-core/executor/api/grpc/seldon/proto	[no test files]
?   	github.com/seldonio/seldon-core/executor/api/grpc/seldon/test	[no test files]
ok  	github.com/seldonio/seldon-core/executor/api/grpc/tensorflow	0.430s	coverage: 19.0% of statements
ok  	github.com/seldonio/seldon-core/executor/api/metric	0.151s	coverage: 31.6% of statements
ok  	github.com/seldonio/seldon-core/executor/api/payload	0.040s	coverage: 64.3% of statements
ok  	github.com/seldonio/seldon-core/executor/api/rest	0.426s	coverage: 67.6% of statements
?   	github.com/seldonio/seldon-core/executor/api/test	[no test files]
ok  	github.com/seldonio/seldon-core/executor/api/tracing	0.031s	coverage: 72.2% of statements
ok  	github.com/seldonio/seldon-core/executor/api/util	0.160s	coverage: 48.1% of statements
ok  	github.com/seldonio/seldon-core/executor/predictor	0.560s	coverage: 76.5% of statements
ok  	github.com/seldonio/seldon-core/executor/k8s	0.036s	coverage: 72.7% of statements
make: Leaving directory '/workspace/source/executor'
