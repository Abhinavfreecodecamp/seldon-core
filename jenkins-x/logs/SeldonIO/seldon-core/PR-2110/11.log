
Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-jhh2b-11[0m stage [32mpr-build-comment[0m and container [32mstep-credential-initializer-7mls4[0m
{"level":"info","ts":1594717769.4132817,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/refs/heads/0.8.0-ns-support: no such file or directory"}
{"level":"info","ts":1594717769.4140482,"logger":"fallback-logger","caller":"creds-init/main.go:40","msg":"Credentials initialized."}

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-jhh2b-11[0m stage [32mpr-build-comment[0m and container [32mstep-working-dir-initializer-64lgh[0m
{"level":"info","ts":1594717770.4409118,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/HEAD: no such file or directory"}
{"level":"info","ts":1594717770.4429226,"logger":"fallback-logger","caller":"bash/main.go:64","msg":"Successfully executed command \"sh -c mkdir -p /workspace/source\"; output "}

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-jhh2b-11[0m stage [32mpr-build-comment[0m and container [32mstep-place-tools[0m

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-jhh2b-11[0m stage [32mpr-build-comment[0m and container [32mstep-create-dir-workspace-nbgr2[0m
{"level":"info","ts":1594717776.5319066,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/HEAD: no such file or directory"}
{"level":"info","ts":1594717776.5339756,"logger":"fallback-logger","caller":"bash/main.go:64","msg":"Successfully executed command \"sh -c mkdir -p source\"; output "}

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-jhh2b-11[0m stage [32mpr-build-comment[0m and container [32mstep-git-source-seldonio-seldon-core-pr-2110-pr-jhh2b-8tnlb[0m
{"level":"info","ts":1594717776.9320567,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/refs/heads/0.8.0-ns-support: no such file or directory"}
{"level":"info","ts":1594717782.732645,"logger":"fallback-logger","caller":"git/git.go:103","msg":"Successfully cloned https://github.com/SeldonIO/seldon-core.git @ master in path /workspace/source"}

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-jhh2b-11[0m stage [32mpr-build-comment[0m and container [32mstep-setup-builder-home[0m

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-jhh2b-11[0m stage [32mpr-build-comment[0m and container [32mstep-git-merge[0m
Using SHAs from PULL_REFS=master:b8a92914e17e719377518735864e8c02077f0917,2110:6adde004c912693733d2a6e3587b079abd42e2b9
DEBUG: LC_ALL=C JX_LOG_LEVEL=error git fetch origin --unshallow 6adde004c912693733d2a6e3587b079abd42e2b9: b8a92914e17e719377518735864e8c02077f0917:
DEBUG: ran git fetch --unshallow origin 6adde004c912693733d2a6e3587b079abd42e2b9: b8a92914e17e719377518735864e8c02077f0917: in 
DEBUG: LC_ALL=C JX_LOG_LEVEL=error git branch
DEBUG: JX_LOG_LEVEL=error LC_ALL=C git checkout master
DEBUG: ran git checkout master in 
DEBUG: LC_ALL=C JX_LOG_LEVEL=error git reset --hard b8a92914e17e719377518735864e8c02077f0917
DEBUG: ran git reset --hard b8a92914e17e719377518735864e8c02077f0917 in 
DEBUG: LC_ALL=C JX_LOG_LEVEL=error git clean -fd .
DEBUG: ran clean --force -d . in 
DEBUG: JX_LOG_LEVEL=error LC_ALL=C git merge 6adde004c912693733d2a6e3587b079abd42e2b9
DEBUG: ran git merge 6adde004c912693733d2a6e3587b079abd42e2b9 in 
DEBUG: LC_ALL=C JX_LOG_LEVEL=error git log --format=%H%x1f%an%x1f%ae%x1f%cn%x1f%ce%x1f%s%n%b%x1e b8a92914e17e719377518735864e8c02077f0917..HEAD
Merged SHA 542372771c0d776b78659b21c0163cf0d9748bf6 with commit message 'Merge commit '6adde004c912693733d2a6e3587b079abd42e2b9'' into base branch master
Merged SHA 6adde004c912693733d2a6e3587b079abd42e2b9 with commit message 'Updated readme' into base branch master
Merged SHA 79196344d190b557cb8ab0702846bab5401b2f3a with commit message 'updated example to include multiclass' into base branch master
Merged SHA cf1cc44a741b1b20c8f70a1f0e5cb733f8248cd4 with commit message 'Fixed metrics to ensure tags are also enforcing uniqueness' into base branch master
Merged SHA ca2ba2a3bb60a98873a7f31df46f04fdfad7c4d5 with commit message 'Updated example to have binary classifier' into base branch master
Merged SHA 3e83d99ef9a7ed8ec3d583e45f3d137f98e0fba6 with commit message 'Updated to add custom performance of models' into base branch master
Merged SHA e8022764abb15d4960ed53bb4d5abce9d68b9a0b with commit message 'Added python wrapper code to allow for feedback to be processed with metrics' into base branch master
Merged SHA 8f7d44f5efb4841b31d379999c664c869eed19f2 with commit message 'Added further steps to example to cover how to use model' into base branch master
Merged SHA ae18f82c2aa9905a5722b80081ac73b84e3a9314 with commit message 'Added explanantions' into base branch master
Merged SHA 312d805ca848e8cff1f25f83f6752c1d80ab1356 with commit message 'Updated to metrics image' into base branch master
Merged SHA aa7c262390859a7b1423c9d2aab1568a1de5db8b with commit message 'Updated request logger to return correct error' into base branch master
Merged SHA 8ab0acd29863313c52a6e6ead50daa9ff338d206 with commit message 'Added model server core example' into base branch master
Merged SHA f28d64845d82bd733bc60b6b11d2b2401f617672 with commit message 'Extended example to show how the stateful server would work' into base branch master
Merged SHA b01f3259c06ce22756794cd71bbdd65cd1240f06 with commit message 'Added graph' into base branch master
Merged SHA a4ad0b7eac07e5108a04d006633d5b537372e86e with commit message 'added feedback provided' into base branch master
Merged SHA 7766bf1ef5b950f750b859b98beadadc97fa8a0f with commit message 'Added example metrics server' into base branch master
Merged SHA cc31e2edda75a8f22ab3f6cb79689b2d23430093 with commit message 'Added example metrics server' into base branch master
Merged SHA 1452a863fe32798161973514d7a206632067d5cc with commit message 'Updated to add extra examples' into base branch master
Merged SHA e01197724fdb6f645191c6920cc2555edfa9befe with commit message 'Added examples for stateful metrics' into base branch master
Merged SHA 09bf4ad869855f4b88b1894fdcf037c1e5313ebb with commit message 'Initial example for stateful metrics' into base branch master
Merged SHA 74b01eca44b761ad27195db259570f13b9a26192 with commit message 'Added functionality to request logger to store feedback with outstanding todos and ran linter' into base branch master
Merged SHA df4d2a30e7e80faacfed7b48f26bc74e20a95291 with commit message 'Added executor functionality to send feedback' into base branch master

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-jhh2b-11[0m stage [32mpr-build-comment[0m and container [32mstep-step2[0m
+++ dirname ./add-pr-build-comment
++ cd .
++ pwd
+ STARTUP_DIR=/workspace/source/ci
+ REPO_OWNER=SeldonIO
+ REPO_NAME=seldon-core
+ PULL_NUMBER=2110
+ BUILD_NUMBER=11
+ PIPELINE_CONTEXT=pr-build
++ cat
+++ date
+ COMMENT_MSG='Tue Jul 14 09:09:51 UTC 2020
The logs for [pr-build] [11] will show after the pipeline context has finished.  
https://github.com/SeldonIO/seldon-core/blob/gh-pages/jenkins-x/logs/SeldonIO/seldon-core/PR-2110/11.log

impatient try  
** get build logs SeldonIO/seldon-core/PR-2110 --build=11'
+ ** step pr comment --owner=SeldonIO --repository=seldon-core --pull-request=2110 '--comment=Tue Jul 14 09:09:51 UTC 2020
The logs for [pr-build] [11] will show after the pipeline context has finished.  
https://github.com/SeldonIO/seldon-core/blob/gh-pages/jenkins-x/logs/SeldonIO/seldon-core/PR-2110/11.log

impatient try  
** get build logs SeldonIO/seldon-core/PR-2110 --build=11'

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-jhh2b-11[0m stage [32mpr-build-comment[0m and container [32mstep-source-mkdir-seldonio-seldon-core-pr-2110-pr-jhh2b-5jkj9[0m
{"level":"info","ts":1594717794.0674293,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/HEAD: no such file or directory"}
{"level":"info","ts":1594717794.2119815,"logger":"fallback-logger","caller":"bash/main.go:64","msg":"Successfully executed command \"sh -c mkdir -p /pvc/pr-build-comment/workspace\"; output "}

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-jhh2b-11[0m stage [32mpr-build-comment[0m and container [32mstep-source-copy-seldonio-seldon-core-pr-2110-pr-jhh2b-h44p2[0m
{"level":"info","ts":1594717794.3618698,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/HEAD: no such file or directory"}
{"level":"info","ts":1594717795.3049114,"logger":"fallback-logger","caller":"bash/main.go:64","msg":"Successfully executed command \"sh -c cp -r source/. /pvc/pr-build-comment/workspace\"; output "}

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-jhh2b-11[0m stage [32mseldon-operator[0m and container [32mstep-credential-initializer-8wlsx[0m
{"level":"info","ts":1594717804.0989969,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/refs/heads/0.8.0-ns-support: no such file or directory"}
{"level":"info","ts":1594717804.0994933,"logger":"fallback-logger","caller":"creds-init/main.go:40","msg":"Credentials initialized."}

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-jhh2b-11[0m stage [32mseldon-operator[0m and container [32mstep-working-dir-initializer-8tkvn[0m
{"level":"info","ts":1594717805.5846713,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/HEAD: no such file or directory"}
{"level":"info","ts":1594717805.5868518,"logger":"fallback-logger","caller":"bash/main.go:64","msg":"Successfully executed command \"sh -c mkdir -p /workspace/source\"; output "}

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-jhh2b-11[0m stage [32mseldon-operator[0m and container [32mstep-place-tools[0m

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-jhh2b-11[0m stage [32mseldon-operator[0m and container [32mstep-create-dir-workspace-wsgwn[0m
{"level":"info","ts":1594717815.260141,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/HEAD: no such file or directory"}
{"level":"info","ts":1594717815.262238,"logger":"fallback-logger","caller":"bash/main.go:64","msg":"Successfully executed command \"sh -c mkdir -p /workspace/source\"; output "}

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-jhh2b-11[0m stage [32mseldon-operator[0m and container [32mstep-source-copy-workspace-n5xqx[0m
{"level":"info","ts":1594717815.5976272,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/HEAD: no such file or directory"}
{"level":"info","ts":1594717820.4728012,"logger":"fallback-logger","caller":"bash/main.go:64","msg":"Successfully executed command \"sh -c cp -r /pvc/pr-build-comment/workspace/. /workspace/source\"; output "}

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-jhh2b-11[0m stage [32mseldon-operator[0m and container [32mstep-setup-builder-home[0m

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-jhh2b-11[0m stage [32mseldon-operator[0m and container [32mstep-test-operator[0m
make: Entering directory '/workspace/source/operator'
go: creating new go.mod: module tmp
go: finding sigs.k8s.io/controller-tools/cmd/controller-gen v0.2.5
go: finding sigs.k8s.io v0.2.5
go: finding sigs.k8s.io/controller-tools/cmd v0.2.5
go: finding sigs.k8s.io/controller-tools v0.2.5
go: downloading sigs.k8s.io/controller-tools v0.2.5
go: extracting sigs.k8s.io/controller-tools v0.2.5
go: downloading k8s.io/apimachinery v0.17.0
go: downloading k8s.io/apiextensions-apiserver v0.17.0
go: downloading k8s.io/api v0.17.0
go: downloading github.com/spf13/cobra v0.0.5
go: downloading gopkg.in/yaml.v3 v3.0.0-20190905181640-827449938966
go: downloading github.com/fatih/color v1.7.0
go: extracting github.com/fatih/color v1.7.0
go: downloading sigs.k8s.io/yaml v1.1.0
go: downloading github.com/mattn/go-colorable v0.1.2
go: extracting gopkg.in/yaml.v3 v3.0.0-20190905181640-827449938966
go: extracting sigs.k8s.io/yaml v1.1.0
go: extracting github.com/spf13/cobra v0.0.5
go: downloading gopkg.in/yaml.v2 v2.2.4
go: extracting github.com/mattn/go-colorable v0.1.2
go: downloading github.com/gobuffalo/flect v0.2.0
go: downloading github.com/spf13/pflag v1.0.5
go: extracting github.com/gobuffalo/flect v0.2.0
go: extracting gopkg.in/yaml.v2 v2.2.4
go: extracting k8s.io/apiextensions-apiserver v0.17.0
go: downloading golang.org/x/tools v0.0.0-20190920225731-5eefd052ad72
go: extracting github.com/spf13/pflag v1.0.5
go: extracting k8s.io/apimachinery v0.17.0
go: downloading github.com/mattn/go-isatty v0.0.8
go: extracting github.com/mattn/go-isatty v0.0.8
go: downloading github.com/gogo/protobuf v1.2.2-0.20190723190241-65acae22fc9d
go: downloading k8s.io/utils v0.0.0-20191114184206-e782cd3c129f
go: extracting k8s.io/utils v0.0.0-20191114184206-e782cd3c129f
go: downloading golang.org/x/sys v0.0.0-20190826190057-c7b8b68b1456
go: downloading github.com/inconshreveable/mousetrap v1.0.0
go: downloading github.com/google/gofuzz v1.0.0
go: downloading k8s.io/klog v1.0.0
go: extracting github.com/inconshreveable/mousetrap v1.0.0
go: extracting github.com/google/gofuzz v1.0.0
go: extracting k8s.io/klog v1.0.0
go: downloading gopkg.in/inf.v0 v0.9.1
go: downloading golang.org/x/net v0.0.0-20191004110552-13f9640d40b9
go: extracting gopkg.in/inf.v0 v0.9.1
go: extracting golang.org/x/tools v0.0.0-20190920225731-5eefd052ad72
go: extracting k8s.io/api v0.17.0
go: extracting golang.org/x/net v0.0.0-20191004110552-13f9640d40b9
go: extracting golang.org/x/sys v0.0.0-20190826190057-c7b8b68b1456
go: extracting github.com/gogo/protobuf v1.2.2-0.20190723190241-65acae22fc9d
go: downloading golang.org/x/text v0.3.2
go: extracting golang.org/x/text v0.3.2
go: finding github.com/spf13/cobra v0.0.5
go: finding github.com/fatih/color v1.7.0
go: finding golang.org/x/tools v0.0.0-20190920225731-5eefd052ad72
go: finding k8s.io/api v0.17.0
go: finding k8s.io/apiextensions-apiserver v0.17.0
go: finding k8s.io/apimachinery v0.17.0
go: finding sigs.k8s.io/yaml v1.1.0
go: finding gopkg.in/yaml.v3 v3.0.0-20190905181640-827449938966
go: finding github.com/gobuffalo/flect v0.2.0
go: finding github.com/mattn/go-colorable v0.1.2
go: finding github.com/mattn/go-isatty v0.0.8
go: finding github.com/spf13/pflag v1.0.5
go: finding github.com/gogo/protobuf v1.2.2-0.20190723190241-65acae22fc9d
go: finding gopkg.in/yaml.v2 v2.2.4
go: finding github.com/google/gofuzz v1.0.0
go: finding gopkg.in/inf.v0 v0.9.1
go: finding k8s.io/klog v1.0.0
go: finding golang.org/x/sys v0.0.0-20190826190057-c7b8b68b1456
go: finding k8s.io/utils v0.0.0-20191114184206-e782cd3c129f
go: finding golang.org/x/net v0.0.0-20191004110552-13f9640d40b9
go: finding golang.org/x/text v0.3.2
/builder/home/go/bin/controller-gen object:headerFile=./hack/boilerplate.go.txt paths="./..."
go fmt ./...
go vet ./...
go: downloading github.com/onsi/gomega v1.10.1
go: downloading github.com/onsi/ginkgo v1.14.0
go: extracting github.com/onsi/ginkgo v1.14.0
go: extracting github.com/onsi/gomega v1.10.1
go: downloading golang.org/x/xerrors v0.0.0-20191204190536-9bdfabe68543
go: extracting golang.org/x/xerrors v0.0.0-20191204190536-9bdfabe68543
go: downloading github.com/nxadm/tail v1.4.4
go: extracting github.com/nxadm/tail v1.4.4
go: downloading github.com/fsnotify/fsnotify v1.4.9
go: downloading gopkg.in/tomb.v1 v1.0.0-20141024135613-dd632973f1e7
go: extracting gopkg.in/tomb.v1 v1.0.0-20141024135613-dd632973f1e7
go: extracting github.com/fsnotify/fsnotify v1.4.9
/builder/home/go/bin/controller-gen "crd:trivialVersions=true" rbac:roleName=manager-role webhook paths="./..." output:crd:artifacts:config=config/crd/bases
rm -rf generated
mkdir generated
kustomize build config/default/ -o generated
cp generated/apiextensions.k8s.io_v1beta1_customresourcedefinition_seldondeployments.machinelearning.seldon.io.yaml testing/machinelearning.seldon.io_seldondeployments.yaml
ginkgo -r -outputdir=. -cover -coverprofile=cover.out ./controllers ./utils ./apis
[1594717903] [1mController Suite[0m - 35/35 specs test k8s client
&{Reader:0xc0005068c0 Writer:0xc0002d09c0 StatusClient:0xc0002d09c0}
[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0mE0714 09:12:31.816369   22273 reflector.go:309] pkg/mod/k8s.io/client-go@v0.17.8/tools/cache/reflector.go:105: Failed to watch *v1.Deployment: Get http://127.0.0.1:34551/apis/apps/v1/deployments?allowWatchBookmarks=true&resourceVersion=330&timeoutSeconds=395&watch=true: dial tcp 127.0.0.1:34551: connect: connection refused
E0714 09:12:31.816854   22273 reflector.go:309] pkg/mod/k8s.io/client-go@v0.17.8/tools/cache/reflector.go:105: Failed to watch *v2beta1.HorizontalPodAutoscaler: Get http://127.0.0.1:34551/apis/autoscaling/v2beta1/horizontalpodautoscalers?allowWatchBookmarks=true&resourceVersion=208&timeoutSeconds=440&watch=true: dial tcp 127.0.0.1:34551: connect: connection refused
E0714 09:12:31.817097   22273 reflector.go:309] pkg/mod/k8s.io/client-go@v0.17.8/tools/cache/reflector.go:105: Failed to watch *v1.ConfigMap: Get http://127.0.0.1:34551/api/v1/configmaps?allowWatchBookmarks=true&resourceVersion=117&timeoutSeconds=384&watch=true: dial tcp 127.0.0.1:34551: connect: connection refused
E0714 09:12:31.817603   22273 reflector.go:309] pkg/mod/k8s.io/client-go@v0.17.8/tools/cache/reflector.go:105: Failed to watch *v1.Namespace: Get http://127.0.0.1:34551/api/v1/namespaces?allowWatchBookmarks=true&resourceVersion=304&timeoutSeconds=387&watch=true: dial tcp 127.0.0.1:34551: connect: connection refused
E0714 09:12:31.817619   22273 reflector.go:309] pkg/mod/k8s.io/client-go@v0.17.8/tools/cache/reflector.go:105: Failed to watch *v1alpha3.VirtualService: Get http://127.0.0.1:34551/apis/networking.istio.io/v1alpha3/virtualservices?allowWatchBookmarks=true&resourceVersion=117&timeoutSeconds=503&watch=true: dial tcp 127.0.0.1:34551: connect: connection refused
E0714 09:12:31.817628   22273 reflector.go:309] pkg/mod/k8s.io/client-go@v0.17.8/tools/cache/reflector.go:105: Failed to watch *v1.SeldonDeployment: Get http://127.0.0.1:34551/apis/machinelearning.seldon.io/v1/seldondeployments?allowWatchBookmarks=true&resourceVersion=337&timeoutSeconds=365&watch=true: dial tcp 127.0.0.1:34551: connect: connection refused
E0714 09:12:31.817944   22273 reflector.go:309] pkg/mod/k8s.io/client-go@v0.17.8/tools/cache/reflector.go:105: Failed to watch *v1.Service: Get http://127.0.0.1:34551/api/v1/services?allowWatchBookmarks=true&resourceVersion=328&timeoutSeconds=360&watch=true: dial tcp 127.0.0.1:34551: connect: connection refused

 [32mSUCCESS![0m 22.855647328s PASS
coverage: 65.2% of statements
=== RUN   TestGcsSecret
--- PASS: TestGcsSecret (0.00s)
PASS
coverage: 100.0% of statements
=== RUN   TestS3Secret
--- PASS: TestS3Secret (0.00s)
PASS
coverage: 94.6% of statements
=== RUN   TestGetEnvAsBool
--- PASS: TestGetEnvAsBool (0.00s)
PASS
coverage: 10.9% of statements
=== RUN   TestGenerateCerts
--- PASS: TestGenerateCerts (0.61s)
=== RUN   TestConfigmapCreate
--- PASS: TestConfigmapCreate (0.00s)
=== RUN   TestCRDCreate
--- PASS: TestCRDCreate (0.09s)
=== RUN   TestMutatingWebhookCreate
--- PASS: TestMutatingWebhookCreate (1.94s)
=== RUN   TestMutatingWebhookCreateNamespaced
--- PASS: TestMutatingWebhookCreateNamespaced (3.04s)
=== RUN   TestValidatingWebhookCreate
--- PASS: TestValidatingWebhookCreate (2.96s)
=== RUN   TestValidatingWebhookCreateNamespaced
--- PASS: TestValidatingWebhookCreateNamespaced (1.78s)
=== RUN   TestWebHookSvcCreate
--- PASS: TestWebHookSvcCreate (1.96s)
PASS
coverage: 52.1% of statements
=== RUN   TestImageSetNormal
--- PASS: TestImageSetNormal (0.00s)
    prepack_test.go:50: Scenario: GRPC image with version
    prepack_test.go:50: Scenario: GRPC image with no version
    prepack_test.go:50: Scenario: REST image with version
    prepack_test.go:50: Scenario: REST image with no version
=== RUN   TestGetPredictorConfig
--- PASS: TestGetPredictorConfig (0.00s)
    prepack_test.go:81: Scenario: related image sklearn
    prepack_test.go:81: Scenario: default image sklearn
=== RUN   TestGetDeploymentNameOneModel
--- PASS: TestGetDeploymentNameOneModel (0.00s)
=== RUN   TestGetDeploymentNameLong
--- PASS: TestGetDeploymentNameLong (0.00s)
=== RUN   TestValidateBadProtocol
--- PASS: TestValidateBadProtocol (0.00s)
=== RUN   TestValidateBadTransport
--- PASS: TestValidateBadTransport (0.00s)
=== RUN   TestValidateMixedTransport
--- PASS: TestValidateMixedTransport (0.00s)
=== RUN   TestValidateMixedMultipleTransport
--- PASS: TestValidateMixedMultipleTransport (0.00s)
=== RUN   TestDefaultSingleContainer
--- PASS: TestDefaultSingleContainer (0.00s)
=== RUN   TestMetricsPortAddedTwoContainers
--- PASS: TestMetricsPortAddedTwoContainers (0.00s)
=== RUN   TestMetricsPortAddedTwoComponentSpecsTwoContainers
--- PASS: TestMetricsPortAddedTwoComponentSpecsTwoContainers (0.00s)
=== RUN   TestOverrideMetricsPortName
Failed to find config map seldon-config
no kind is registered for the type v1.ConfigMap in scheme "pkg/runtime/scheme.go:101"
--- PASS: TestOverrideMetricsPortName (0.00s)
=== RUN   TestPortUseExisting
--- PASS: TestPortUseExisting (0.00s)
=== RUN   TestMetricsPortAddedToPrepacked
--- PASS: TestMetricsPortAddedToPrepacked (0.00s)
=== RUN   TestPredictorProtocolGrpc
--- PASS: TestPredictorProtocolGrpc (0.00s)
=== RUN   TestPrepackedWithExistingContainer
--- PASS: TestPrepackedWithExistingContainer (0.00s)
=== RUN   TestPrepackedWithCustom
--- PASS: TestPrepackedWithCustom (0.00s)
=== RUN   TestPrepackedWithExistingContainerAndImage
--- PASS: TestPrepackedWithExistingContainerAndImage (0.00s)
=== RUN   TestMetricsPortAddedToTwoPrepacked
--- PASS: TestMetricsPortAddedToTwoPrepacked (0.00s)
=== RUN   TestDefaultPrepackagedServerType
--- PASS: TestDefaultPrepackagedServerType (0.00s)
=== RUN   TestValidateSingleModel
--- PASS: TestValidateSingleModel (0.00s)
=== RUN   TestValidateSingleModelNoName
--- PASS: TestValidateSingleModelNoName (0.00s)
=== RUN   TestValidateNoEngineMultiGraph
--- PASS: TestValidateNoEngineMultiGraph (0.00s)
=== RUN   TestValidateDuplPredictorName
--- PASS: TestValidateDuplPredictorName (0.00s)
=== RUN   TestValidateTrafficSum
--- PASS: TestValidateTrafficSum (0.00s)
=== RUN   TestDefaultABTest
--- PASS: TestDefaultABTest (0.00s)
=== RUN   TestValidateTensorflowProtocolNormalPrepackaged
--- PASS: TestValidateTensorflowProtocolNormalPrepackaged (0.01s)
=== RUN   TestValidateTensorflowProtocolNormal
--- PASS: TestValidateTensorflowProtocolNormal (0.00s)
=== RUN   TestPredictorNoGraph
--- PASS: TestPredictorNoGraph (0.00s)
PASS
coverage: 41.6% of statements
path is /workspace/source/operator
All profiles combined

Ginkgo ran 6 suites in 1m0.695146239s
Test Suite Passed
make: Leaving directory '/workspace/source/operator'

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-jhh2b-11[0m stage [32mtest-python[0m and container [32mstep-credential-initializer-7swsw[0m
{"level":"info","ts":1594717804.0162814,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/refs/heads/0.8.0-ns-support: no such file or directory"}
{"level":"info","ts":1594717804.017218,"logger":"fallback-logger","caller":"creds-init/main.go:40","msg":"Credentials initialized."}

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-jhh2b-11[0m stage [32mtest-python[0m and container [32mstep-working-dir-initializer-vhvj6[0m
{"level":"info","ts":1594717805.7111814,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/HEAD: no such file or directory"}
{"level":"info","ts":1594717805.7138946,"logger":"fallback-logger","caller":"bash/main.go:64","msg":"Successfully executed command \"sh -c mkdir -p /workspace/source\"; output "}

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-jhh2b-11[0m stage [32mtest-python[0m and container [32mstep-place-tools[0m

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-jhh2b-11[0m stage [32mtest-python[0m and container [32mstep-create-dir-workspace-k4c62[0m
{"level":"info","ts":1594717815.2505095,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/HEAD: no such file or directory"}
{"level":"info","ts":1594717815.2529292,"logger":"fallback-logger","caller":"bash/main.go:64","msg":"Successfully executed command \"sh -c mkdir -p /workspace/source\"; output "}

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-jhh2b-11[0m stage [32mtest-python[0m and container [32mstep-source-copy-workspace-dmw2m[0m
{"level":"info","ts":1594717815.59453,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/HEAD: no such file or directory"}
{"level":"info","ts":1594717820.4717145,"logger":"fallback-logger","caller":"bash/main.go:64","msg":"Successfully executed command \"sh -c cp -r /pvc/pr-build-comment/workspace/. /workspace/source\"; output "}

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-jhh2b-11[0m stage [32mtest-python[0m and container [32mstep-setup-builder-home[0m

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-jhh2b-11[0m stage [32mtest-python[0m and container [32mstep-test-python[0m
make: Entering directory '/workspace/source/python'
# Protobuf
cp ../proto/prediction.proto seldon_core/proto/
make -C ../proto/tensorflow/ create_protos
make[1]: Entering directory '/workspace/source/proto/tensorflow'
./create-protos.sh
Downloading proto files for master
make[1]: Leaving directory '/workspace/source/proto/tensorflow'
cp -r ../proto/tensorflow/tensorflow \
	seldon_core/proto/
make -C ../proto/tensorflow clean
make[1]: Entering directory '/workspace/source/proto/tensorflow'
removed 'tensorflow/core/framework/resource_handle.proto'
removed 'tensorflow/core/framework/tensor_shape.proto'
removed 'tensorflow/core/framework/tensor.proto'
removed 'tensorflow/core/framework/types.proto'
removed directory 'tensorflow/core/framework'
removed directory 'tensorflow/core'
removed directory 'tensorflow'
make[1]: Leaving directory '/workspace/source/proto/tensorflow'
# OpenAPI
cp ../openapi/wrapper.oas3.json seldon_core/openapi/seldon.json
# Protobuf
cd seldon_core && python \
	-m grpc.tools.protoc \
	-I./ \
	-I./proto/ \
	--python_out=./ \
	--grpc_python_out=./ \
	--mypy_out=./ \
	./proto/prediction.proto
Writing mypy to proto/prediction_pb2.pyi
## We build TF's protobufs as well in case the tensorflow package
## is not found
cd seldon_core/proto && python \
	-m grpc.tools.protoc \
	-I./ \
	-I../ \
	--python_out=./ \
	./tensorflow/core/framework/*.proto
sed -i "s/from tensorflow/from seldon_core.proto.tensorflow/" seldon_core/proto/*.py
sed -i "s/from tensorflow.core.framework/from ./" \
	seldon_core/proto/tensorflow/core/framework/resource_handle_pb2.py seldon_core/proto/tensorflow/core/framework/tensor_pb2.py seldon_core/proto/tensorflow/core/framework/tensor_shape_pb2.py seldon_core/proto/tensorflow/core/framework/types_pb2.py
sed -i "s/from proto/from seldon_core.proto/g" seldon_core/proto/prediction_pb2_grpc.py
sed -i 's/__version__ = .*/__version__ = "1.2.2-dev"/g' seldon_core/version.py
pip install -e . -r requirements-dev.txt
Obtaining file:///workspace/source/python
Collecting Flask<2.0.0 (from -r requirements.txt (line 1))
  Downloading https://files.pythonhosted.org/packages/f2/28/2a03252dfb9ebf377f40fba6a7841b47083260bf8bd8e737b0c6952df83f/Flask-1.1.2-py2.py3-none-any.whl (94kB)
Collecting jsonschema<4.0.0 (from -r requirements.txt (line 2))
  Downloading https://files.pythonhosted.org/packages/c5/8f/51e89ce52a085483359217bc72cdbf6e75ee595d5b1d4b5ade40c7e018b8/jsonschema-3.2.0-py2.py3-none-any.whl (56kB)
Collecting Flask-cors<4.0.0 (from -r requirements.txt (line 3))
  Downloading https://files.pythonhosted.org/packages/78/38/e68b11daa5d613e3a91e4bf3da76c94ac9ee0d9cd515af9c1ab80d36f709/Flask_Cors-3.0.8-py2.py3-none-any.whl
Collecting redis<4.0.0 (from -r requirements.txt (line 4))
  Downloading https://files.pythonhosted.org/packages/a7/7c/24fb0511df653cf1a5d938d8f5d19802a88cef255706fdda242ff97e91b7/redis-3.5.3-py2.py3-none-any.whl (72kB)
Requirement already satisfied: requests<3.0.0 in /opt/conda/lib/python3.7/site-packages (from -r requirements.txt (line 5)) (2.21.0)
Collecting numpy<2.0.0 (from -r requirements.txt (line 6))
  Downloading https://files.pythonhosted.org/packages/b4/93/76311932b0c7efd3111f6604609f36d568b912e16bebd86d99f0612d3930/numpy-1.19.0-cp37-cp37m-manylinux1_x86_64.whl (13.5MB)
Requirement already satisfied: flatbuffers<2.0.0 in /opt/conda/lib/python3.7/site-packages (from -r requirements.txt (line 7)) (1.11)
Requirement already satisfied: protobuf<4.0.0 in /opt/conda/lib/python3.7/site-packages (from -r requirements.txt (line 8)) (3.7.1)
Requirement already satisfied: grpcio<2.0.0 in /opt/conda/lib/python3.7/site-packages (from -r requirements.txt (line 9)) (1.20.1)
Collecting Flask-OpenTracing<1.2.0,>=1.1.0 (from -r requirements.txt (line 10))
  Downloading https://files.pythonhosted.org/packages/58/6c/6417701ba5ecc8854670c6db3207bcc3e5fbc96289a7cb18d5516d99a1c6/Flask-OpenTracing-1.1.0.tar.gz
Collecting opentracing<2.3.0,>=2.2.0 (from -r requirements.txt (line 11))
  Downloading https://files.pythonhosted.org/packages/94/9f/289424136addf621fb4c75624ef9a3a80e8575da3993a87950c57e93217e/opentracing-2.2.0.tar.gz (47kB)
Collecting jaeger-client<4.2.0,>=4.1.0 (from -r requirements.txt (line 12))
  Downloading https://files.pythonhosted.org/packages/f1/da/569a4f1bc3d0c412c7f903053f09ef62fa10949374ca90bc852b22dd3860/jaeger-client-4.1.0.tar.gz (80kB)
Collecting grpcio-opentracing<1.2.0,>=1.1.4 (from -r requirements.txt (line 13))
  Downloading https://files.pythonhosted.org/packages/db/82/2fcad380697c3dab25de76ee590bcab3eb9bbfb4add916044d7e83ec2b10/grpcio_opentracing-1.1.4-py3-none-any.whl
Collecting PyYAML<5.4 (from -r requirements.txt (line 14))
  Downloading https://files.pythonhosted.org/packages/64/c2/b80047c7ac2478f9501676c988a5411ed5572f35d1beff9cae07d321512c/PyYAML-5.3.1.tar.gz (269kB)
Collecting gunicorn<20.1.0,>=19.9.0 (from -r requirements.txt (line 15))
  Downloading https://files.pythonhosted.org/packages/69/ca/926f7cd3a2014b16870086b2d0fdc84a9e49473c68a8dff8b57f7c156f43/gunicorn-20.0.4-py2.py3-none-any.whl (77kB)
Collecting minio<6.0.0,>=4.0.9 (from -r requirements.txt (line 16))
  Downloading https://files.pythonhosted.org/packages/aa/60/81f4a1dc2d320832840288d7ec88aa3e4ee495d8f1452b4c79d8bd67136b/minio-5.0.10-py2.py3-none-any.whl (75kB)
Collecting azure-storage-blob<3.0.0,>=2.0.1 (from -r requirements.txt (line 17))
  Downloading https://files.pythonhosted.org/packages/3e/84/610f379b46d7d3c2d48eadeed6a12b6d46a43100fea70534f5992d0ac996/azure_storage_blob-2.1.0-py2.py3-none-any.whl (88kB)
Collecting setuptools>=41.0.0 (from -r requirements.txt (line 18))
  Downloading https://files.pythonhosted.org/packages/8e/11/9e10f1cad4518cb307b484c255cae61e97f05b82f6d536932b1714e01b47/setuptools-49.2.0-py3-none-any.whl (789kB)
Collecting google-cloud-storage>=1.16.0 (from -r requirements.txt (line 19))
  Downloading https://files.pythonhosted.org/packages/98/8c/41398b95ad0d612e1cfc3c1816292540bac76242ef2aaa4b7adb06da5f6b/google_cloud_storage-1.29.0-py2.py3-none-any.whl (85kB)
Collecting prometheus_client<0.9.0,>=0.7.1 (from -r requirements.txt (line 20))
  Downloading https://files.pythonhosted.org/packages/3f/0e/554a265ffdc56e1494ef08e18f765b0cdec78797f510c58c45cf37abb4f4/prometheus_client-0.8.0-py2.py3-none-any.whl (53kB)
Collecting black==19.10b0 (from -r requirements-dev.txt (line 2))
  Downloading https://files.pythonhosted.org/packages/fd/bb/ad34bbc93d1bea3de086d7c59e528d4a503ac8fe318bd1fa48605584c3d2/black-19.10b0-py36-none-any.whl (97kB)
Collecting flake8==3.8.1 (from -r requirements-dev.txt (line 3))
  Downloading https://files.pythonhosted.org/packages/bf/47/36e51603431e1a5289eb41636199d2c225fcb1ca286e29c02d219c8e6e88/flake8-3.8.1-py2.py3-none-any.whl (72kB)
Collecting mypy<0.783 (from -r requirements-dev.txt (line 4))
  Downloading https://files.pythonhosted.org/packages/a7/25/da35a577040effa507d465102a0e001b29279d759f46218af91985ab0392/mypy-0.782-cp37-cp37m-manylinux1_x86_64.whl (20.8MB)
Collecting Pillow==7.2.0 (from -r requirements-dev.txt (line 5))
  Downloading https://files.pythonhosted.org/packages/e8/f2/6722dd0c22e3a143ac792ccb2424924ac72af4adea756b1165b4cad50da7/Pillow-7.2.0-cp37-cp37m-manylinux1_x86_64.whl (2.2MB)
Collecting pytest==5.4.2 (from -r requirements-dev.txt (line 6))
  Downloading https://files.pythonhosted.org/packages/6c/f9/9f2b6c672c8f8bb87a4c1bd52c1b57213627b035305aad745d015b2a62ae/pytest-5.4.2-py3-none-any.whl (247kB)
Collecting pytest-cov==2.10.0 (from -r requirements-dev.txt (line 7))
  Downloading https://files.pythonhosted.org/packages/3d/13/ae3dec587b1cc07fb9f294e52ea9ad140266aea55adb9e12eade3625bd27/pytest_cov-2.10.0-py2.py3-none-any.whl
Collecting tox<4.0.0 (from -r requirements-dev.txt (line 8))
  Downloading https://files.pythonhosted.org/packages/ad/0d/773800b6649e1994e1726dc64b0e212896955f38f7d8dc7000bdea47930d/tox-3.16.1-py2.py3-none-any.whl (137kB)
Collecting grpcio-tools==1.30.0 (from -r requirements-dev.txt (line 9))
  Downloading https://files.pythonhosted.org/packages/da/3c/bed275484f6cc262b5de6ceaae36798c60d7904cdd05dc79cc830b880687/grpcio-tools-1.30.0.tar.gz (2.1MB)
Collecting mypy-protobuf==1.22 (from -r requirements-dev.txt (line 10))
  Downloading https://files.pythonhosted.org/packages/ec/9c/36adfc9a4aee35f8c6ae45f91cb3ef2e041e4c9ef6be1401e369f46c47c6/mypy_protobuf-1.22-py3-none-any.whl
Collecting tenacity==6.2.0 (from -r requirements-dev.txt (line 13))
  Downloading https://files.pythonhosted.org/packages/b5/05/ff089032442058bd3386f9cd991cd88ccac81dca1494d78751621ee35e62/tenacity-6.2.0-py2.py3-none-any.whl
Collecting coverage==5.1 (from -r requirements-dev.txt (line 16))
  Downloading https://files.pythonhosted.org/packages/0d/85/b055f9c1a210f0c7e16e675b286ce4e16d80ba4c4e566de143e8d58dd7f2/coverage-5.1-cp37-cp37m-manylinux1_x86_64.whl (227kB)
Collecting pandas==1.0.1 (from -r requirements-dev.txt (line 19))
  Downloading https://files.pythonhosted.org/packages/61/af/ceb7523e86753d5643ed00e8c17a42bdcfe819782c3449d9bbbf5d01867a/pandas-1.0.1-cp37-cp37m-manylinux1_x86_64.whl (10.1MB)
Collecting pip-licenses==2.2.1 (from -r requirements-dev.txt (line 22))
  Downloading https://files.pythonhosted.org/packages/2e/8a/b8eb114545d9e984fcc013ef544c487aa2c02489a66185a82108625784a5/pip_licenses-2.2.1-py3-none-any.whl
Collecting itsdangerous>=0.24 (from Flask<2.0.0->-r requirements.txt (line 1))
  Downloading https://files.pythonhosted.org/packages/76/ae/44b03b253d6fade317f32c24d100b3b35c2239807046a4c953c7b89fa49e/itsdangerous-1.1.0-py2.py3-none-any.whl
Collecting Jinja2>=2.10.1 (from Flask<2.0.0->-r requirements.txt (line 1))
  Downloading https://files.pythonhosted.org/packages/30/9e/f663a2aa66a09d838042ae1a2c5659828bb9b41ea3a6efa20a20fd92b121/Jinja2-2.11.2-py2.py3-none-any.whl (125kB)
Collecting click>=5.1 (from Flask<2.0.0->-r requirements.txt (line 1))
  Downloading https://files.pythonhosted.org/packages/d2/3d/fa76db83bf75c4f8d338c2fd15c8d33fdd7ad23a9b5e57eb6c5de26b430e/click-7.1.2-py2.py3-none-any.whl (82kB)
Collecting Werkzeug>=0.15 (from Flask<2.0.0->-r requirements.txt (line 1))
  Downloading https://files.pythonhosted.org/packages/cc/94/5f7079a0e00bd6863ef8f1da638721e9da21e5bacee597595b318f71d62e/Werkzeug-1.0.1-py2.py3-none-any.whl (298kB)
Requirement already satisfied: six>=1.11.0 in /opt/conda/lib/python3.7/site-packages (from jsonschema<4.0.0->-r requirements.txt (line 2)) (1.12.0)
Collecting pyrsistent>=0.14.0 (from jsonschema<4.0.0->-r requirements.txt (line 2))
  Downloading https://files.pythonhosted.org/packages/9f/0d/cbca4d0bbc5671822a59f270e4ce3f2195f8a899c97d0d5abb81b191efb5/pyrsistent-0.16.0.tar.gz (108kB)
Collecting attrs>=17.4.0 (from jsonschema<4.0.0->-r requirements.txt (line 2))
  Downloading https://files.pythonhosted.org/packages/a2/db/4313ab3be961f7a763066401fb77f7748373b6094076ae2bda2806988af6/attrs-19.3.0-py2.py3-none-any.whl
Collecting importlib-metadata; python_version < "3.8" (from jsonschema<4.0.0->-r requirements.txt (line 2))
  Downloading https://files.pythonhosted.org/packages/8e/58/cdea07eb51fc2b906db0968a94700866fc46249bdc75cac23f9d13168929/importlib_metadata-1.7.0-py2.py3-none-any.whl
Requirement already satisfied: chardet<3.1.0,>=3.0.2 in /opt/conda/lib/python3.7/site-packages (from requests<3.0.0->-r requirements.txt (line 5)) (3.0.4)
Requirement already satisfied: idna<2.9,>=2.5 in /opt/conda/lib/python3.7/site-packages (from requests<3.0.0->-r requirements.txt (line 5)) (2.8)
Requirement already satisfied: certifi>=2017.4.17 in /opt/conda/lib/python3.7/site-packages (from requests<3.0.0->-r requirements.txt (line 5)) (2018.11.29)
Requirement already satisfied: urllib3<1.25,>=1.21.1 in /opt/conda/lib/python3.7/site-packages (from requests<3.0.0->-r requirements.txt (line 5)) (1.24.1)
Collecting threadloop<2,>=1 (from jaeger-client<4.2.0,>=4.1.0->-r requirements.txt (line 12))
  Downloading https://files.pythonhosted.org/packages/d3/1d/8398c1645b97dc008d3c658e04beda01ede3d90943d40c8d56863cf891bd/threadloop-1.0.2.tar.gz
Collecting thrift (from jaeger-client<4.2.0,>=4.1.0->-r requirements.txt (line 12))
  Downloading https://files.pythonhosted.org/packages/97/1e/3284d19d7be99305eda145b8aa46b0c33244e4a496ec66440dac19f8274d/thrift-0.13.0.tar.gz (59kB)
Collecting tornado<6,>=4.3 (from jaeger-client<4.2.0,>=4.1.0->-r requirements.txt (line 12))
  Downloading https://files.pythonhosted.org/packages/e6/78/6e7b5af12c12bdf38ca9bfe863fcaf53dc10430a312d0324e76c1e5ca426/tornado-5.1.1.tar.gz (516kB)
Collecting configparser (from minio<6.0.0,>=4.0.9->-r requirements.txt (line 16))
  Downloading https://files.pythonhosted.org/packages/4b/6b/01baa293090240cf0562cc5eccb69c6f5006282127f2b846fad011305c79/configparser-5.0.0-py3-none-any.whl
Collecting pytz (from minio<6.0.0,>=4.0.9->-r requirements.txt (line 16))
  Downloading https://files.pythonhosted.org/packages/4f/a4/879454d49688e2fad93e59d7d4efda580b783c745fd2ec2a3adf87b0808d/pytz-2020.1-py2.py3-none-any.whl (510kB)
Collecting python-dateutil (from minio<6.0.0,>=4.0.9->-r requirements.txt (line 16))
  Downloading https://files.pythonhosted.org/packages/d4/70/d60450c3dd48ef87586924207ae8907090de0b306af2bce5d134d78615cb/python_dateutil-2.8.1-py2.py3-none-any.whl (227kB)
Collecting azure-common>=1.1.5 (from azure-storage-blob<3.0.0,>=2.0.1->-r requirements.txt (line 17))
  Downloading https://files.pythonhosted.org/packages/e5/4d/d000fc3c5af601d00d55750b71da5c231fcb128f42ac95b208ed1091c2c1/azure_common-1.1.25-py2.py3-none-any.whl
Collecting azure-storage-common~=2.1 (from azure-storage-blob<3.0.0,>=2.0.1->-r requirements.txt (line 17))
  Downloading https://files.pythonhosted.org/packages/6b/a0/6794b318ce0118d1a4053bdf0149a60807407db9b710354f2b203c2f5975/azure_storage_common-2.1.0-py2.py3-none-any.whl (47kB)
Collecting google-resumable-media<0.6dev,>=0.5.0 (from google-cloud-storage>=1.16.0->-r requirements.txt (line 19))
  Downloading https://files.pythonhosted.org/packages/f2/cc/cd05c633298fcbba5d61b6b8844de598e001954281a004fc1a13c61a5121/google_resumable_media-0.5.1-py2.py3-none-any.whl
Collecting google-cloud-core<2.0dev,>=1.2.0 (from google-cloud-storage>=1.16.0->-r requirements.txt (line 19))
  Downloading https://files.pythonhosted.org/packages/89/3c/8a7531839028c9690e6d14c650521f3bbaf26e53baaeb2784b8c3eb2fb97/google_cloud_core-1.3.0-py2.py3-none-any.whl
Collecting google-auth<2.0dev,>=1.11.0 (from google-cloud-storage>=1.16.0->-r requirements.txt (line 19))
  Downloading https://files.pythonhosted.org/packages/09/4b/a25adc25200de0f558749908ffa78eb8d4b8750775c9c944ffc0dc2e661c/google_auth-1.19.0-py2.py3-none-any.whl (91kB)
Collecting appdirs (from black==19.10b0->-r requirements-dev.txt (line 2))
  Downloading https://files.pythonhosted.org/packages/3b/00/2344469e2084fb287c2e0b57b72910309874c3245463acd6cf5e3db69324/appdirs-1.4.4-py2.py3-none-any.whl
Collecting pathspec<1,>=0.6 (from black==19.10b0->-r requirements-dev.txt (line 2))
  Downloading https://files.pythonhosted.org/packages/5d/d0/887c58853bd4b6ffc7aa9cdba4fc57d7b979b45888a6bd47e4568e1cf868/pathspec-0.8.0-py2.py3-none-any.whl
Collecting typed-ast>=1.4.0 (from black==19.10b0->-r requirements-dev.txt (line 2))
  Downloading https://files.pythonhosted.org/packages/5d/10/0c1e8aa723a2b0c4032e048d8e511df82c8a1262f0e1df5e4c54eb2613e9/typed_ast-1.4.1-cp37-cp37m-manylinux1_x86_64.whl (737kB)
Collecting regex (from black==19.10b0->-r requirements-dev.txt (line 2))
  Downloading https://files.pythonhosted.org/packages/ac/9e/7019ecdbae4537b4c7d0cc800840889c30a36e7a4b319f8272882292b19a/regex-2020.6.8-cp37-cp37m-manylinux1_x86_64.whl (661kB)
Collecting toml>=0.9.4 (from black==19.10b0->-r requirements-dev.txt (line 2))
  Downloading https://files.pythonhosted.org/packages/9f/e1/1b40b80f2e1663a6b9f497123c11d7d988c0919abbf3c3f2688e448c5363/toml-0.10.1-py2.py3-none-any.whl
Collecting pycodestyle<2.7.0,>=2.6.0a1 (from flake8==3.8.1->-r requirements-dev.txt (line 3))
  Downloading https://files.pythonhosted.org/packages/10/5b/88879fb861ab79aef45c7e199cae3ef7af487b5603dcb363517a50602dd7/pycodestyle-2.6.0-py2.py3-none-any.whl (41kB)
Collecting pyflakes<2.3.0,>=2.2.0 (from flake8==3.8.1->-r requirements-dev.txt (line 3))
  Downloading https://files.pythonhosted.org/packages/69/5b/fd01b0c696f2f9a6d2c839883b642493b431f28fa32b29abc465ef675473/pyflakes-2.2.0-py2.py3-none-any.whl (66kB)
Collecting mccabe<0.7.0,>=0.6.0 (from flake8==3.8.1->-r requirements-dev.txt (line 3))
  Downloading https://files.pythonhosted.org/packages/87/89/479dc97e18549e21354893e4ee4ef36db1d237534982482c3681ee6e7b57/mccabe-0.6.1-py2.py3-none-any.whl
Collecting typing-extensions>=3.7.4 (from mypy<0.783->-r requirements-dev.txt (line 4))
  Downloading https://files.pythonhosted.org/packages/0c/0e/3f026d0645d699e7320b59952146d56ad7c374e9cd72cd16e7c74e657a0f/typing_extensions-3.7.4.2-py3-none-any.whl
Collecting mypy-extensions<0.5.0,>=0.4.3 (from mypy<0.783->-r requirements-dev.txt (line 4))
  Downloading https://files.pythonhosted.org/packages/5c/eb/975c7c080f3223a5cdaff09612f3a5221e4ba534f7039db34c35d95fa6a5/mypy_extensions-0.4.3-py2.py3-none-any.whl
Collecting py>=1.5.0 (from pytest==5.4.2->-r requirements-dev.txt (line 6))
  Downloading https://files.pythonhosted.org/packages/68/0f/41a43535b52a81e4f29e420a151032d26f08b62206840c48d14b70e53376/py-1.9.0-py2.py3-none-any.whl (99kB)
Collecting packaging (from pytest==5.4.2->-r requirements-dev.txt (line 6))
  Downloading https://files.pythonhosted.org/packages/46/19/c5ab91b1b05cfe63cccd5cfc971db9214c6dd6ced54e33c30d5af1d2bc43/packaging-20.4-py2.py3-none-any.whl
Collecting pluggy<1.0,>=0.12 (from pytest==5.4.2->-r requirements-dev.txt (line 6))
  Downloading https://files.pythonhosted.org/packages/a0/28/85c7aa31b80d150b772fbe4a229487bc6644da9ccb7e427dd8cc60cb8a62/pluggy-0.13.1-py2.py3-none-any.whl
Collecting more-itertools>=4.0.0 (from pytest==5.4.2->-r requirements-dev.txt (line 6))
  Downloading https://files.pythonhosted.org/packages/ef/9b/6c35ec5483710492e21252465160ee508170159f7e0e2d6cd769022f52f6/more_itertools-8.4.0-py3-none-any.whl (43kB)
Collecting wcwidth (from pytest==5.4.2->-r requirements-dev.txt (line 6))
  Downloading https://files.pythonhosted.org/packages/59/7c/e39aca596badaf1b78e8f547c807b04dae603a433d3e7a7e04d67f2ef3e5/wcwidth-0.2.5-py2.py3-none-any.whl
Collecting filelock>=3.0.0 (from tox<4.0.0->-r requirements-dev.txt (line 8))
  Downloading https://files.pythonhosted.org/packages/93/83/71a2ee6158bb9f39a90c0dea1637f81d5eef866e188e1971a1b1ab01a35a/filelock-3.0.12-py3-none-any.whl
Collecting virtualenv!=20.0.0,!=20.0.1,!=20.0.2,!=20.0.3,!=20.0.4,!=20.0.5,!=20.0.6,!=20.0.7,>=16.0.0 (from tox<4.0.0->-r requirements-dev.txt (line 8))
  Downloading https://files.pythonhosted.org/packages/9f/8f/cc19852c5636db0c4b1f1d8f6b7c3ebabffe89afa411ffe915cf9005c918/virtualenv-20.0.26-py2.py3-none-any.whl (4.9MB)
Collecting PTable (from pip-licenses==2.2.1->-r requirements-dev.txt (line 22))
  Downloading https://files.pythonhosted.org/packages/ab/b3/b54301811173ca94119eb474634f120a49cd370f257d1aae5a4abaf12729/PTable-0.9.2.tar.gz
Collecting MarkupSafe>=0.23 (from Jinja2>=2.10.1->Flask<2.0.0->-r requirements.txt (line 1))
  Downloading https://files.pythonhosted.org/packages/98/7b/ff284bd8c80654e471b769062a9b43cc5d03e7a615048d96f4619df8d420/MarkupSafe-1.1.1-cp37-cp37m-manylinux1_x86_64.whl
Collecting zipp>=0.5 (from importlib-metadata; python_version < "3.8"->jsonschema<4.0.0->-r requirements.txt (line 2))
  Downloading https://files.pythonhosted.org/packages/b2/34/bfcb43cc0ba81f527bc4f40ef41ba2ff4080e047acb0586b56b3d017ace4/zipp-3.1.0-py3-none-any.whl
Requirement already satisfied: cryptography in /opt/conda/lib/python3.7/site-packages (from azure-storage-common~=2.1->azure-storage-blob<3.0.0,>=2.0.1->-r requirements.txt (line 17)) (2.4.2)
Collecting google-api-core<2.0.0dev,>=1.16.0 (from google-cloud-core<2.0dev,>=1.2.0->google-cloud-storage>=1.16.0->-r requirements.txt (line 19))
  Downloading https://files.pythonhosted.org/packages/48/76/bd5e3ebd571b9f688ae123a2bd84b2dc9f75e1214a83b8a759bc16e2fc35/google_api_core-1.21.0-py2.py3-none-any.whl (90kB)
Collecting pyasn1-modules>=0.2.1 (from google-auth<2.0dev,>=1.11.0->google-cloud-storage>=1.16.0->-r requirements.txt (line 19))
  Downloading https://files.pythonhosted.org/packages/95/de/214830a981892a3e286c3794f41ae67a4495df1108c3da8a9f62159b9a9d/pyasn1_modules-0.2.8-py2.py3-none-any.whl (155kB)
Collecting cachetools<5.0,>=2.0.0 (from google-auth<2.0dev,>=1.11.0->google-cloud-storage>=1.16.0->-r requirements.txt (line 19))
  Downloading https://files.pythonhosted.org/packages/cd/5c/f3aa86b6d5482f3051b433c7616668a9b96fbe49a622210e2c9781938a5c/cachetools-4.1.1-py3-none-any.whl
Collecting rsa<5,>=3.1.4; python_version >= "3" (from google-auth<2.0dev,>=1.11.0->google-cloud-storage>=1.16.0->-r requirements.txt (line 19))
  Downloading https://files.pythonhosted.org/packages/1c/df/c3587a667d6b308fadc90b99e8bc8774788d033efcc70f4ecaae7fad144b/rsa-4.6-py3-none-any.whl (47kB)
Collecting pyparsing>=2.0.2 (from packaging->pytest==5.4.2->-r requirements-dev.txt (line 6))
  Downloading https://files.pythonhosted.org/packages/8a/bb/488841f56197b13700afd5658fc279a2025a39e22449b7cf29864669b15d/pyparsing-2.4.7-py2.py3-none-any.whl (67kB)
Collecting distlib<1,>=0.3.1 (from virtualenv!=20.0.0,!=20.0.1,!=20.0.2,!=20.0.3,!=20.0.4,!=20.0.5,!=20.0.6,!=20.0.7,>=16.0.0->tox<4.0.0->-r requirements-dev.txt (line 8))
  Downloading https://files.pythonhosted.org/packages/f5/0a/490fa011d699bb5a5f3a0cf57de82237f52a6db9d40f33c53b2736c9a1f9/distlib-0.3.1-py2.py3-none-any.whl (335kB)
Requirement already satisfied: asn1crypto>=0.21.0 in /opt/conda/lib/python3.7/site-packages (from cryptography->azure-storage-common~=2.1->azure-storage-blob<3.0.0,>=2.0.1->-r requirements.txt (line 17)) (0.24.0)
Requirement already satisfied: cffi!=1.11.3,>=1.7 in /opt/conda/lib/python3.7/site-packages (from cryptography->azure-storage-common~=2.1->azure-storage-blob<3.0.0,>=2.0.1->-r requirements.txt (line 17)) (1.11.5)
Collecting googleapis-common-protos<2.0dev,>=1.6.0 (from google-api-core<2.0.0dev,>=1.16.0->google-cloud-core<2.0dev,>=1.2.0->google-cloud-storage>=1.16.0->-r requirements.txt (line 19))
  Downloading https://files.pythonhosted.org/packages/03/74/3956721ea1eb4bcf7502a311fdaa60b85bd751de4e57d1943afe9b334141/googleapis_common_protos-1.52.0-py2.py3-none-any.whl (100kB)
Collecting pyasn1<0.5.0,>=0.4.6 (from pyasn1-modules>=0.2.1->google-auth<2.0dev,>=1.11.0->google-cloud-storage>=1.16.0->-r requirements.txt (line 19))
  Downloading https://files.pythonhosted.org/packages/62/1e/a94a8d635fa3ce4cfc7f506003548d0a2447ae76fd5ca53932970fe3053f/pyasn1-0.4.8-py2.py3-none-any.whl (77kB)
Requirement already satisfied: pycparser in /opt/conda/lib/python3.7/site-packages (from cffi!=1.11.3,>=1.7->cryptography->azure-storage-common~=2.1->azure-storage-blob<3.0.0,>=2.0.1->-r requirements.txt (line 17)) (2.19)
Building wheels for collected packages: Flask-OpenTracing, opentracing, jaeger-client, PyYAML, grpcio-tools, pyrsistent, threadloop, thrift, tornado, PTable
  Running setup.py bdist_wheel for Flask-OpenTracing: started
  Running setup.py bdist_wheel for Flask-OpenTracing: finished with status 'done'
  Stored in directory: /builder/home/.cache/pip/wheels/7b/dc/25/3cf0b35c129232ee596c413f13d1d1f5a8e38c427266276dfd
  Running setup.py bdist_wheel for opentracing: started
  Running setup.py bdist_wheel for opentracing: finished with status 'done'
  Stored in directory: /builder/home/.cache/pip/wheels/93/e9/b5/1cdc3544f99a54caca13832b5afa26fd98701fe709dc049576
  Running setup.py bdist_wheel for jaeger-client: started
  Running setup.py bdist_wheel for jaeger-client: finished with status 'done'
  Stored in directory: /builder/home/.cache/pip/wheels/f2/84/7f/e89da3ee8ce35598d6382b6389fa2ada5d66acca2422537994
  Running setup.py bdist_wheel for PyYAML: started
  Running setup.py bdist_wheel for PyYAML: finished with status 'done'
  Stored in directory: /builder/home/.cache/pip/wheels/a7/c1/ea/cf5bd31012e735dc1dfea3131a2d5eae7978b251083d6247bd
  Running setup.py bdist_wheel for grpcio-tools: started
  Running setup.py bdist_wheel for grpcio-tools: still running...
  Running setup.py bdist_wheel for grpcio-tools: still running...
  Running setup.py bdist_wheel for grpcio-tools: still running...
  Running setup.py bdist_wheel for grpcio-tools: still running...
  Running setup.py bdist_wheel for grpcio-tools: still running...
  Running setup.py bdist_wheel for grpcio-tools: still running...
  Running setup.py bdist_wheel for grpcio-tools: still running...
  Running setup.py bdist_wheel for grpcio-tools: still running...
  Running setup.py bdist_wheel for grpcio-tools: still running...
  Running setup.py bdist_wheel for grpcio-tools: finished with status 'done'
  Stored in directory: /builder/home/.cache/pip/wheels/83/94/68/d3464c124f6508da859f2b05a80e040dc99e7ebaaacbe86c6a
  Running setup.py bdist_wheel for pyrsistent: started
  Running setup.py bdist_wheel for pyrsistent: finished with status 'done'
  Stored in directory: /builder/home/.cache/pip/wheels/c2/85/ad/bc6d41e2c4b35c9fdfed48f0fcd411ffc4164e67755ddf9ebb
  Running setup.py bdist_wheel for threadloop: started
  Running setup.py bdist_wheel for threadloop: finished with status 'done'
  Stored in directory: /builder/home/.cache/pip/wheels/d7/7a/30/d212623a4cd34f6cce400f8122b1b7af740d3440c68023d51f
  Running setup.py bdist_wheel for thrift: started
  Running setup.py bdist_wheel for thrift: finished with status 'done'
  Stored in directory: /builder/home/.cache/pip/wheels/02/a2/46/689ccfcf40155c23edc7cdbd9de488611c8fdf49ff34b1706e
  Running setup.py bdist_wheel for tornado: started
  Running setup.py bdist_wheel for tornado: finished with status 'done'
  Stored in directory: /builder/home/.cache/pip/wheels/6d/e1/ce/f4ee2fa420cc6b940123c64992b81047816d0a9fad6b879325
  Running setup.py bdist_wheel for PTable: started
  Running setup.py bdist_wheel for PTable: finished with status 'done'
  Stored in directory: /builder/home/.cache/pip/wheels/22/cc/2e/55980bfe86393df3e9896146a01f6802978d09d7ebcba5ea56
Successfully built Flask-OpenTracing opentracing jaeger-client PyYAML grpcio-tools pyrsistent threadloop thrift tornado PTable
grpcio-tools 1.30.0 has requirement grpcio>=1.30.0, but you'll have grpcio 1.20.1 which is incompatible.
google-api-core 1.21.0 has requirement protobuf>=3.12.0, but you'll have protobuf 3.7.1 which is incompatible.
tox 3.16.1 has requirement six>=1.14.0, but you'll have six 1.12.0 which is incompatible.
Installing collected packages: itsdangerous, MarkupSafe, Jinja2, click, Werkzeug, Flask, setuptools, pyrsistent, attrs, zipp, importlib-metadata, jsonschema, Flask-cors, redis, numpy, opentracing, Flask-OpenTracing, tornado, threadloop, thrift, jaeger-client, grpcio-opentracing, PyYAML, gunicorn, configparser, pytz, python-dateutil, minio, azure-common, azure-storage-common, azure-storage-blob, google-resumable-media, googleapis-common-protos, pyasn1, pyasn1-modules, cachetools, rsa, google-auth, google-api-core, google-cloud-core, google-cloud-storage, prometheus-client, appdirs, pathspec, typed-ast, regex, toml, black, pycodestyle, pyflakes, mccabe, flake8, typing-extensions, mypy-extensions, mypy, Pillow, py, pyparsing, packaging, pluggy, more-itertools, wcwidth, pytest, coverage, pytest-cov, filelock, distlib, virtualenv, tox, grpcio-tools, mypy-protobuf, tenacity, pandas, PTable, pip-licenses, seldon-core
  Found existing installation: setuptools 40.6.3
    Uninstalling setuptools-40.6.3:
      Successfully uninstalled setuptools-40.6.3
  Found existing installation: grpcio-tools 1.20.1
    Uninstalling grpcio-tools-1.20.1:
      Successfully uninstalled grpcio-tools-1.20.1
  Found existing installation: mypy-protobuf 1.10
    Uninstalling mypy-protobuf-1.10:
      Successfully uninstalled mypy-protobuf-1.10
  Running setup.py develop for seldon-core
Successfully installed Flask-1.1.2 Flask-OpenTracing-1.1.0 Flask-cors-3.0.8 Jinja2-2.11.2 MarkupSafe-1.1.1 PTable-0.9.2 Pillow-7.2.0 PyYAML-5.3.1 Werkzeug-1.0.1 appdirs-1.4.4 attrs-19.3.0 azure-common-1.1.25 azure-storage-blob-2.1.0 azure-storage-common-2.1.0 black-19.10b0 cachetools-4.1.1 click-7.1.2 configparser-5.0.0 coverage-5.1 distlib-0.3.1 filelock-3.0.12 flake8-3.8.1 google-api-core-1.21.0 google-auth-1.19.0 google-cloud-core-1.3.0 google-cloud-storage-1.29.0 google-resumable-media-0.5.1 googleapis-common-protos-1.52.0 grpcio-opentracing-1.1.4 grpcio-tools-1.30.0 gunicorn-20.0.4 importlib-metadata-1.7.0 itsdangerous-1.1.0 jaeger-client-4.1.0 jsonschema-3.2.0 mccabe-0.6.1 minio-5.0.10 more-itertools-8.4.0 mypy-0.782 mypy-extensions-0.4.3 mypy-protobuf-1.22 numpy-1.19.0 opentracing-2.2.0 packaging-20.4 pandas-1.0.1 pathspec-0.8.0 pip-licenses-2.2.1 pluggy-0.13.1 prometheus-client-0.8.0 py-1.9.0 pyasn1-0.4.8 pyasn1-modules-0.2.8 pycodestyle-2.6.0 pyflakes-2.2.0 pyparsing-2.4.7 pyrsistent-0.16.0 pytest-5.4.2 pytest-cov-2.10.0 python-dateutil-2.8.1 pytz-2020.1 redis-3.5.3 regex-2020.6.8 rsa-4.6 seldon-core setuptools-49.2.0 tenacity-6.2.0 threadloop-1.0.2 thrift-0.13.0 toml-0.10.1 tornado-5.1.1 tox-3.16.1 typed-ast-1.4.1 typing-extensions-3.7.4.2 virtualenv-20.0.26 wcwidth-0.2.5 zipp-3.1.0
tox
GLOB sdist-make: /workspace/source/python/setup.py
py3 create: /workspace/source/python/.tox/py3
py3 installdeps: tenacity, pytest, pytest-cov, Pillow
py3 inst: /workspace/source/python/.tox/.tmp/package/1/seldon-core-1.2.2.dev0.zip
py3 installed: attrs==19.3.0,azure-common==1.1.25,azure-storage-blob==2.1.0,azure-storage-common==2.1.0,certifi==2020.6.20,cffi==1.14.0,chardet==3.0.4,click==7.1.2,configparser==5.0.0,coverage==5.2,cryptography==2.9.2,Flask==1.1.2,Flask-Cors==3.0.8,Flask-OpenTracing==1.1.0,flatbuffers==1.12,grpcio==1.30.0,grpcio-opentracing==1.1.4,gunicorn==20.0.4,idna==2.10,importlib-metadata==1.7.0,itsdangerous==1.1.0,jaeger-client==4.1.0,Jinja2==2.11.2,jsonschema==3.2.0,MarkupSafe==1.1.1,minio==5.0.10,more-itertools==8.4.0,numpy==1.19.0,opentracing==2.2.0,packaging==20.4,Pillow==7.2.0,pluggy==0.13.1,prometheus-client==0.8.0,protobuf==3.12.2,py==1.9.0,pycparser==2.20,pyparsing==2.4.7,pyrsistent==0.16.0,pytest==5.4.3,pytest-cov==2.10.0,python-dateutil==2.8.1,pytz==2020.1,PyYAML==5.3.1,redis==3.5.3,requests==2.24.0,seldon-core @ file:///workspace/source/python/.tox/.tmp/package/1/seldon-core-1.2.2.dev0.zip,six==1.15.0,tenacity==6.2.0,threadloop==1.0.2,thrift==0.13.0,tornado==5.1.1,urllib3==1.25.9,wcwidth==0.2.5,Werkzeug==1.0.1,zipp==3.1.0
py3 run-test-pre: PYTHONHASHSEED='1076758190'
py3 run-test: commands[0] | pytest
============================= test session starts ==============================
platform linux -- Python 3.7.1, pytest-5.4.3, py-1.9.0, pluggy-0.13.1
cachedir: .tox/py3/.pytest_cache
rootdir: /workspace/source/python, inifile: setup.cfg
plugins: cov-2.10.0
collected 369 items

tests/test_api_tester.py ..                                              [  0%]
tests/test_application_exception_microservice.py ..                      [  1%]
tests/test_azure_storage.py ......                                       [  2%]
tests/test_combiner_microservice.py .....................                [  8%]
tests/test_metadata.py ................................................. [ 21%]
...                                                                      [ 22%]
tests/test_metrics.py ...................FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF [ 36%]
FFFFFFFFF........                                                        [ 40%]
tests/test_microservice.py .F...FF..F...                                 [ 44%]
tests/test_microservice_tester.py .....                                  [ 45%]
tests/test_model_microservice.py ...............s......................s [ 56%]
.......F                                                                 [ 58%]
tests/test_router_microservice.py ........F....F...                      [ 62%]
tests/test_s3_storage.py ...                                             [ 63%]
tests/test_seldon_client.py ..................................           [ 72%]
tests/test_storage.py ...s...s                                           [ 75%]
tests/test_transformer_microservice.py ................................. [ 84%]
........                                                                 [ 86%]
tests/test_user_model.py ....                                            [ 87%]
tests/test_utils.py ..............................sss..............      [100%]

=================================== FAILURES ===================================
_________________ test_seldon_metrics_predict[True-UserObject] _________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 345, in test_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Predict called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:57 REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:159 Predict called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:65 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
_____________ test_seldon_metrics_predict[True-UserObjectLowLevel] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 345, in test_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Predict raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:57 REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:207 Predict raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:65 REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
________________ test_seldon_metrics_predict[False-UserObject] _________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 345, in test_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Predict called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:57 REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:159 Predict called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:65 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
____________ test_seldon_metrics_predict[False-UserObjectLowLevel] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 345, in test_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Predict raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:57 REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:207 Predict raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:65 REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
________________ test_seldon_metrics_aggregate[True-UserObject] ________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 370, in test_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO:root:Aggregate called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:112 REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO     root:test_metrics.py:163 Aggregate called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:116 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
____________ test_seldon_metrics_aggregate[True-UserObjectLowLevel] ____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 370, in test_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO:root:Aggregate raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:112 REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO     root:test_metrics.py:214 Aggregate raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:116 REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
_______________ test_seldon_metrics_aggregate[False-UserObject] ________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 370, in test_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO:root:Aggregate called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:112 REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO     root:test_metrics.py:163 Aggregate called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:116 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
___________ test_seldon_metrics_aggregate[False-UserObjectLowLevel] ____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 370, in test_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO:root:Aggregate raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:112 REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO     root:test_metrics.py:214 Aggregate raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:116 REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
_____________ test_seldon_metrics_transform_input[True-UserObject] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 397, in test_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform input called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:82 REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:167 Transform input called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:86 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
_________ test_seldon_metrics_transform_input[True-UserObjectLowLevel] _________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 397, in test_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform input raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:82 REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:221 Transform input raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:86 REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
____________ test_seldon_metrics_transform_input[False-UserObject] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 397, in test_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform input called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:82 REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:167 Transform input called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:86 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
________ test_seldon_metrics_transform_input[False-UserObjectLowLevel] _________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 397, in test_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform input raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:82 REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:221 Transform input raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:86 REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
____________ test_seldon_metrics_transform_output[True-UserObject] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 424, in test_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform output called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:92 REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:171 Transform output called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:96 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
________ test_seldon_metrics_transform_output[True-UserObjectLowLevel] _________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 424, in test_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform output raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:92 REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:228 Transform output raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:96 REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
____________ test_seldon_metrics_transform_output[False-UserObject] ____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 424, in test_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform output called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:92 REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:171 Transform output called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:96 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
________ test_seldon_metrics_transform_output[False-UserObjectLowLevel] ________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 424, in test_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform output raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:92 REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:228 Transform output raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:96 REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
__________________ test_seldon_metrics_route[True-UserObject] __________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 449, in test_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Route called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:class_names is not implemented
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': [[22]], 'names': ['t:0']}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:102 REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:175 Route called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:106 REST Response: {'data': {'ndarray': [[22]], 'names': ['t:0']}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
______________ test_seldon_metrics_route[True-UserObjectLowLevel] ______________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 449, in test_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Route raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': [22]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:102 REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:235 Route raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:106 REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': [22]}}
_________________ test_seldon_metrics_route[False-UserObject] __________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 449, in test_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Route called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:class_names is not implemented
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': [[22]], 'names': ['t:0']}, 'meta': {}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:102 REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:175 Route called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:106 REST Response: {'data': {'ndarray': [[22]], 'names': ['t:0']}, 'meta': {}}
_____________ test_seldon_metrics_route[False-UserObjectLowLevel] ______________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 449, in test_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Route raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': [22]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:102 REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:235 Route raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:106 REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': [22]}}
______________ test_proto_seldon_metrics_predict[True-UserObject] ______________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 477, in test_proto_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Predict called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:159 Predict called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
________ test_proto_seldon_metrics_predict[True-UserObjectLowLevelGrpc] ________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 477, in test_proto_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Predict raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:256 Predict raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
_____________ test_proto_seldon_metrics_predict[False-UserObject] ______________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 477, in test_proto_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Predict called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:159 Predict called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
_______ test_proto_seldon_metrics_predict[False-UserObjectLowLevelGrpc] ________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 477, in test_proto_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Predict raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:256 Predict raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
_____________ test_proto_seldon_metrics_aggregate[True-UserObject] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 511, in test_proto_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Aggregate called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:163 Aggregate called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
_______ test_proto_seldon_metrics_aggregate[True-UserObjectLowLevelGrpc] _______
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 511, in test_proto_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Aggregate raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:269 Aggregate raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
____________ test_proto_seldon_metrics_aggregate[False-UserObject] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 511, in test_proto_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Aggregate called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:163 Aggregate called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
______ test_proto_seldon_metrics_aggregate[False-UserObjectLowLevelGrpc] _______
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 511, in test_proto_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Aggregate raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:269 Aggregate raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
__________ test_proto_seldon_metrics_transform_input[True-UserObject] __________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 538, in test_proto_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform input called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:167 Transform input called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
____ test_proto_seldon_metrics_transform_input[True-UserObjectLowLevelGrpc] ____
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 538, in test_proto_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform input raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:282 Transform input raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
_________ test_proto_seldon_metrics_transform_input[False-UserObject] __________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 538, in test_proto_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform input called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:167 Transform input called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
___ test_proto_seldon_metrics_transform_input[False-UserObjectLowLevelGrpc] ____
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 538, in test_proto_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform input raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:282 Transform input raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
_________ test_proto_seldon_metrics_transform_output[True-UserObject] __________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 565, in test_proto_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform output called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:171 Transform output called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
___ test_proto_seldon_metrics_transform_output[True-UserObjectLowLevelGrpc] ____
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 565, in test_proto_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform output raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:295 Transform output raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
_________ test_proto_seldon_metrics_transform_output[False-UserObject] _________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 565, in test_proto_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform output called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:171 Transform output called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
___ test_proto_seldon_metrics_transform_output[False-UserObjectLowLevelGrpc] ___
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 565, in test_proto_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform output raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:295 Transform output raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
_______________ test_proto_seldon_metrics_route[True-UserObject] _______________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 592, in test_proto_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Route called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:175 Route called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
_________ test_proto_seldon_metrics_route[True-UserObjectLowLevelGrpc] _________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 592, in test_proto_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Route raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:308 Route raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
______________ test_proto_seldon_metrics_route[False-UserObject] _______________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 592, in test_proto_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Route called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:175 Route called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
________ test_proto_seldon_metrics_route[False-UserObjectLowLevelGrpc] _________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 592, in test_proto_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Route raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:308 Route raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
_________________________ test_model_template_app_rest _________________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_microservice.py", line 56, in test_model_template_app_rest
    assert response.json() == {"data": {"ndarray": []}, "meta": {}}
AssertionError: assert {'data': {'na...}, 'meta': {}} == {'data': {'nd...}, 'meta': {}}
  Omitting 1 identical items, use -vv to show
  Differing items:
  {'data': {'names': [], 'ndarray': []}} != {'data': {'ndarray': []}}
  Use -v to get the full diff
---------------------------- Captured stderr setup -----------------------------
INFO:root:starting: seldon-core-microservice MyModel REST --service-type MODEL --persistence 0
2020-07-14 09:21:41,758 - seldon_core.microservice:main:207 - INFO:  Starting microservice.py:main
2020-07-14 09:21:41,758 - seldon_core.microservice:main:208 - INFO:  Seldon Core version: 1.2.2-dev
2020-07-14 09:21:41,761 - seldon_core.microservice:main:294 - INFO:  Parse JAEGER_EXTRA_TAGS []
2020-07-14 09:21:41,761 - seldon_core.microservice:main:297 - INFO:  Annotations: {}
2020-07-14 09:21:41,761 - seldon_core.microservice:main:301 - INFO:  Importing MyModel
2020-07-14 09:21:41,762 - MyModel:__init__:15 - INFO:  Initializing model
DEBUG:root:=== trying again
2020-07-14 09:21:41,915 - seldon_core.microservice:main:374 - INFO:  REST gunicorn microservice running on port 5000
2020-07-14 09:21:41,917 - seldon_core.microservice:main:432 - INFO:  REST metrics microservice running on port 6005
2020-07-14 09:21:41,917 - seldon_core.microservice:main:442 - INFO:  Starting servers
[2020-07-14 09:21:41 +0000] [3782] [INFO] Starting gunicorn 20.0.4
[2020-07-14 09:21:41 +0000] [3782] [INFO] Listening at: http://0.0.0.0:5000 (3782)
[2020-07-14 09:21:41 +0000] [3782] [INFO] Using worker: threads
[2020-07-14 09:21:41 +0000] [3816] [INFO] Booting worker with pid: 3816
[2020-07-14 09:21:42 +0000] [3815] [INFO] Starting gunicorn 20.0.4
[2020-07-14 09:21:42 +0000] [3815] [INFO] Listening at: http://0.0.0.0:6005 (3815)
[2020-07-14 09:21:42 +0000] [3815] [INFO] Using worker: sync
[2020-07-14 09:21:42 +0000] [3823] [INFO] Booting worker with pid: 3823
DEBUG:root:=== trying again
INFO:root:microservice ready
------------------------------ Captured log setup ------------------------------
INFO     root:helpers.py:65 starting: seldon-core-microservice MyModel REST --service-type MODEL --persistence 0
DEBUG    root:helpers.py:80 === trying again
DEBUG    root:helpers.py:80 === trying again
INFO     root:helpers.py:88 microservice ready
----------------------------- Captured stdout call -----------------------------
127.0.0.1 - - [14/Jul/2020:09:21:45 +0000] "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65 "-" "python-requests/2.24.0"
127.0.0.1 - - [14/Jul/2020:09:21:45 +0000] "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45 "-" "python-requests/2.24.0"
----------------------------- Captured stderr call -----------------------------
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): 127.0.0.1:5000
2020-07-14 09:21:45,793 - MyModel:predict:26 - INFO:  Predict called - will run idenity function
DEBUG:urllib3.connectionpool:http://127.0.0.1:5000 "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): 127.0.0.1:5000
2020-07-14 09:21:45,805 - MyModel:send_feedback:40 - INFO:  Send feedback called
DEBUG:urllib3.connectionpool:http://127.0.0.1:5000 "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45
------------------------------ Captured log call -------------------------------
DEBUG    urllib3.connectionpool:connectionpool.py:230 Starting new HTTP connection (1): 127.0.0.1:5000
DEBUG    urllib3.connectionpool:connectionpool.py:442 http://127.0.0.1:5000 "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65
DEBUG    urllib3.connectionpool:connectionpool.py:230 Starting new HTTP connection (1): 127.0.0.1:5000
DEBUG    urllib3.connectionpool:connectionpool.py:442 http://127.0.0.1:5000 "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45
--------------------------- Captured stderr teardown ---------------------------
[2020-07-14 09:21:45 +0000] [3782] [INFO] Handling signal: term
[2020-07-14 09:21:45 +0000] [3823] [INFO] Worker exiting (pid: 3823)
____________ test_model_template_app_rest_submodule[microservice0] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_microservice.py", line 106, in test_model_template_app_rest_submodule
    assert response.json() == {"data": {"ndarray": []}, "meta": {}}
AssertionError: assert {'data': {'na...}, 'meta': {}} == {'data': {'nd...}, 'meta': {}}
  Omitting 1 identical items, use -vv to show
  Differing items:
  {'data': {'names': [], 'ndarray': []}} != {'data': {'ndarray': []}}
  Use -v to get the full diff
---------------------------- Captured stderr setup -----------------------------
[2020-07-14 09:22:00 +0000] [3953] [INFO] Handling signal: term[2020-07-14 09:22:00 +0000] [3920] [INFO] Handling signal: term

INFO:root:starting: seldon-core-microservice mymodule.my_model.MyModel REST --service-type MODEL --persistence 0
[2020-07-14 09:22:01 +0000] [3953] [INFO] Shutting down: Master
[2020-07-14 09:22:01 +0000] [3954] [INFO] Worker exiting (pid: 3954)
Error in atexit._run_exitfuncs:
Traceback (most recent call last):
  File "/opt/conda/lib/python3.7/multiprocessing/util.py", line 322, in _exit_function
    p.join()
  File "/opt/conda/lib/python3.7/multiprocessing/process.py", line 138, in join
    assert self._parent_pid == os.getpid(), 'can only join a child process'
AssertionError: can only join a child process
DEBUG:root:=== trying again
2020-07-14 09:22:02,025 - seldon_core.microservice:main:207 - INFO:  Starting microservice.py:main
2020-07-14 09:22:02,026 - seldon_core.microservice:main:208 - INFO:  Seldon Core version: 1.2.2-dev
2020-07-14 09:22:02,028 - seldon_core.microservice:main:294 - INFO:  Parse JAEGER_EXTRA_TAGS []
2020-07-14 09:22:02,028 - seldon_core.microservice:main:297 - INFO:  Annotations: {}
2020-07-14 09:22:02,029 - seldon_core.microservice:main:305 - INFO:  Importing submodule ['mymodule.my_model', 'MyModel']
2020-07-14 09:22:02,030 - mymodule.my_model:__init__:15 - INFO:  Initializing model
[2020-07-14 09:22:02 +0000] [3920] [INFO] Shutting down: Master
2020-07-14 09:22:02,200 - seldon_core.microservice:main:374 - INFO:  REST gunicorn microservice running on port 5000
2020-07-14 09:22:02,202 - seldon_core.microservice:main:432 - INFO:  REST metrics microservice running on port 6005
2020-07-14 09:22:02,202 - seldon_core.microservice:main:442 - INFO:  Starting servers
[2020-07-14 09:22:02 +0000] [3964] [INFO] Starting gunicorn 20.0.4
[2020-07-14 09:22:02 +0000] [3964] [INFO] Listening at: http://0.0.0.0:5000 (3964)
[2020-07-14 09:22:02 +0000] [3964] [INFO] Using worker: threads
[2020-07-14 09:22:02 +0000] [3998] [INFO] Booting worker with pid: 3998
[2020-07-14 09:22:02 +0000] [3997] [INFO] Starting gunicorn 20.0.4
[2020-07-14 09:22:02 +0000] [3997] [INFO] Listening at: http://0.0.0.0:6005 (3997)
[2020-07-14 09:22:02 +0000] [3997] [INFO] Using worker: sync
[2020-07-14 09:22:02 +0000] [4003] [INFO] Booting worker with pid: 4003
DEBUG:root:=== trying again
INFO:root:microservice ready
------------------------------ Captured log setup ------------------------------
INFO     root:helpers.py:65 starting: seldon-core-microservice mymodule.my_model.MyModel REST --service-type MODEL --persistence 0
DEBUG    root:helpers.py:80 === trying again
DEBUG    root:helpers.py:80 === trying again
INFO     root:helpers.py:88 microservice ready
----------------------------- Captured stdout call -----------------------------
127.0.0.1 - - [14/Jul/2020:09:22:06 +0000] "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65 "-" "python-requests/2.24.0"
127.0.0.1 - - [14/Jul/2020:09:22:06 +0000] "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45 "-" "python-requests/2.24.0"
----------------------------- Captured stderr call -----------------------------
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): 127.0.0.1:5000
2020-07-14 09:22:06,029 - mymodule.my_model:predict:26 - INFO:  Predict called - will run idenity function
DEBUG:urllib3.connectionpool:http://127.0.0.1:5000 "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): 127.0.0.1:5000
2020-07-14 09:22:06,044 - mymodule.my_model:send_feedback:40 - INFO:  Send feedback called
DEBUG:urllib3.connectionpool:http://127.0.0.1:5000 "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45
------------------------------ Captured log call -------------------------------
DEBUG    urllib3.connectionpool:connectionpool.py:230 Starting new HTTP connection (1): 127.0.0.1:5000
DEBUG    urllib3.connectionpool:connectionpool.py:442 http://127.0.0.1:5000 "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65
DEBUG    urllib3.connectionpool:connectionpool.py:230 Starting new HTTP connection (1): 127.0.0.1:5000
DEBUG    urllib3.connectionpool:connectionpool.py:442 http://127.0.0.1:5000 "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45
--------------------------- Captured stderr teardown ---------------------------
[2020-07-14 09:22:06 +0000] [3997] [INFO] Handling signal: term
[2020-07-14 09:22:06 +0000] [4003] [INFO] Worker exiting (pid: 4003)
[2020-07-14 09:22:06 +0000] [3964] [INFO] Handling signal: term
_________________ test_model_template_app_grpc[microservice0] __________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_microservice.py", line 130, in test_model_template_app_grpc
    response = stub.SendFeedback(request=request)
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/grpc/_channel.py", line 826, in __call__
    return _end_unary_response_blocking(state, call, False, None)
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/grpc/_channel.py", line 729, in _end_unary_response_blocking
    raise _InactiveRpcError(state)
grpc._channel._InactiveRpcError: <_InactiveRpcError of RPC that terminated with:
	status = StatusCode.UNKNOWN
	details = "Exception calling application: local variable 'request_proto' referenced before assignment"
	debug_error_string = "{"created":"@1594718531.118471604","description":"Error received from peer ipv4:0.0.0.0:5000","file":"src/core/lib/surface/call.cc","file_line":1055,"grpc_message":"Exception calling application: local variable 'request_proto' referenced before assignment","grpc_status":2}"
>
---------------------------- Captured stderr setup -----------------------------
INFO:root:starting: seldon-core-microservice MyModel GRPC --service-type MODEL --persistence 0
[2020-07-14 09:22:06 +0000] [3997] [INFO] Shutting down: Master
[2020-07-14 09:22:07 +0000] [3998] [INFO] Worker exiting (pid: 3998)
DEBUG:root:=== trying again
Error in atexit._run_exitfuncs:
Traceback (most recent call last):
  File "/opt/conda/lib/python3.7/multiprocessing/util.py", line 322, in _exit_function
    p.join()
  File "/opt/conda/lib/python3.7/multiprocessing/process.py", line 138, in join
    assert self._parent_pid == os.getpid(), 'can only join a child process'
AssertionError: can only join a child process
2020-07-14 09:22:07,257 - seldon_core.microservice:main:207 - INFO:  Starting microservice.py:main
2020-07-14 09:22:07,258 - seldon_core.microservice:main:208 - INFO:  Seldon Core version: 1.2.2-dev
2020-07-14 09:22:07,262 - seldon_core.microservice:main:294 - INFO:  Parse JAEGER_EXTRA_TAGS []
2020-07-14 09:22:07,263 - seldon_core.microservice:main:297 - INFO:  Annotations: {}
2020-07-14 09:22:07,263 - seldon_core.microservice:main:301 - INFO:  Importing MyModel
2020-07-14 09:22:07,264 - MyModel:__init__:15 - INFO:  Initializing model
2020-07-14 09:22:07,542 - seldon_core.microservice:main:432 - INFO:  REST metrics microservice running on port 6005
2020-07-14 09:22:07,546 - seldon_core.microservice:main:442 - INFO:  Starting servers
[2020-07-14 09:22:07 +0000] [3964] [INFO] Shutting down: Master
2020-07-14 09:22:07,696 - seldon_core.microservice:grpc_prediction_server:408 - INFO:  GRPC microservice Running on port 5000
[2020-07-14 09:22:07 +0000] [4044] [INFO] Starting gunicorn 20.0.4
[2020-07-14 09:22:07 +0000] [4044] [INFO] Listening at: http://0.0.0.0:6005 (4044)
[2020-07-14 09:22:07 +0000] [4044] [INFO] Using worker: sync
[2020-07-14 09:22:07 +0000] [4051] [INFO] Booting worker with pid: 4051
DEBUG:root:=== trying again
INFO:root:microservice ready
------------------------------ Captured log setup ------------------------------
INFO     root:helpers.py:65 starting: seldon-core-microservice MyModel GRPC --service-type MODEL --persistence 0
DEBUG    root:helpers.py:80 === trying again
DEBUG    root:helpers.py:80 === trying again
INFO     root:helpers.py:88 microservice ready
----------------------------- Captured stderr call -----------------------------
INFO:root:Calling method... try: 1
2020-07-14 09:22:11,114 - MyModel:predict:26 - INFO:  Predict called - will run idenity function
2020-07-14 09:22:11,116 - grpc._server:_call_behavior:445 - ERROR:  Exception calling application: local variable 'request_proto' referenced before assignment
Traceback (most recent call last):
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/grpc/_server.py", line 435, in _call_behavior
    response_or_iterator = behavior(argument, context)
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/seldon_core/wrapper.py", line 203, in SendFeedback
    self.user_model, feedback_grpc, PRED_UNIT_ID, self.seldon_metrics
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/seldon_core/seldon_methods.py", line 160, in send_feedback
    request_proto
UnboundLocalError: local variable 'request_proto' referenced before assignment
------------------------------ Captured log call -------------------------------
INFO     root:test_microservice.py:27 Calling method... try: 1
--------------------------- Captured stderr teardown ---------------------------
[2020-07-14 09:22:11 +0000] [4051] [INFO] Worker exiting (pid: 4051)
____________ test_model_template_app_tracing_config[microservice0] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_microservice.py", line 212, in test_model_template_app_tracing_config
    assert response.json() == {"data": {"ndarray": []}, "meta": {}}
AssertionError: assert {'data': {'na...}, 'meta': {}} == {'data': {'nd...}, 'meta': {}}
  Omitting 1 identical items, use -vv to show
  Differing items:
  {'data': {'names': [], 'ndarray': []}} != {'data': {'ndarray': []}}
  Use -v to get the full diff
---------------------------- Captured stderr setup -----------------------------
INFO:root:starting: seldon-core-microservice MyModel REST --service-type MODEL --persistence 0 --tracing
[2020-07-14 09:22:21 +0000] [4150] [INFO] Worker exiting (pid: 4150)
[2020-07-14 09:22:21 +0000] [4139] [INFO] Handling signal: term
[2020-07-14 09:22:21 +0000] [4139] [INFO] Shutting down: Master
2020-07-14 09:22:22,193 - seldon_core.microservice:main:207 - INFO:  Starting microservice.py:main
2020-07-14 09:22:22,193 - seldon_core.microservice:main:208 - INFO:  Seldon Core version: 1.2.2-dev
2020-07-14 09:22:22,196 - seldon_core.microservice:main:294 - INFO:  Parse JAEGER_EXTRA_TAGS []
2020-07-14 09:22:22,196 - seldon_core.microservice:main:297 - INFO:  Annotations: {}
2020-07-14 09:22:22,196 - seldon_core.microservice:main:301 - INFO:  Importing MyModel
2020-07-14 09:22:22,196 - MyModel:__init__:15 - INFO:  Initializing model
2020-07-14 09:22:22,197 - seldon_core.microservice:setup_tracing:145 - INFO:  Initializing tracing
DEBUG:root:=== trying again
2020-07-14 09:22:22,244 - seldon_core.microservice:setup_tracing:166 - INFO:  Loading tracing config from /workspace/source/python/tests/resources/tracing_config/tracing.yaml
/workspace/source/python/.tox/py3/lib/python3.7/site-packages/seldon_core/microservice.py:170: YAMLLoadWarning: calling yaml.load() without Loader=... is deprecated, as the default Loader is unsafe. Please read https://msg.pyyaml.org/load for full details.
  config_dict = yaml.load(stream)
2020-07-14 09:22:22,247 - jaeger_tracing:_create_local_agent_channel:446 - INFO:  Initializing Jaeger Tracer with UDP reporter
2020-07-14 09:22:22,248 - jaeger_tracing:new_tracer:384 - INFO:  Using sampler ConstSampler(True)
2020-07-14 09:22:22,250 - jaeger_tracing:_initialize_global_tracer:436 - INFO:  opentracing.tracer initialized to <jaeger_client.tracer.Tracer object at 0x7fdec9e7a8d0>[app_name=MyModel]
2020-07-14 09:22:22,434 - seldon_core.microservice:main:374 - INFO:  REST gunicorn microservice running on port 5000
2020-07-14 09:22:22,435 - seldon_core.microservice:main:432 - INFO:  REST metrics microservice running on port 6005
2020-07-14 09:22:22,435 - seldon_core.microservice:main:442 - INFO:  Starting servers
[2020-07-14 09:22:22 +0000] [4153] [INFO] Starting gunicorn 20.0.4
[2020-07-14 09:22:22 +0000] [4153] [INFO] Listening at: http://0.0.0.0:5000 (4153)
[2020-07-14 09:22:22 +0000] [4153] [INFO] Using worker: threads
[2020-07-14 09:22:22 +0000] [4188] [INFO] Booting worker with pid: 4188
[2020-07-14 09:22:22 +0000] [4187] [INFO] Starting gunicorn 20.0.4
[2020-07-14 09:22:22 +0000] [4187] [INFO] Listening at: http://0.0.0.0:6005 (4187)
[2020-07-14 09:22:22 +0000] [4187] [INFO] Using worker: sync
[2020-07-14 09:22:22 +0000] [4195] [INFO] Booting worker with pid: 4195
DEBUG:root:=== trying again
INFO:root:microservice ready
------------------------------ Captured log setup ------------------------------
INFO     root:helpers.py:65 starting: seldon-core-microservice MyModel REST --service-type MODEL --persistence 0 --tracing
DEBUG    root:helpers.py:80 === trying again
DEBUG    root:helpers.py:80 === trying again
INFO     root:helpers.py:88 microservice ready
----------------------------- Captured stdout call -----------------------------
127.0.0.1 - - [14/Jul/2020:09:22:26 +0000] "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65 "-" "python-requests/2.24.0"
127.0.0.1 - - [14/Jul/2020:09:22:26 +0000] "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45 "-" "python-requests/2.24.0"
----------------------------- Captured stderr call -----------------------------
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): 127.0.0.1:5000
2020-07-14 09:22:26,246 - MyModel:predict:26 - INFO:  Predict called - will run idenity function
DEBUG:urllib3.connectionpool:http://127.0.0.1:5000 "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): 127.0.0.1:5000
2020-07-14 09:22:26,257 - MyModel:send_feedback:40 - INFO:  Send feedback called
DEBUG:urllib3.connectionpool:http://127.0.0.1:5000 "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45
------------------------------ Captured log call -------------------------------
DEBUG    urllib3.connectionpool:connectionpool.py:230 Starting new HTTP connection (1): 127.0.0.1:5000
DEBUG    urllib3.connectionpool:connectionpool.py:442 http://127.0.0.1:5000 "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65
DEBUG    urllib3.connectionpool:connectionpool.py:230 Starting new HTTP connection (1): 127.0.0.1:5000
DEBUG    urllib3.connectionpool:connectionpool.py:442 http://127.0.0.1:5000 "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45
--------------------------- Captured stderr teardown ---------------------------
[2020-07-14 09:22:26 +0000] [4195] [INFO] Worker exiting (pid: 4195)
[2020-07-14 09:22:26 +0000] [4187] [INFO] Handling signal: term
_______________________ test_unimplemented_feedback_raw ________________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_model_microservice.py", line 988, in test_unimplemented_feedback_raw
    j = json.loads(rv.data)
  File "/opt/conda/lib/python3.7/json/__init__.py", line 348, in loads
    return _default_decoder.decode(s)
  File "/opt/conda/lib/python3.7/json/decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "/opt/conda/lib/python3.7/json/decoder.py", line 355, in raw_decode
    raise JSONDecodeError("Expecting value", s, err.value) from None
json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22ndarray%22:%5B%5D%7D%7D,%22reward%22:1.0%7D' [GET]>
ERROR:seldon_core.wrapper:Exception on /send-feedback [GET]
Traceback (most recent call last):
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask/app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask_cors/extension.py", line 161, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask/app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/workspace/source/python/seldon_core/wrapper.py", line 75, in SendFeedback
    user_model, requestJson, PRED_UNIT_ID, seldon_metrics
  File "/workspace/source/python/seldon_core/seldon_methods.py", line 183, in send_feedback
    raise Exception("TODO: Not implemented")
Exception: TODO: Not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:73 REST Request: <Request 'http://localhost/send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22ndarray%22:%5B%5D%7D%7D,%22reward%22:1.0%7D' [GET]>
ERROR    seldon_core.wrapper:app.py:1892 Exception on /send-feedback [GET]
Traceback (most recent call last):
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask/app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask_cors/extension.py", line 161, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask/app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "/workspace/source/python/.tox/py3/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/workspace/source/python/seldon_core/wrapper.py", line 75, in SendFeedback
    user_model, requestJson, PRED_UNIT_ID, seldon_metrics
  File "/workspace/source/python/seldon_core/seldon_methods.py", line 183, in send_feedback
    raise Exception("TODO: Not implemented")
Exception: TODO: Not implemented
___________________________ test_router_feedback_ok ____________________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_router_microservice.py", line 227, in test_router_feedback_ok
    assert rv.status_code == 200
AssertionError: assert 400 == 200
 +  where 400 = <Response 146 bytes [400 BAD REQUEST]>.status_code
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22ndarray%22:%5B%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%221%22:1%7D%7D%7D,%22reward%22:1.0%7D' [GET]>
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
INFO:root:Feedback called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
ERROR:seldon_core.wrapper:{'status': {'status': 1, 'info': 'Unknown data type returned as payload (must be list or np array):None', 'code': -1, 'reason': 'MICROSERVICE_BAD_DATA'}}
INFO:root:{'status': {'code': -1, 'info': 'Unknown data type returned as payload (must be list or np array):None', 'reason': 'MICROSERVICE_BAD_DATA', 'status': 1}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:73 REST Request: <Request 'http://localhost/send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22ndarray%22:%5B%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%221%22:1%7D%7D%7D,%22reward%22:1.0%7D' [GET]>
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
INFO     root:test_router_microservice.py:30 Feedback called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
ERROR    seldon_core.wrapper:wrapper.py:44 {'status': {'status': 1, 'info': 'Unknown data type returned as payload (must be list or np array):None', 'code': -1, 'reason': 'MICROSERVICE_BAD_DATA'}}
INFO     root:test_router_microservice.py:226 {'status': {'code': -1, 'info': 'Unknown data type returned as payload (must be list or np array):None', 'reason': 'MICROSERVICE_BAD_DATA', 'status': 1}}
_____________________________ test_proto_feedback ______________________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_router_microservice.py", line 315, in test_proto_feedback
    resp = app.SendFeedback(feedback, None)
  File "/workspace/source/python/seldon_core/wrapper.py", line 203, in SendFeedback
    self.user_model, feedback_grpc, PRED_UNIT_ID, self.seldon_metrics
  File "/workspace/source/python/seldon_core/seldon_methods.py", line 160, in send_feedback
    request_proto
UnboundLocalError: local variable 'request_proto' referenced before assignment
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}

----------- coverage: platform linux, python 3.7.1-final-0 -----------
Name                                                                                                      Stmts   Miss  Cover
-----------------------------------------------------------------------------------------------------------------------------
.tox/py3/lib/python3.7/site-packages/seldon_core/__init__.py                                                  2      0   100%
.tox/py3/lib/python3.7/site-packages/seldon_core/api_tester.py                                               81     81     0%
.tox/py3/lib/python3.7/site-packages/seldon_core/app.py                                                      36      3    92%
.tox/py3/lib/python3.7/site-packages/seldon_core/batch_processor.py                                          94     94     0%
.tox/py3/lib/python3.7/site-packages/seldon_core/flask_utils.py                                              44     24    45%
.tox/py3/lib/python3.7/site-packages/seldon_core/imports_helper.py                                           19      2    89%
.tox/py3/lib/python3.7/site-packages/seldon_core/metadata.py                                                 32      3    91%
.tox/py3/lib/python3.7/site-packages/seldon_core/metrics.py                                                 119     72    39%
.tox/py3/lib/python3.7/site-packages/seldon_core/microservice.py                                            199     65    67%
.tox/py3/lib/python3.7/site-packages/seldon_core/microservice_tester.py                                     140    140     0%
.tox/py3/lib/python3.7/site-packages/seldon_core/persistence.py                                              45     23    49%
.tox/py3/lib/python3.7/site-packages/seldon_core/proto/__init__.py                                            0      0   100%
.tox/py3/lib/python3.7/site-packages/seldon_core/proto/prediction_pb2.py                                    160      0   100%
.tox/py3/lib/python3.7/site-packages/seldon_core/proto/prediction_pb2_grpc.py                               137     89    35%
.tox/py3/lib/python3.7/site-packages/seldon_core/proto/tensorflow/core/framework/__init__.py                  3      1    67%
.tox/py3/lib/python3.7/site-packages/seldon_core/proto/tensorflow/core/framework/resource_handle_pb2.py      22      0   100%
.tox/py3/lib/python3.7/site-packages/seldon_core/proto/tensorflow/core/framework/tensor_pb2.py               36      0   100%
.tox/py3/lib/python3.7/site-packages/seldon_core/proto/tensorflow/core/framework/tensor_shape_pb2.py         18      0   100%
.tox/py3/lib/python3.7/site-packages/seldon_core/proto/tensorflow/core/framework/types_pb2.py                62      0   100%
.tox/py3/lib/python3.7/site-packages/seldon_core/seldon_client.py                                           599    599     0%
.tox/py3/lib/python3.7/site-packages/seldon_core/seldon_methods.py                                          244    190    22%
.tox/py3/lib/python3.7/site-packages/seldon_core/serving_test_gen.py                                         40     40     0%
.tox/py3/lib/python3.7/site-packages/seldon_core/storage.py                                                 154    126    18%
.tox/py3/lib/python3.7/site-packages/seldon_core/user_model.py                                              162     92    43%
.tox/py3/lib/python3.7/site-packages/seldon_core/utils.py                                                   282    177    37%
.tox/py3/lib/python3.7/site-packages/seldon_core/version.py                                                   1      0   100%
.tox/py3/lib/python3.7/site-packages/seldon_core/wrapper.py                                                 145     75    48%
seldon_core/__init__.py                                                                                       2      0   100%
seldon_core/api_tester.py                                                                                    81     38    53%
seldon_core/app.py                                                                                           36     22    39%
seldon_core/batch_processor.py                                                                               94     94     0%
seldon_core/flask_utils.py                                                                                   44      3    93%
seldon_core/imports_helper.py                                                                                19      2    89%
seldon_core/metadata.py                                                                                      32      0   100%
seldon_core/metrics.py                                                                                      119      1    99%
seldon_core/microservice.py                                                                                 199    120    40%
seldon_core/microservice_tester.py                                                                          140     43    69%
seldon_core/persistence.py                                                                                   45     23    49%
seldon_core/proto/__init__.py                                                                                 0      0   100%
seldon_core/proto/prediction_pb2.py                                                                         160      0   100%
seldon_core/proto/prediction_pb2_grpc.py                                                                    137     65    53%
seldon_core/proto/tensorflow/core/framework/__init__.py                                                       3      1    67%
seldon_core/proto/tensorflow/core/framework/resource_handle_pb2.py                                           22      0   100%
seldon_core/proto/tensorflow/core/framework/tensor_pb2.py                                                    36      0   100%
seldon_core/proto/tensorflow/core/framework/tensor_shape_pb2.py                                              18      0   100%
seldon_core/proto/tensorflow/core/framework/types_pb2.py                                                     62      0   100%
seldon_core/seldon_client.py                                                                                599    284    53%
seldon_core/seldon_methods.py                                                                               244     10    96%
seldon_core/serving_test_gen.py                                                                              40     40     0%
seldon_core/storage.py                                                                                      154     53    66%
seldon_core/user_model.py                                                                                   162     30    81%
seldon_core/utils.py                                                                                        282     43    85%
seldon_core/version.py                                                                                        1      0   100%
seldon_core/wrapper.py                                                                                      145     11    92%
-----------------------------------------------------------------------------------------------------------------------------
TOTAL                                                                                                      5752   2779    52%

=========================== short test summary info ============================
FAILED tests/test_metrics.py::test_seldon_metrics_predict[True-UserObject] - ...
FAILED tests/test_metrics.py::test_seldon_metrics_predict[True-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_predict[False-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_predict[False-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_aggregate[True-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_aggregate[True-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_aggregate[False-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_aggregate[False-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_input[True-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_input[True-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_input[False-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_input[False-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_output[True-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_output[True-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_output[False-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_output[False-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_route[True-UserObject] - Ke...
FAILED tests/test_metrics.py::test_seldon_metrics_route[True-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_route[False-UserObject] - K...
FAILED tests/test_metrics.py::test_seldon_metrics_route[False-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_predict[True-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_predict[True-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_predict[False-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_predict[False-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_aggregate[True-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_aggregate[True-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_aggregate[False-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_aggregate[False-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_input[True-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_input[True-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_input[False-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_input[False-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_output[True-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_output[True-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_output[False-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_output[False-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_route[True-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_route[True-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_route[False-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_route[False-UserObjectLowLevelGrpc]
FAILED tests/test_microservice.py::test_model_template_app_rest - AssertionEr...
FAILED tests/test_microservice.py::test_model_template_app_rest_submodule[microservice0]
FAILED tests/test_microservice.py::test_model_template_app_grpc[microservice0]
FAILED tests/test_microservice.py::test_model_template_app_tracing_config[microservice0]
FAILED tests/test_model_microservice.py::test_unimplemented_feedback_raw - js...
FAILED tests/test_router_microservice.py::test_router_feedback_ok - assert 40...
FAILED tests/test_router_microservice.py::test_proto_feedback - UnboundLocalE...
============= 47 failed, 315 passed, 7 skipped in 98.98s (0:01:38) =============
ERROR: InvocationError for command /workspace/source/python/.tox/py3/bin/pytest (exited with code 1)
tensorflow create: /workspace/source/python/.tox/tensorflow
tensorflow installdeps: tenacity, pytest, pytest-cov, Pillow
tensorflow inst: /workspace/source/python/.tox/.tmp/package/1/seldon-core-1.2.2.dev0.zip
tensorflow installed: absl-py==0.9.0,astunparse==1.6.3,attrs==19.3.0,azure-common==1.1.25,azure-storage-blob==2.1.0,azure-storage-common==2.1.0,cachetools==4.1.1,certifi==2020.6.20,cffi==1.14.0,chardet==3.0.4,click==7.1.2,configparser==5.0.0,coverage==5.2,cryptography==2.9.2,Flask==1.1.2,Flask-Cors==3.0.8,Flask-OpenTracing==1.1.0,flatbuffers==1.12,gast==0.3.3,google-auth==1.19.0,google-auth-oauthlib==0.4.1,google-pasta==0.2.0,grpcio==1.30.0,grpcio-opentracing==1.1.4,gunicorn==20.0.4,h5py==2.10.0,idna==2.10,importlib-metadata==1.7.0,itsdangerous==1.1.0,jaeger-client==4.1.0,Jinja2==2.11.2,jsonschema==3.2.0,Keras-Preprocessing==1.1.2,Markdown==3.2.2,MarkupSafe==1.1.1,minio==5.0.10,more-itertools==8.4.0,numpy==1.19.0,oauthlib==3.1.0,opentracing==2.2.0,opt-einsum==3.2.1,packaging==20.4,Pillow==7.2.0,pluggy==0.13.1,prometheus-client==0.8.0,protobuf==3.12.2,py==1.9.0,pyasn1==0.4.8,pyasn1-modules==0.2.8,pycparser==2.20,pyparsing==2.4.7,pyrsistent==0.16.0,pytest==5.4.3,pytest-cov==2.10.0,python-dateutil==2.8.1,pytz==2020.1,PyYAML==5.3.1,redis==3.5.3,requests==2.24.0,requests-oauthlib==1.3.0,rsa==4.6,scipy==1.4.1,seldon-core @ file:///workspace/source/python/.tox/.tmp/package/1/seldon-core-1.2.2.dev0.zip,six==1.15.0,tenacity==6.2.0,tensorboard==2.2.2,tensorboard-plugin-wit==1.7.0,tensorflow==2.2.0,tensorflow-estimator==2.2.0,termcolor==1.1.0,threadloop==1.0.2,thrift==0.13.0,tornado==5.1.1,urllib3==1.25.9,wcwidth==0.2.5,Werkzeug==1.0.1,wrapt==1.12.1,zipp==3.1.0
tensorflow run-test-pre: PYTHONHASHSEED='1076758190'
tensorflow run-test: commands[0] | pytest
============================= test session starts ==============================
platform linux -- Python 3.7.1, pytest-5.4.3, py-1.9.0, pluggy-0.13.1
cachedir: .tox/tensorflow/.pytest_cache
rootdir: /workspace/source/python, inifile: setup.cfg
plugins: cov-2.10.0
collected 369 items

tests/test_api_tester.py ..                                              [  0%]
tests/test_application_exception_microservice.py ..                      [  1%]
tests/test_azure_storage.py ......                                       [  2%]
tests/test_combiner_microservice.py .....................                [  8%]
tests/test_metadata.py ................................................. [ 21%]
...                                                                      [ 22%]
tests/test_metrics.py ...................FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF [ 36%]
FFFFFFFFF........                                                        [ 40%]
tests/test_microservice.py .F...FF..F...                                 [ 44%]
tests/test_microservice_tester.py .....                                  [ 45%]
tests/test_model_microservice.py ....................................... [ 56%]
.......F                                                                 [ 58%]
tests/test_router_microservice.py ........F....F...                      [ 62%]
tests/test_s3_storage.py ...                                             [ 63%]
tests/test_seldon_client.py ..................................           [ 72%]
tests/test_storage.py ...s...s                                           [ 75%]
tests/test_transformer_microservice.py ................................. [ 84%]
........                                                                 [ 86%]
tests/test_user_model.py ....                                            [ 87%]
tests/test_utils.py ...............................................      [100%]

=================================== FAILURES ===================================
_________________ test_seldon_metrics_predict[True-UserObject] _________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 345, in test_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Predict called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:57 REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:159 Predict called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:65 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
_____________ test_seldon_metrics_predict[True-UserObjectLowLevel] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 345, in test_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Predict raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:57 REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:207 Predict raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:65 REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
________________ test_seldon_metrics_predict[False-UserObject] _________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 345, in test_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Predict called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:57 REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:159 Predict called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:65 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
____________ test_seldon_metrics_predict[False-UserObjectLowLevel] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 345, in test_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Predict raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:57 REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:207 Predict raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:65 REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
________________ test_seldon_metrics_aggregate[True-UserObject] ________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 370, in test_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO:root:Aggregate called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:112 REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO     root:test_metrics.py:163 Aggregate called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:116 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
____________ test_seldon_metrics_aggregate[True-UserObjectLowLevel] ____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 370, in test_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO:root:Aggregate raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:112 REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO     root:test_metrics.py:214 Aggregate raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:116 REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
_______________ test_seldon_metrics_aggregate[False-UserObject] ________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 370, in test_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO:root:Aggregate called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:112 REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO     root:test_metrics.py:163 Aggregate called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:116 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
___________ test_seldon_metrics_aggregate[False-UserObjectLowLevel] ____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 370, in test_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO:root:Aggregate raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:112 REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO     root:test_metrics.py:214 Aggregate raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:116 REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
_____________ test_seldon_metrics_transform_input[True-UserObject] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 397, in test_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform input called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:82 REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:167 Transform input called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:86 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
_________ test_seldon_metrics_transform_input[True-UserObjectLowLevel] _________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 397, in test_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform input raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:82 REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:221 Transform input raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:86 REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
____________ test_seldon_metrics_transform_input[False-UserObject] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 397, in test_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform input called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:82 REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:167 Transform input called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:86 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
________ test_seldon_metrics_transform_input[False-UserObjectLowLevel] _________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 397, in test_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform input raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:82 REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:221 Transform input raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:86 REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
____________ test_seldon_metrics_transform_output[True-UserObject] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 424, in test_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform output called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:92 REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:171 Transform output called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:96 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
________ test_seldon_metrics_transform_output[True-UserObjectLowLevel] _________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 424, in test_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform output raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:92 REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:228 Transform output raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:96 REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
____________ test_seldon_metrics_transform_output[False-UserObject] ____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 424, in test_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform output called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:92 REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:171 Transform output called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:96 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
________ test_seldon_metrics_transform_output[False-UserObjectLowLevel] ________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 424, in test_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform output raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:92 REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:228 Transform output raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:96 REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
__________________ test_seldon_metrics_route[True-UserObject] __________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 449, in test_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Route called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:class_names is not implemented
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': [[22]], 'names': ['t:0']}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:102 REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:175 Route called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:106 REST Response: {'data': {'ndarray': [[22]], 'names': ['t:0']}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
______________ test_seldon_metrics_route[True-UserObjectLowLevel] ______________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 449, in test_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Route raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': [22]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:102 REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:235 Route raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:106 REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': [22]}}
_________________ test_seldon_metrics_route[False-UserObject] __________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 449, in test_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Route called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:class_names is not implemented
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': [[22]], 'names': ['t:0']}, 'meta': {}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:102 REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:175 Route called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:106 REST Response: {'data': {'ndarray': [[22]], 'names': ['t:0']}, 'meta': {}}
_____________ test_seldon_metrics_route[False-UserObjectLowLevel] ______________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 449, in test_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Route raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': [22]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:102 REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:235 Route raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:106 REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': [22]}}
______________ test_proto_seldon_metrics_predict[True-UserObject] ______________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 477, in test_proto_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Predict called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:159 Predict called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
________ test_proto_seldon_metrics_predict[True-UserObjectLowLevelGrpc] ________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 477, in test_proto_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Predict raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:256 Predict raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
_____________ test_proto_seldon_metrics_predict[False-UserObject] ______________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 477, in test_proto_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Predict called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:159 Predict called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
_______ test_proto_seldon_metrics_predict[False-UserObjectLowLevelGrpc] ________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 477, in test_proto_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Predict raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:256 Predict raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
_____________ test_proto_seldon_metrics_aggregate[True-UserObject] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 511, in test_proto_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Aggregate called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:163 Aggregate called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
_______ test_proto_seldon_metrics_aggregate[True-UserObjectLowLevelGrpc] _______
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 511, in test_proto_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Aggregate raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:269 Aggregate raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
____________ test_proto_seldon_metrics_aggregate[False-UserObject] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 511, in test_proto_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Aggregate called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:163 Aggregate called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
______ test_proto_seldon_metrics_aggregate[False-UserObjectLowLevelGrpc] _______
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 511, in test_proto_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Aggregate raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:269 Aggregate raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
__________ test_proto_seldon_metrics_transform_input[True-UserObject] __________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 538, in test_proto_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform input called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:167 Transform input called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
____ test_proto_seldon_metrics_transform_input[True-UserObjectLowLevelGrpc] ____
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 538, in test_proto_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform input raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:282 Transform input raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
_________ test_proto_seldon_metrics_transform_input[False-UserObject] __________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 538, in test_proto_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform input called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:167 Transform input called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
___ test_proto_seldon_metrics_transform_input[False-UserObjectLowLevelGrpc] ____
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 538, in test_proto_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform input raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:282 Transform input raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
_________ test_proto_seldon_metrics_transform_output[True-UserObject] __________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 565, in test_proto_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform output called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:171 Transform output called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
___ test_proto_seldon_metrics_transform_output[True-UserObjectLowLevelGrpc] ____
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 565, in test_proto_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform output raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:295 Transform output raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
_________ test_proto_seldon_metrics_transform_output[False-UserObject] _________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 565, in test_proto_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform output called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:171 Transform output called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
___ test_proto_seldon_metrics_transform_output[False-UserObjectLowLevelGrpc] ___
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 565, in test_proto_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform output raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:295 Transform output raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
_______________ test_proto_seldon_metrics_route[True-UserObject] _______________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 592, in test_proto_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Route called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:175 Route called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
_________ test_proto_seldon_metrics_route[True-UserObjectLowLevelGrpc] _________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 592, in test_proto_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Route raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:308 Route raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
______________ test_proto_seldon_metrics_route[False-UserObject] _______________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 592, in test_proto_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Route called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:175 Route called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
________ test_proto_seldon_metrics_route[False-UserObjectLowLevelGrpc] _________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 592, in test_proto_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Route raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:308 Route raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
_________________________ test_model_template_app_rest _________________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_microservice.py", line 56, in test_model_template_app_rest
    assert response.json() == {"data": {"ndarray": []}, "meta": {}}
AssertionError: assert {'data': {'na...}, 'meta': {}} == {'data': {'nd...}, 'meta': {}}
  Omitting 1 identical items, use -vv to show
  Differing items:
  {'data': {'names': [], 'ndarray': []}} != {'data': {'ndarray': []}}
  Use -v to get the full diff
---------------------------- Captured stderr setup -----------------------------
INFO:root:starting: seldon-core-microservice MyModel REST --service-type MODEL --persistence 0
DEBUG:root:=== trying again
2020-07-14 09:25:24,452 - seldon_core.microservice:main:207 - INFO:  Starting microservice.py:main
2020-07-14 09:25:24,452 - seldon_core.microservice:main:208 - INFO:  Seldon Core version: 1.2.2-dev
2020-07-14 09:25:24,455 - seldon_core.microservice:main:294 - INFO:  Parse JAEGER_EXTRA_TAGS []
2020-07-14 09:25:24,455 - seldon_core.microservice:main:297 - INFO:  Annotations: {}
2020-07-14 09:25:24,455 - seldon_core.microservice:main:301 - INFO:  Importing MyModel
2020-07-14 09:25:24,456 - MyModel:__init__:15 - INFO:  Initializing model
2020-07-14 09:25:24,805 - seldon_core.microservice:main:374 - INFO:  REST gunicorn microservice running on port 5000
2020-07-14 09:25:24,806 - seldon_core.microservice:main:432 - INFO:  REST metrics microservice running on port 6005
2020-07-14 09:25:24,807 - seldon_core.microservice:main:442 - INFO:  Starting servers
[2020-07-14 09:25:24 +0000] [11082] [INFO] Starting gunicorn 20.0.4
[2020-07-14 09:25:24 +0000] [11082] [INFO] Listening at: http://0.0.0.0:5000 (11082)
[2020-07-14 09:25:24 +0000] [11082] [INFO] Using worker: threads
[2020-07-14 09:25:24 +0000] [11131] [INFO] Booting worker with pid: 11131
[2020-07-14 09:25:25 +0000] [11130] [INFO] Starting gunicorn 20.0.4
[2020-07-14 09:25:25 +0000] [11130] [INFO] Listening at: http://0.0.0.0:6005 (11130)
[2020-07-14 09:25:25 +0000] [11130] [INFO] Using worker: sync
[2020-07-14 09:25:25 +0000] [11138] [INFO] Booting worker with pid: 11138
DEBUG:root:=== trying again
INFO:root:microservice ready
------------------------------ Captured log setup ------------------------------
INFO     root:helpers.py:65 starting: seldon-core-microservice MyModel REST --service-type MODEL --persistence 0
DEBUG    root:helpers.py:80 === trying again
DEBUG    root:helpers.py:80 === trying again
INFO     root:helpers.py:88 microservice ready
----------------------------- Captured stdout call -----------------------------
127.0.0.1 - - [14/Jul/2020:09:25:26 +0000] "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65 "-" "python-requests/2.24.0"
127.0.0.1 - - [14/Jul/2020:09:25:26 +0000] "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45 "-" "python-requests/2.24.0"
----------------------------- Captured stderr call -----------------------------
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): 127.0.0.1:5000
2020-07-14 09:25:26,469 - MyModel:predict:26 - INFO:  Predict called - will run idenity function
DEBUG:urllib3.connectionpool:http://127.0.0.1:5000 "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): 127.0.0.1:5000
2020-07-14 09:25:26,483 - MyModel:send_feedback:40 - INFO:  Send feedback called
DEBUG:urllib3.connectionpool:http://127.0.0.1:5000 "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45
------------------------------ Captured log call -------------------------------
DEBUG    urllib3.connectionpool:connectionpool.py:230 Starting new HTTP connection (1): 127.0.0.1:5000
DEBUG    urllib3.connectionpool:connectionpool.py:442 http://127.0.0.1:5000 "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65
DEBUG    urllib3.connectionpool:connectionpool.py:230 Starting new HTTP connection (1): 127.0.0.1:5000
DEBUG    urllib3.connectionpool:connectionpool.py:442 http://127.0.0.1:5000 "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45
--------------------------- Captured stderr teardown ---------------------------
[2020-07-14 09:25:26 +0000] [11130] [INFO] Handling signal: term
[2020-07-14 09:25:26 +0000] [11082] [INFO] Handling signal: term
[2020-07-14 09:25:26 +0000] [11138] [INFO] Worker exiting (pid: 11138)
____________ test_model_template_app_rest_submodule[microservice0] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_microservice.py", line 106, in test_model_template_app_rest_submodule
    assert response.json() == {"data": {"ndarray": []}, "meta": {}}
AssertionError: assert {'data': {'na...}, 'meta': {}} == {'data': {'nd...}, 'meta': {}}
  Omitting 1 identical items, use -vv to show
  Differing items:
  {'data': {'names': [], 'ndarray': []}} != {'data': {'ndarray': []}}
  Use -v to get the full diff
---------------------------- Captured stdout setup -----------------------------
127.0.0.1 - - [14/Jul/2020:09:25:41 +0000] "GET /metrics-endpoint HTTP/1.1" 200 0 "-" "python-requests/2.24.0"
---------------------------- Captured stderr setup -----------------------------
INFO:root:starting: seldon-core-microservice mymodule.my_model.MyModel REST --service-type MODEL --persistence 0
[2020-07-14 09:25:41 +0000] [11320] [INFO] Worker exiting (pid: 11320)
[2020-07-14 09:25:41 +0000] [11312] [INFO] Shutting down: Master
[2020-07-14 09:25:42 +0000] [11313] [INFO] Worker exiting (pid: 11313)
Error in atexit._run_exitfuncs:
Traceback (most recent call last):
  File "/opt/conda/lib/python3.7/multiprocessing/util.py", line 322, in _exit_function
    p.join()
  File "/opt/conda/lib/python3.7/multiprocessing/process.py", line 138, in join
    assert self._parent_pid == os.getpid(), 'can only join a child process'
AssertionError: can only join a child process
DEBUG:root:=== trying again
[2020-07-14 09:25:43 +0000] [11264] [INFO] Shutting down: Master
2020-07-14 09:25:44,816 - seldon_core.microservice:main:207 - INFO:  Starting microservice.py:main
2020-07-14 09:25:44,816 - seldon_core.microservice:main:208 - INFO:  Seldon Core version: 1.2.2-dev
2020-07-14 09:25:44,819 - seldon_core.microservice:main:294 - INFO:  Parse JAEGER_EXTRA_TAGS []
2020-07-14 09:25:44,820 - seldon_core.microservice:main:297 - INFO:  Annotations: {}
2020-07-14 09:25:44,820 - seldon_core.microservice:main:305 - INFO:  Importing submodule ['mymodule.my_model', 'MyModel']
2020-07-14 09:25:44,821 - mymodule.my_model:__init__:15 - INFO:  Initializing model
2020-07-14 09:25:45,164 - seldon_core.microservice:main:374 - INFO:  REST gunicorn microservice running on port 5000
2020-07-14 09:25:45,166 - seldon_core.microservice:main:432 - INFO:  REST metrics microservice running on port 6005
2020-07-14 09:25:45,166 - seldon_core.microservice:main:442 - INFO:  Starting servers
[2020-07-14 09:25:45 +0000] [11323] [INFO] Starting gunicorn 20.0.4
[2020-07-14 09:25:45 +0000] [11323] [INFO] Listening at: http://0.0.0.0:5000 (11323)
[2020-07-14 09:25:45 +0000] [11323] [INFO] Using worker: threads
[2020-07-14 09:25:45 +0000] [11372] [INFO] Booting worker with pid: 11372
[2020-07-14 09:25:45 +0000] [11371] [INFO] Starting gunicorn 20.0.4
[2020-07-14 09:25:45 +0000] [11371] [INFO] Listening at: http://0.0.0.0:6005 (11371)
[2020-07-14 09:25:45 +0000] [11371] [INFO] Using worker: sync
[2020-07-14 09:25:45 +0000] [11379] [INFO] Booting worker with pid: 11379
DEBUG:root:=== trying again
INFO:root:microservice ready
------------------------------ Captured log setup ------------------------------
INFO     root:helpers.py:65 starting: seldon-core-microservice mymodule.my_model.MyModel REST --service-type MODEL --persistence 0
DEBUG    root:helpers.py:80 === trying again
DEBUG    root:helpers.py:80 === trying again
INFO     root:helpers.py:88 microservice ready
----------------------------- Captured stdout call -----------------------------
127.0.0.1 - - [14/Jul/2020:09:25:46 +0000] "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45 "-" "python-requests/2.24.0"
----------------------------- Captured stderr call -----------------------------
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): 127.0.0.1:5000
2020-07-14 09:25:46,683 - mymodule.my_model:predict:26 - INFO:  Predict called - will run idenity function
DEBUG:urllib3.connectionpool:http://127.0.0.1:5000 "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): 127.0.0.1:5000
2020-07-14 09:25:46,694 - mymodule.my_model:send_feedback:40 - INFO:  Send feedback called
DEBUG:urllib3.connectionpool:http://127.0.0.1:5000 "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45
------------------------------ Captured log call -------------------------------
DEBUG    urllib3.connectionpool:connectionpool.py:230 Starting new HTTP connection (1): 127.0.0.1:5000
DEBUG    urllib3.connectionpool:connectionpool.py:442 http://127.0.0.1:5000 "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65
DEBUG    urllib3.connectionpool:connectionpool.py:230 Starting new HTTP connection (1): 127.0.0.1:5000
DEBUG    urllib3.connectionpool:connectionpool.py:442 http://127.0.0.1:5000 "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45
--------------------------- Captured stdout teardown ---------------------------
127.0.0.1 - - [14/Jul/2020:09:25:46 +0000] "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65 "-" "python-requests/2.24.0"
--------------------------- Captured stderr teardown ---------------------------
[2020-07-14 09:25:46 +0000] [11323] [INFO] Handling signal: term
_________________ test_model_template_app_grpc[microservice0] __________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_microservice.py", line 130, in test_model_template_app_grpc
    response = stub.SendFeedback(request=request)
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/grpc/_channel.py", line 826, in __call__
    return _end_unary_response_blocking(state, call, False, None)
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/grpc/_channel.py", line 729, in _end_unary_response_blocking
    raise _InactiveRpcError(state)
grpc._channel._InactiveRpcError: <_InactiveRpcError of RPC that terminated with:
	status = StatusCode.UNKNOWN
	details = "Exception calling application: local variable 'request_proto' referenced before assignment"
	debug_error_string = "{"created":"@1594718751.769904721","description":"Error received from peer ipv4:0.0.0.0:5000","file":"src/core/lib/surface/call.cc","file_line":1055,"grpc_message":"Exception calling application: local variable 'request_proto' referenced before assignment","grpc_status":2}"
>
---------------------------- Captured stderr setup -----------------------------
[2020-07-14 09:25:46 +0000] [11379] [INFO] Worker exiting (pid: 11379)
[2020-07-14 09:25:46 +0000] [11371] [INFO] Handling signal: term
INFO:root:starting: seldon-core-microservice MyModel GRPC --service-type MODEL --persistence 0
[2020-07-14 09:25:46 +0000] [11371] [INFO] Shutting down: Master
[2020-07-14 09:25:47 +0000] [11372] [INFO] Worker exiting (pid: 11372)
Error in atexit._run_exitfuncs:
Traceback (most recent call last):
  File "/opt/conda/lib/python3.7/multiprocessing/util.py", line 322, in _exit_function
    p.join()
  File "/opt/conda/lib/python3.7/multiprocessing/process.py", line 138, in join
    assert self._parent_pid == os.getpid(), 'can only join a child process'
AssertionError: can only join a child process
DEBUG:root:=== trying again
[2020-07-14 09:25:48 +0000] [11323] [INFO] Shutting down: Master
2020-07-14 09:25:49,880 - seldon_core.microservice:main:207 - INFO:  Starting microservice.py:main
2020-07-14 09:25:49,880 - seldon_core.microservice:main:208 - INFO:  Seldon Core version: 1.2.2-dev
2020-07-14 09:25:49,883 - seldon_core.microservice:main:294 - INFO:  Parse JAEGER_EXTRA_TAGS []
2020-07-14 09:25:49,883 - seldon_core.microservice:main:297 - INFO:  Annotations: {}
2020-07-14 09:25:49,883 - seldon_core.microservice:main:301 - INFO:  Importing MyModel
2020-07-14 09:25:49,884 - MyModel:__init__:15 - INFO:  Initializing model
2020-07-14 09:25:50,230 - seldon_core.microservice:main:432 - INFO:  REST metrics microservice running on port 6005
2020-07-14 09:25:50,233 - seldon_core.microservice:main:442 - INFO:  Starting servers
2020-07-14 09:25:50,289 - seldon_core.microservice:grpc_prediction_server:408 - INFO:  GRPC microservice Running on port 5000
[2020-07-14 09:25:50 +0000] [11433] [INFO] Starting gunicorn 20.0.4
[2020-07-14 09:25:50 +0000] [11433] [INFO] Listening at: http://0.0.0.0:6005 (11433)
[2020-07-14 09:25:50 +0000] [11433] [INFO] Using worker: sync
[2020-07-14 09:25:50 +0000] [11444] [INFO] Booting worker with pid: 11444
DEBUG:root:=== trying again
INFO:root:microservice ready
------------------------------ Captured log setup ------------------------------
INFO     root:helpers.py:65 starting: seldon-core-microservice MyModel GRPC --service-type MODEL --persistence 0
DEBUG    root:helpers.py:80 === trying again
DEBUG    root:helpers.py:80 === trying again
INFO     root:helpers.py:88 microservice ready
----------------------------- Captured stderr call -----------------------------
INFO:root:Calling method... try: 1
2020-07-14 09:25:51,763 - MyModel:predict:26 - INFO:  Predict called - will run idenity function
2020-07-14 09:25:51,767 - grpc._server:_call_behavior:445 - ERROR:  Exception calling application: local variable 'request_proto' referenced before assignment
Traceback (most recent call last):
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/grpc/_server.py", line 435, in _call_behavior
    response_or_iterator = behavior(argument, context)
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/seldon_core/wrapper.py", line 203, in SendFeedback
    self.user_model, feedback_grpc, PRED_UNIT_ID, self.seldon_metrics
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/seldon_core/seldon_methods.py", line 160, in send_feedback
    request_proto
UnboundLocalError: local variable 'request_proto' referenced before assignment
------------------------------ Captured log call -------------------------------
INFO     root:test_microservice.py:27 Calling method... try: 1
--------------------------- Captured stderr teardown ---------------------------
[2020-07-14 09:25:51 +0000] [11444] [INFO] Worker exiting (pid: 11444)
____________ test_model_template_app_tracing_config[microservice0] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_microservice.py", line 212, in test_model_template_app_tracing_config
    assert response.json() == {"data": {"ndarray": []}, "meta": {}}
AssertionError: assert {'data': {'na...}, 'meta': {}} == {'data': {'nd...}, 'meta': {}}
  Omitting 1 identical items, use -vv to show
  Differing items:
  {'data': {'names': [], 'ndarray': []}} != {'data': {'ndarray': []}}
  Use -v to get the full diff
---------------------------- Captured stderr setup -----------------------------
[2020-07-14 09:26:01 +0000] [11568] [INFO] Worker exiting (pid: 11568)
[2020-07-14 09:26:01 +0000] [11557] [INFO] Handling signal: term
INFO:root:starting: seldon-core-microservice MyModel REST --service-type MODEL --persistence 0 --tracing
[2020-07-14 09:26:02 +0000] [11557] [INFO] Shutting down: Master
DEBUG:root:=== trying again
2020-07-14 09:26:04,881 - seldon_core.microservice:main:207 - INFO:  Starting microservice.py:main
2020-07-14 09:26:04,881 - seldon_core.microservice:main:208 - INFO:  Seldon Core version: 1.2.2-dev
2020-07-14 09:26:04,884 - seldon_core.microservice:main:294 - INFO:  Parse JAEGER_EXTRA_TAGS []
2020-07-14 09:26:04,884 - seldon_core.microservice:main:297 - INFO:  Annotations: {}
2020-07-14 09:26:04,884 - seldon_core.microservice:main:301 - INFO:  Importing MyModel
2020-07-14 09:26:04,885 - MyModel:__init__:15 - INFO:  Initializing model
2020-07-14 09:26:04,885 - seldon_core.microservice:setup_tracing:145 - INFO:  Initializing tracing
2020-07-14 09:26:04,938 - seldon_core.microservice:setup_tracing:166 - INFO:  Loading tracing config from /workspace/source/python/tests/resources/tracing_config/tracing.yaml
/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/seldon_core/microservice.py:170: YAMLLoadWarning: calling yaml.load() without Loader=... is deprecated, as the default Loader is unsafe. Please read https://msg.pyyaml.org/load for full details.
  config_dict = yaml.load(stream)
2020-07-14 09:26:04,941 - jaeger_tracing:_create_local_agent_channel:446 - INFO:  Initializing Jaeger Tracer with UDP reporter
2020-07-14 09:26:04,943 - jaeger_tracing:new_tracer:384 - INFO:  Using sampler ConstSampler(True)
2020-07-14 09:26:04,944 - jaeger_tracing:_initialize_global_tracer:436 - INFO:  opentracing.tracer initialized to <jaeger_client.tracer.Tracer object at 0x7f90bbb07748>[app_name=MyModel]
2020-07-14 09:26:05,304 - seldon_core.microservice:main:374 - INFO:  REST gunicorn microservice running on port 5000
2020-07-14 09:26:05,306 - seldon_core.microservice:main:432 - INFO:  REST metrics microservice running on port 6005
2020-07-14 09:26:05,306 - seldon_core.microservice:main:442 - INFO:  Starting servers
[2020-07-14 09:26:05 +0000] [11571] [INFO] Starting gunicorn 20.0.4
[2020-07-14 09:26:05 +0000] [11571] [INFO] Listening at: http://0.0.0.0:5000 (11571)
[2020-07-14 09:26:05 +0000] [11571] [INFO] Using worker: threads
[2020-07-14 09:26:05 +0000] [11621] [INFO] Booting worker with pid: 11621
[2020-07-14 09:26:05 +0000] [11620] [INFO] Starting gunicorn 20.0.4
[2020-07-14 09:26:05 +0000] [11620] [INFO] Listening at: http://0.0.0.0:6005 (11620)
[2020-07-14 09:26:05 +0000] [11620] [INFO] Using worker: sync
[2020-07-14 09:26:05 +0000] [11628] [INFO] Booting worker with pid: 11628
DEBUG:root:=== trying again
INFO:root:microservice ready
------------------------------ Captured log setup ------------------------------
INFO     root:helpers.py:65 starting: seldon-core-microservice MyModel REST --service-type MODEL --persistence 0 --tracing
DEBUG    root:helpers.py:80 === trying again
DEBUG    root:helpers.py:80 === trying again
INFO     root:helpers.py:88 microservice ready
----------------------------- Captured stderr call -----------------------------
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): 127.0.0.1:5000
2020-07-14 09:26:06,954 - MyModel:predict:26 - INFO:  Predict called - will run idenity function
DEBUG:urllib3.connectionpool:http://127.0.0.1:5000 "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): 127.0.0.1:5000
2020-07-14 09:26:06,975 - MyModel:send_feedback:40 - INFO:  Send feedback called
DEBUG:urllib3.connectionpool:http://127.0.0.1:5000 "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45
------------------------------ Captured log call -------------------------------
DEBUG    urllib3.connectionpool:connectionpool.py:230 Starting new HTTP connection (1): 127.0.0.1:5000
DEBUG    urllib3.connectionpool:connectionpool.py:442 http://127.0.0.1:5000 "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65
DEBUG    urllib3.connectionpool:connectionpool.py:230 Starting new HTTP connection (1): 127.0.0.1:5000
DEBUG    urllib3.connectionpool:connectionpool.py:442 http://127.0.0.1:5000 "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45
--------------------------- Captured stdout teardown ---------------------------
127.0.0.1 - - [14/Jul/2020:09:26:06 +0000] "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45 "-" "python-requests/2.24.0"
127.0.0.1 - - [14/Jul/2020:09:26:06 +0000] "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65 "-" "python-requests/2.24.0"
--------------------------- Captured stderr teardown ---------------------------
[2020-07-14 09:26:06 +0000] [11571] [INFO] Handling signal: term
[2020-07-14 09:26:06 +0000] [11621] [INFO] Worker exiting (pid: 11621)
[2020-07-14 09:26:07 +0000] [11628] [INFO] Worker exiting (pid: 11628)
_______________________ test_unimplemented_feedback_raw ________________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_model_microservice.py", line 988, in test_unimplemented_feedback_raw
    j = json.loads(rv.data)
  File "/opt/conda/lib/python3.7/json/__init__.py", line 348, in loads
    return _default_decoder.decode(s)
  File "/opt/conda/lib/python3.7/json/decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "/opt/conda/lib/python3.7/json/decoder.py", line 355, in raw_decode
    raise JSONDecodeError("Expecting value", s, err.value) from None
json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22ndarray%22:%5B%5D%7D%7D,%22reward%22:1.0%7D' [GET]>
ERROR:seldon_core.wrapper:Exception on /send-feedback [GET]
Traceback (most recent call last):
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask/app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask_cors/extension.py", line 161, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask/app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/workspace/source/python/seldon_core/wrapper.py", line 75, in SendFeedback
    user_model, requestJson, PRED_UNIT_ID, seldon_metrics
  File "/workspace/source/python/seldon_core/seldon_methods.py", line 183, in send_feedback
    raise Exception("TODO: Not implemented")
Exception: TODO: Not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:73 REST Request: <Request 'http://localhost/send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22ndarray%22:%5B%5D%7D%7D,%22reward%22:1.0%7D' [GET]>
ERROR    seldon_core.wrapper:app.py:1892 Exception on /send-feedback [GET]
Traceback (most recent call last):
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask/app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask_cors/extension.py", line 161, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask/app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "/workspace/source/python/.tox/tensorflow/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/workspace/source/python/seldon_core/wrapper.py", line 75, in SendFeedback
    user_model, requestJson, PRED_UNIT_ID, seldon_metrics
  File "/workspace/source/python/seldon_core/seldon_methods.py", line 183, in send_feedback
    raise Exception("TODO: Not implemented")
Exception: TODO: Not implemented
___________________________ test_router_feedback_ok ____________________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_router_microservice.py", line 227, in test_router_feedback_ok
    assert rv.status_code == 200
AssertionError: assert 400 == 200
 +  where 400 = <Response 146 bytes [400 BAD REQUEST]>.status_code
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22ndarray%22:%5B%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%221%22:1%7D%7D%7D,%22reward%22:1.0%7D' [GET]>
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
INFO:root:Feedback called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
ERROR:seldon_core.wrapper:{'status': {'status': 1, 'info': 'Unknown data type returned as payload (must be list or np array):None', 'code': -1, 'reason': 'MICROSERVICE_BAD_DATA'}}
INFO:root:{'status': {'code': -1, 'info': 'Unknown data type returned as payload (must be list or np array):None', 'reason': 'MICROSERVICE_BAD_DATA', 'status': 1}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:73 REST Request: <Request 'http://localhost/send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22ndarray%22:%5B%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%221%22:1%7D%7D%7D,%22reward%22:1.0%7D' [GET]>
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
INFO     root:test_router_microservice.py:30 Feedback called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
ERROR    seldon_core.wrapper:wrapper.py:44 {'status': {'status': 1, 'info': 'Unknown data type returned as payload (must be list or np array):None', 'code': -1, 'reason': 'MICROSERVICE_BAD_DATA'}}
INFO     root:test_router_microservice.py:226 {'status': {'code': -1, 'info': 'Unknown data type returned as payload (must be list or np array):None', 'reason': 'MICROSERVICE_BAD_DATA', 'status': 1}}
_____________________________ test_proto_feedback ______________________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_router_microservice.py", line 315, in test_proto_feedback
    resp = app.SendFeedback(feedback, None)
  File "/workspace/source/python/seldon_core/wrapper.py", line 203, in SendFeedback
    self.user_model, feedback_grpc, PRED_UNIT_ID, self.seldon_metrics
  File "/workspace/source/python/seldon_core/seldon_methods.py", line 160, in send_feedback
    request_proto
UnboundLocalError: local variable 'request_proto' referenced before assignment
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}

----------- coverage: platform linux, python 3.7.1-final-0 -----------
Name                                                                                                  Stmts   Miss  Cover
-------------------------------------------------------------------------------------------------------------------------
.tox/tensorflow/lib/python3.7/site-packages/seldon_core/__init__.py                                       2      0   100%
.tox/tensorflow/lib/python3.7/site-packages/seldon_core/api_tester.py                                    81     81     0%
.tox/tensorflow/lib/python3.7/site-packages/seldon_core/app.py                                           36      3    92%
.tox/tensorflow/lib/python3.7/site-packages/seldon_core/batch_processor.py                               94     94     0%
.tox/tensorflow/lib/python3.7/site-packages/seldon_core/flask_utils.py                                   44     24    45%
.tox/tensorflow/lib/python3.7/site-packages/seldon_core/imports_helper.py                                19      5    74%
.tox/tensorflow/lib/python3.7/site-packages/seldon_core/metadata.py                                      32      3    91%
.tox/tensorflow/lib/python3.7/site-packages/seldon_core/metrics.py                                      119     72    39%
.tox/tensorflow/lib/python3.7/site-packages/seldon_core/microservice.py                                 199     65    67%
.tox/tensorflow/lib/python3.7/site-packages/seldon_core/microservice_tester.py                          140    140     0%
.tox/tensorflow/lib/python3.7/site-packages/seldon_core/persistence.py                                   45     23    49%
.tox/tensorflow/lib/python3.7/site-packages/seldon_core/proto/__init__.py                                 0      0   100%
.tox/tensorflow/lib/python3.7/site-packages/seldon_core/proto/prediction_pb2.py                         160      0   100%
.tox/tensorflow/lib/python3.7/site-packages/seldon_core/proto/prediction_pb2_grpc.py                    137     89    35%
.tox/tensorflow/lib/python3.7/site-packages/seldon_core/proto/tensorflow/core/framework/__init__.py       3      0   100%
.tox/tensorflow/lib/python3.7/site-packages/seldon_core/seldon_client.py                                599    599     0%
.tox/tensorflow/lib/python3.7/site-packages/seldon_core/seldon_methods.py                               244    190    22%
.tox/tensorflow/lib/python3.7/site-packages/seldon_core/serving_test_gen.py                              40     40     0%
.tox/tensorflow/lib/python3.7/site-packages/seldon_core/storage.py                                      154    126    18%
.tox/tensorflow/lib/python3.7/site-packages/seldon_core/user_model.py                                   162     92    43%
.tox/tensorflow/lib/python3.7/site-packages/seldon_core/utils.py                                        282    175    38%
.tox/tensorflow/lib/python3.7/site-packages/seldon_core/version.py                                        1      0   100%
.tox/tensorflow/lib/python3.7/site-packages/seldon_core/wrapper.py                                      145     75    48%
seldon_core/__init__.py                                                                                   2      0   100%
seldon_core/api_tester.py                                                                                81     38    53%
seldon_core/app.py                                                                                       36     22    39%
seldon_core/batch_processor.py                                                                           94     94     0%
seldon_core/flask_utils.py                                                                               44      3    93%
seldon_core/imports_helper.py                                                                            19      5    74%
seldon_core/metadata.py                                                                                  32      0   100%
seldon_core/metrics.py                                                                                  119      1    99%
seldon_core/microservice.py                                                                             199    120    40%
seldon_core/microservice_tester.py                                                                      140     43    69%
seldon_core/persistence.py                                                                               45     23    49%
seldon_core/proto/__init__.py                                                                             0      0   100%
seldon_core/proto/prediction_pb2.py                                                                     160      0   100%
seldon_core/proto/prediction_pb2_grpc.py                                                                137     65    53%
seldon_core/proto/tensorflow/core/framework/__init__.py                                                   3      0   100%
seldon_core/seldon_client.py                                                                            599    284    53%
seldon_core/seldon_methods.py                                                                           244     10    96%
seldon_core/serving_test_gen.py                                                                          40     40     0%
seldon_core/storage.py                                                                                  154     53    66%
seldon_core/user_model.py                                                                               162     30    81%
seldon_core/utils.py                                                                                    282     31    89%
seldon_core/version.py                                                                                    1      0   100%
seldon_core/wrapper.py                                                                                  145     11    92%
-------------------------------------------------------------------------------------------------------------------------
TOTAL                                                                                                  5476   2769    49%

=========================== short test summary info ============================
FAILED tests/test_metrics.py::test_seldon_metrics_predict[True-UserObject] - ...
FAILED tests/test_metrics.py::test_seldon_metrics_predict[True-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_predict[False-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_predict[False-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_aggregate[True-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_aggregate[True-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_aggregate[False-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_aggregate[False-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_input[True-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_input[True-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_input[False-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_input[False-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_output[True-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_output[True-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_output[False-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_output[False-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_route[True-UserObject] - Ke...
FAILED tests/test_metrics.py::test_seldon_metrics_route[True-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_route[False-UserObject] - K...
FAILED tests/test_metrics.py::test_seldon_metrics_route[False-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_predict[True-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_predict[True-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_predict[False-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_predict[False-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_aggregate[True-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_aggregate[True-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_aggregate[False-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_aggregate[False-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_input[True-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_input[True-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_input[False-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_input[False-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_output[True-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_output[True-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_output[False-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_output[False-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_route[True-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_route[True-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_route[False-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_route[False-UserObjectLowLevelGrpc]
FAILED tests/test_microservice.py::test_model_template_app_rest - AssertionEr...
FAILED tests/test_microservice.py::test_model_template_app_rest_submodule[microservice0]
FAILED tests/test_microservice.py::test_model_template_app_grpc[microservice0]
FAILED tests/test_microservice.py::test_model_template_app_tracing_config[microservice0]
FAILED tests/test_model_microservice.py::test_unimplemented_feedback_raw - js...
FAILED tests/test_router_microservice.py::test_router_feedback_ok - assert 40...
FAILED tests/test_router_microservice.py::test_proto_feedback - UnboundLocalE...
============ 47 failed, 320 passed, 2 skipped in 147.72s (0:02:27) =============
ERROR: InvocationError for command /workspace/source/python/.tox/tensorflow/bin/pytest (exited with code 1)
gcs create: /workspace/source/python/.tox/gcs
gcs installdeps: tenacity, pytest, pytest-cov, Pillow
gcs inst: /workspace/source/python/.tox/.tmp/package/1/seldon-core-1.2.2.dev0.zip
gcs installed: attrs==19.3.0,azure-common==1.1.25,azure-storage-blob==2.1.0,azure-storage-common==2.1.0,cachetools==4.1.1,certifi==2020.6.20,cffi==1.14.0,chardet==3.0.4,click==7.1.2,configparser==5.0.0,coverage==5.2,cryptography==2.9.2,Flask==1.1.2,Flask-Cors==3.0.8,Flask-OpenTracing==1.1.0,flatbuffers==1.12,google-api-core==1.21.0,google-auth==1.19.0,google-cloud-core==1.3.0,google-cloud-storage==1.29.0,google-resumable-media==0.5.1,googleapis-common-protos==1.52.0,grpcio==1.30.0,grpcio-opentracing==1.1.4,gunicorn==20.0.4,idna==2.10,importlib-metadata==1.7.0,itsdangerous==1.1.0,jaeger-client==4.1.0,Jinja2==2.11.2,jsonschema==3.2.0,MarkupSafe==1.1.1,minio==5.0.10,more-itertools==8.4.0,numpy==1.19.0,opentracing==2.2.0,packaging==20.4,Pillow==7.2.0,pluggy==0.13.1,prometheus-client==0.8.0,protobuf==3.12.2,py==1.9.0,pyasn1==0.4.8,pyasn1-modules==0.2.8,pycparser==2.20,pyparsing==2.4.7,pyrsistent==0.16.0,pytest==5.4.3,pytest-cov==2.10.0,python-dateutil==2.8.1,pytz==2020.1,PyYAML==5.3.1,redis==3.5.3,requests==2.24.0,rsa==4.6,seldon-core @ file:///workspace/source/python/.tox/.tmp/package/1/seldon-core-1.2.2.dev0.zip,six==1.15.0,tenacity==6.2.0,threadloop==1.0.2,thrift==0.13.0,tornado==5.1.1,urllib3==1.25.9,wcwidth==0.2.5,Werkzeug==1.0.1,zipp==3.1.0
gcs run-test-pre: PYTHONHASHSEED='1076758190'
gcs run-test: commands[0] | pytest
============================= test session starts ==============================
platform linux -- Python 3.7.1, pytest-5.4.3, py-1.9.0, pluggy-0.13.1
cachedir: .tox/gcs/.pytest_cache
rootdir: /workspace/source/python, inifile: setup.cfg
plugins: cov-2.10.0
collected 369 items

tests/test_api_tester.py ..                                              [  0%]
tests/test_application_exception_microservice.py ..                      [  1%]
tests/test_azure_storage.py ......                                       [  2%]
tests/test_combiner_microservice.py .....................                [  8%]
tests/test_metadata.py ................................................. [ 21%]
...                                                                      [ 22%]
tests/test_metrics.py ...................FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF [ 36%]
FFFFFFFFF........                                                        [ 40%]
tests/test_microservice.py .F...FF..F...                                 [ 44%]
tests/test_microservice_tester.py .....                                  [ 45%]
tests/test_model_microservice.py ...............s......................s [ 56%]
.......F                                                                 [ 58%]
tests/test_router_microservice.py ........F....F...                      [ 62%]
tests/test_s3_storage.py ...                                             [ 63%]
tests/test_seldon_client.py ..................................           [ 72%]
tests/test_storage.py ........                                           [ 75%]
tests/test_transformer_microservice.py ................................. [ 84%]
........                                                                 [ 86%]
tests/test_user_model.py ....                                            [ 87%]
tests/test_utils.py ..............................sss..............      [100%]

=================================== FAILURES ===================================
_________________ test_seldon_metrics_predict[True-UserObject] _________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 345, in test_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Predict called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:57 REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:159 Predict called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:65 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
_____________ test_seldon_metrics_predict[True-UserObjectLowLevel] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 345, in test_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Predict raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:57 REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:207 Predict raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:65 REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
________________ test_seldon_metrics_predict[False-UserObject] _________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 345, in test_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Predict called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:57 REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:159 Predict called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:65 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
____________ test_seldon_metrics_predict[False-UserObjectLowLevel] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 345, in test_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Predict raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:57 REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:207 Predict raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:65 REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
________________ test_seldon_metrics_aggregate[True-UserObject] ________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 370, in test_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO:root:Aggregate called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:112 REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO     root:test_metrics.py:163 Aggregate called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:116 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
____________ test_seldon_metrics_aggregate[True-UserObjectLowLevel] ____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 370, in test_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO:root:Aggregate raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:112 REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO     root:test_metrics.py:214 Aggregate raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:116 REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
_______________ test_seldon_metrics_aggregate[False-UserObject] ________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 370, in test_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO:root:Aggregate called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:112 REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO     root:test_metrics.py:163 Aggregate called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:116 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
___________ test_seldon_metrics_aggregate[False-UserObjectLowLevel] ____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 370, in test_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO:root:Aggregate raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:112 REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO     root:test_metrics.py:214 Aggregate raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:116 REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
_____________ test_seldon_metrics_transform_input[True-UserObject] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 397, in test_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform input called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:82 REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:167 Transform input called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:86 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
_________ test_seldon_metrics_transform_input[True-UserObjectLowLevel] _________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 397, in test_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform input raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:82 REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:221 Transform input raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:86 REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
____________ test_seldon_metrics_transform_input[False-UserObject] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 397, in test_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform input called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:82 REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:167 Transform input called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:86 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
________ test_seldon_metrics_transform_input[False-UserObjectLowLevel] _________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 397, in test_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform input raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:82 REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:221 Transform input raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:86 REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
____________ test_seldon_metrics_transform_output[True-UserObject] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 424, in test_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform output called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:92 REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:171 Transform output called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:96 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
________ test_seldon_metrics_transform_output[True-UserObjectLowLevel] _________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 424, in test_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform output raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:92 REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:228 Transform output raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:96 REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
____________ test_seldon_metrics_transform_output[False-UserObject] ____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 424, in test_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform output called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:92 REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:171 Transform output called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:96 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
________ test_seldon_metrics_transform_output[False-UserObjectLowLevel] ________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 424, in test_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform output raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:92 REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:228 Transform output raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:96 REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
__________________ test_seldon_metrics_route[True-UserObject] __________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 449, in test_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Route called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:class_names is not implemented
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': [[22]], 'names': ['t:0']}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:102 REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:175 Route called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:106 REST Response: {'data': {'ndarray': [[22]], 'names': ['t:0']}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
______________ test_seldon_metrics_route[True-UserObjectLowLevel] ______________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 449, in test_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Route raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': [22]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:102 REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:235 Route raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:106 REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': [22]}}
_________________ test_seldon_metrics_route[False-UserObject] __________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 449, in test_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Route called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:class_names is not implemented
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': [[22]], 'names': ['t:0']}, 'meta': {}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:102 REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:175 Route called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:106 REST Response: {'data': {'ndarray': [[22]], 'names': ['t:0']}, 'meta': {}}
_____________ test_seldon_metrics_route[False-UserObjectLowLevel] ______________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 449, in test_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Route raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': [22]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:102 REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:235 Route raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:106 REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': [22]}}
______________ test_proto_seldon_metrics_predict[True-UserObject] ______________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 477, in test_proto_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Predict called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:159 Predict called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
________ test_proto_seldon_metrics_predict[True-UserObjectLowLevelGrpc] ________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 477, in test_proto_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Predict raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:256 Predict raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
_____________ test_proto_seldon_metrics_predict[False-UserObject] ______________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 477, in test_proto_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Predict called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:159 Predict called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
_______ test_proto_seldon_metrics_predict[False-UserObjectLowLevelGrpc] ________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 477, in test_proto_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Predict raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:256 Predict raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
_____________ test_proto_seldon_metrics_aggregate[True-UserObject] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 511, in test_proto_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Aggregate called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:163 Aggregate called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
_______ test_proto_seldon_metrics_aggregate[True-UserObjectLowLevelGrpc] _______
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 511, in test_proto_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Aggregate raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:269 Aggregate raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
____________ test_proto_seldon_metrics_aggregate[False-UserObject] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 511, in test_proto_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Aggregate called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:163 Aggregate called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
______ test_proto_seldon_metrics_aggregate[False-UserObjectLowLevelGrpc] _______
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 511, in test_proto_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Aggregate raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:269 Aggregate raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
__________ test_proto_seldon_metrics_transform_input[True-UserObject] __________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 538, in test_proto_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform input called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:167 Transform input called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
____ test_proto_seldon_metrics_transform_input[True-UserObjectLowLevelGrpc] ____
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 538, in test_proto_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform input raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:282 Transform input raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
_________ test_proto_seldon_metrics_transform_input[False-UserObject] __________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 538, in test_proto_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform input called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:167 Transform input called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
___ test_proto_seldon_metrics_transform_input[False-UserObjectLowLevelGrpc] ____
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 538, in test_proto_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform input raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:282 Transform input raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
_________ test_proto_seldon_metrics_transform_output[True-UserObject] __________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 565, in test_proto_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform output called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:171 Transform output called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
___ test_proto_seldon_metrics_transform_output[True-UserObjectLowLevelGrpc] ____
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 565, in test_proto_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform output raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:295 Transform output raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
_________ test_proto_seldon_metrics_transform_output[False-UserObject] _________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 565, in test_proto_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform output called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:171 Transform output called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
___ test_proto_seldon_metrics_transform_output[False-UserObjectLowLevelGrpc] ___
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 565, in test_proto_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform output raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:295 Transform output raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
_______________ test_proto_seldon_metrics_route[True-UserObject] _______________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 592, in test_proto_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Route called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:175 Route called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
_________ test_proto_seldon_metrics_route[True-UserObjectLowLevelGrpc] _________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 592, in test_proto_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Route raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:308 Route raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
______________ test_proto_seldon_metrics_route[False-UserObject] _______________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 592, in test_proto_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Route called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:175 Route called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
________ test_proto_seldon_metrics_route[False-UserObjectLowLevelGrpc] _________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 592, in test_proto_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Route raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:308 Route raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
_________________________ test_model_template_app_rest _________________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_microservice.py", line 56, in test_model_template_app_rest
    assert response.json() == {"data": {"ndarray": []}, "meta": {}}
AssertionError: assert {'data': {'na...}, 'meta': {}} == {'data': {'nd...}, 'meta': {}}
  Omitting 1 identical items, use -vv to show
  Differing items:
  {'data': {'names': [], 'ndarray': []}} != {'data': {'ndarray': []}}
  Use -v to get the full diff
---------------------------- Captured stderr setup -----------------------------
INFO:root:starting: seldon-core-microservice MyModel REST --service-type MODEL --persistence 0
DEBUG:root:=== trying again
2020-07-14 09:27:57,899 - seldon_core.microservice:main:207 - INFO:  Starting microservice.py:main
2020-07-14 09:27:57,900 - seldon_core.microservice:main:208 - INFO:  Seldon Core version: 1.2.2-dev
2020-07-14 09:27:57,902 - seldon_core.microservice:main:294 - INFO:  Parse JAEGER_EXTRA_TAGS []
2020-07-14 09:27:57,902 - seldon_core.microservice:main:297 - INFO:  Annotations: {}
2020-07-14 09:27:57,902 - seldon_core.microservice:main:301 - INFO:  Importing MyModel
2020-07-14 09:27:57,903 - MyModel:__init__:15 - INFO:  Initializing model
2020-07-14 09:27:58,034 - seldon_core.microservice:main:374 - INFO:  REST gunicorn microservice running on port 5000
2020-07-14 09:27:58,036 - seldon_core.microservice:main:432 - INFO:  REST metrics microservice running on port 6005
2020-07-14 09:27:58,036 - seldon_core.microservice:main:442 - INFO:  Starting servers
[2020-07-14 09:27:58 +0000] [18389] [INFO] Starting gunicorn 20.0.4
[2020-07-14 09:27:58 +0000] [18389] [INFO] Listening at: http://0.0.0.0:5000 (18389)
[2020-07-14 09:27:58 +0000] [18389] [INFO] Using worker: threads
[2020-07-14 09:27:58 +0000] [18423] [INFO] Booting worker with pid: 18423
[2020-07-14 09:27:58 +0000] [18422] [INFO] Starting gunicorn 20.0.4
[2020-07-14 09:27:58 +0000] [18422] [INFO] Listening at: http://0.0.0.0:6005 (18422)
[2020-07-14 09:27:58 +0000] [18422] [INFO] Using worker: sync
[2020-07-14 09:27:58 +0000] [18430] [INFO] Booting worker with pid: 18430
DEBUG:root:=== trying again
INFO:root:microservice ready
------------------------------ Captured log setup ------------------------------
INFO     root:helpers.py:65 starting: seldon-core-microservice MyModel REST --service-type MODEL --persistence 0
DEBUG    root:helpers.py:80 === trying again
DEBUG    root:helpers.py:80 === trying again
INFO     root:helpers.py:88 microservice ready
----------------------------- Captured stdout call -----------------------------
127.0.0.1 - - [14/Jul/2020:09:28:01 +0000] "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65 "-" "python-requests/2.24.0"
127.0.0.1 - - [14/Jul/2020:09:28:01 +0000] "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45 "-" "python-requests/2.24.0"
----------------------------- Captured stderr call -----------------------------
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): 127.0.0.1:5000
2020-07-14 09:28:01,873 - MyModel:predict:26 - INFO:  Predict called - will run idenity function
DEBUG:urllib3.connectionpool:http://127.0.0.1:5000 "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): 127.0.0.1:5000
2020-07-14 09:28:01,886 - MyModel:send_feedback:40 - INFO:  Send feedback called
DEBUG:urllib3.connectionpool:http://127.0.0.1:5000 "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45
------------------------------ Captured log call -------------------------------
DEBUG    urllib3.connectionpool:connectionpool.py:230 Starting new HTTP connection (1): 127.0.0.1:5000
DEBUG    urllib3.connectionpool:connectionpool.py:442 http://127.0.0.1:5000 "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65
DEBUG    urllib3.connectionpool:connectionpool.py:230 Starting new HTTP connection (1): 127.0.0.1:5000
DEBUG    urllib3.connectionpool:connectionpool.py:442 http://127.0.0.1:5000 "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45
--------------------------- Captured stderr teardown ---------------------------
[2020-07-14 09:28:01 +0000] [18430] [INFO] Worker exiting (pid: 18430)
[2020-07-14 09:28:01 +0000] [18389] [INFO] Handling signal: term
____________ test_model_template_app_rest_submodule[microservice0] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_microservice.py", line 106, in test_model_template_app_rest_submodule
    assert response.json() == {"data": {"ndarray": []}, "meta": {}}
AssertionError: assert {'data': {'na...}, 'meta': {}} == {'data': {'nd...}, 'meta': {}}
  Omitting 1 identical items, use -vv to show
  Differing items:
  {'data': {'names': [], 'ndarray': []}} != {'data': {'ndarray': []}}
  Use -v to get the full diff
---------------------------- Captured stdout setup -----------------------------
127.0.0.1 - - [14/Jul/2020:09:28:17 +0000] "GET /metrics-endpoint HTTP/1.1" 200 0 "-" "python-requests/2.24.0"
---------------------------- Captured stderr setup -----------------------------
[2020-07-14 09:28:17 +0000] [18559] [INFO] Handling signal: term
[2020-07-14 09:28:17 +0000] [18526] [INFO] Handling signal: term
[2020-07-14 09:28:17 +0000] [18567] [INFO] Worker exiting (pid: 18567)
INFO:root:starting: seldon-core-microservice mymodule.my_model.MyModel REST --service-type MODEL --persistence 0
[2020-07-14 09:28:17 +0000] [18559] [INFO] Shutting down: Master
[2020-07-14 09:28:18 +0000] [18560] [INFO] Worker exiting (pid: 18560)
Error in atexit._run_exitfuncs:
Traceback (most recent call last):
  File "/opt/conda/lib/python3.7/multiprocessing/util.py", line 322, in _exit_function
    p.join()
  File "/opt/conda/lib/python3.7/multiprocessing/process.py", line 138, in join
    assert self._parent_pid == os.getpid(), 'can only join a child process'
AssertionError: can only join a child process
DEBUG:root:=== trying again
2020-07-14 09:28:18,140 - seldon_core.microservice:main:207 - INFO:  Starting microservice.py:main
2020-07-14 09:28:18,140 - seldon_core.microservice:main:208 - INFO:  Seldon Core version: 1.2.2-dev
2020-07-14 09:28:18,142 - seldon_core.microservice:main:294 - INFO:  Parse JAEGER_EXTRA_TAGS []
2020-07-14 09:28:18,143 - seldon_core.microservice:main:297 - INFO:  Annotations: {}
2020-07-14 09:28:18,143 - seldon_core.microservice:main:305 - INFO:  Importing submodule ['mymodule.my_model', 'MyModel']
2020-07-14 09:28:18,144 - mymodule.my_model:__init__:15 - INFO:  Initializing model
2020-07-14 09:28:18,284 - seldon_core.microservice:main:374 - INFO:  REST gunicorn microservice running on port 5000
2020-07-14 09:28:18,286 - seldon_core.microservice:main:432 - INFO:  REST metrics microservice running on port 6005
2020-07-14 09:28:18,286 - seldon_core.microservice:main:442 - INFO:  Starting servers
[2020-07-14 09:28:18 +0000] [18526] [INFO] Shutting down: Master
[2020-07-14 09:28:18 +0000] [18570] [INFO] Starting gunicorn 20.0.4
[2020-07-14 09:28:18 +0000] [18570] [INFO] Listening at: http://0.0.0.0:5000 (18570)
[2020-07-14 09:28:18 +0000] [18570] [INFO] Using worker: threads
[2020-07-14 09:28:18 +0000] [18604] [INFO] Booting worker with pid: 18604
[2020-07-14 09:28:18 +0000] [18603] [INFO] Starting gunicorn 20.0.4
[2020-07-14 09:28:18 +0000] [18603] [INFO] Listening at: http://0.0.0.0:6005 (18603)
[2020-07-14 09:28:18 +0000] [18603] [INFO] Using worker: sync
[2020-07-14 09:28:18 +0000] [18611] [INFO] Booting worker with pid: 18611
DEBUG:root:=== trying again
INFO:root:microservice ready
------------------------------ Captured log setup ------------------------------
INFO     root:helpers.py:65 starting: seldon-core-microservice mymodule.my_model.MyModel REST --service-type MODEL --persistence 0
DEBUG    root:helpers.py:80 === trying again
DEBUG    root:helpers.py:80 === trying again
INFO     root:helpers.py:88 microservice ready
----------------------------- Captured stdout call -----------------------------
127.0.0.1 - - [14/Jul/2020:09:28:22 +0000] "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65 "-" "python-requests/2.24.0"
127.0.0.1 - - [14/Jul/2020:09:28:22 +0000] "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45 "-" "python-requests/2.24.0"
----------------------------- Captured stderr call -----------------------------
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): 127.0.0.1:5000
2020-07-14 09:28:22,072 - mymodule.my_model:predict:26 - INFO:  Predict called - will run idenity function
DEBUG:urllib3.connectionpool:http://127.0.0.1:5000 "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): 127.0.0.1:5000
2020-07-14 09:28:22,084 - mymodule.my_model:send_feedback:40 - INFO:  Send feedback called
DEBUG:urllib3.connectionpool:http://127.0.0.1:5000 "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45
------------------------------ Captured log call -------------------------------
DEBUG    urllib3.connectionpool:connectionpool.py:230 Starting new HTTP connection (1): 127.0.0.1:5000
DEBUG    urllib3.connectionpool:connectionpool.py:442 http://127.0.0.1:5000 "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65
DEBUG    urllib3.connectionpool:connectionpool.py:230 Starting new HTTP connection (1): 127.0.0.1:5000
DEBUG    urllib3.connectionpool:connectionpool.py:442 http://127.0.0.1:5000 "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45
--------------------------- Captured stderr teardown ---------------------------
[2020-07-14 09:28:22 +0000] [18603] [INFO] Handling signal: term
[2020-07-14 09:28:22 +0000] [18611] [INFO] Worker exiting (pid: 18611)
_________________ test_model_template_app_grpc[microservice0] __________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_microservice.py", line 130, in test_model_template_app_grpc
    response = stub.SendFeedback(request=request)
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/grpc/_channel.py", line 826, in __call__
    return _end_unary_response_blocking(state, call, False, None)
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/grpc/_channel.py", line 729, in _end_unary_response_blocking
    raise _InactiveRpcError(state)
grpc._channel._InactiveRpcError: <_InactiveRpcError of RPC that terminated with:
	status = StatusCode.UNKNOWN
	details = "Exception calling application: local variable 'request_proto' referenced before assignment"
	debug_error_string = "{"created":"@1594718907.129254229","description":"Error received from peer ipv4:0.0.0.0:5000","file":"src/core/lib/surface/call.cc","file_line":1055,"grpc_message":"Exception calling application: local variable 'request_proto' referenced before assignment","grpc_status":2}"
>
---------------------------- Captured stderr setup -----------------------------
[2020-07-14 09:28:22 +0000] [18570] [INFO] Handling signal: term
INFO:root:starting: seldon-core-microservice MyModel GRPC --service-type MODEL --persistence 0
[2020-07-14 09:28:22 +0000] [18603] [INFO] Shutting down: Master
[2020-07-14 09:28:23 +0000] [18604] [INFO] Worker exiting (pid: 18604)
Error in atexit._run_exitfuncs:
Traceback (most recent call last):
  File "/opt/conda/lib/python3.7/multiprocessing/util.py", line 322, in _exit_function
    p.join()
  File "/opt/conda/lib/python3.7/multiprocessing/process.py", line 138, in join
    assert self._parent_pid == os.getpid(), 'can only join a child process'
AssertionError: can only join a child process
DEBUG:root:=== trying again
2020-07-14 09:28:23,263 - seldon_core.microservice:main:207 - INFO:  Starting microservice.py:main
2020-07-14 09:28:23,264 - seldon_core.microservice:main:208 - INFO:  Seldon Core version: 1.2.2-dev
2020-07-14 09:28:23,268 - seldon_core.microservice:main:294 - INFO:  Parse JAEGER_EXTRA_TAGS []
2020-07-14 09:28:23,268 - seldon_core.microservice:main:297 - INFO:  Annotations: {}
2020-07-14 09:28:23,268 - seldon_core.microservice:main:301 - INFO:  Importing MyModel
2020-07-14 09:28:23,269 - MyModel:__init__:15 - INFO:  Initializing model
[2020-07-14 09:28:23 +0000] [18570] [INFO] Shutting down: Master
2020-07-14 09:28:23,422 - seldon_core.microservice:main:432 - INFO:  REST metrics microservice running on port 6005
2020-07-14 09:28:23,424 - seldon_core.microservice:main:442 - INFO:  Starting servers
2020-07-14 09:28:23,492 - seldon_core.microservice:grpc_prediction_server:408 - INFO:  GRPC microservice Running on port 5000
[2020-07-14 09:28:23 +0000] [18650] [INFO] Starting gunicorn 20.0.4
[2020-07-14 09:28:23 +0000] [18650] [INFO] Listening at: http://0.0.0.0:6005 (18650)
[2020-07-14 09:28:23 +0000] [18650] [INFO] Using worker: sync
[2020-07-14 09:28:23 +0000] [18661] [INFO] Booting worker with pid: 18661
DEBUG:root:=== trying again
INFO:root:microservice ready
------------------------------ Captured log setup ------------------------------
INFO     root:helpers.py:65 starting: seldon-core-microservice MyModel GRPC --service-type MODEL --persistence 0
DEBUG    root:helpers.py:80 === trying again
DEBUG    root:helpers.py:80 === trying again
INFO     root:helpers.py:88 microservice ready
----------------------------- Captured stderr call -----------------------------
INFO:root:Calling method... try: 1
2020-07-14 09:28:27,123 - MyModel:predict:26 - INFO:  Predict called - will run idenity function
2020-07-14 09:28:27,126 - grpc._server:_call_behavior:445 - ERROR:  Exception calling application: local variable 'request_proto' referenced before assignment
Traceback (most recent call last):
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/grpc/_server.py", line 435, in _call_behavior
    response_or_iterator = behavior(argument, context)
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/seldon_core/wrapper.py", line 203, in SendFeedback
    self.user_model, feedback_grpc, PRED_UNIT_ID, self.seldon_metrics
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/seldon_core/seldon_methods.py", line 160, in send_feedback
    request_proto
UnboundLocalError: local variable 'request_proto' referenced before assignment
------------------------------ Captured log call -------------------------------
INFO     root:test_microservice.py:27 Calling method... try: 1
--------------------------- Captured stderr teardown ---------------------------
[2020-07-14 09:28:27 +0000] [18661] [INFO] Worker exiting (pid: 18661)
[2020-07-14 09:28:27 +0000] [18650] [INFO] Handling signal: term
____________ test_model_template_app_tracing_config[microservice0] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_microservice.py", line 212, in test_model_template_app_tracing_config
    assert response.json() == {"data": {"ndarray": []}, "meta": {}}
AssertionError: assert {'data': {'na...}, 'meta': {}} == {'data': {'nd...}, 'meta': {}}
  Omitting 1 identical items, use -vv to show
  Differing items:
  {'data': {'names': [], 'ndarray': []}} != {'data': {'ndarray': []}}
  Use -v to get the full diff
---------------------------- Captured stderr setup -----------------------------
INFO:root:starting: seldon-core-microservice MyModel REST --service-type MODEL --persistence 0 --tracing
[2020-07-14 09:28:37 +0000] [18744] [INFO] Shutting down: Master
DEBUG:root:=== trying again
2020-07-14 09:28:38,352 - seldon_core.microservice:main:207 - INFO:  Starting microservice.py:main
2020-07-14 09:28:38,353 - seldon_core.microservice:main:208 - INFO:  Seldon Core version: 1.2.2-dev
2020-07-14 09:28:38,355 - seldon_core.microservice:main:294 - INFO:  Parse JAEGER_EXTRA_TAGS []
2020-07-14 09:28:38,356 - seldon_core.microservice:main:297 - INFO:  Annotations: {}
2020-07-14 09:28:38,356 - seldon_core.microservice:main:301 - INFO:  Importing MyModel
2020-07-14 09:28:38,356 - MyModel:__init__:15 - INFO:  Initializing model
2020-07-14 09:28:38,356 - seldon_core.microservice:setup_tracing:145 - INFO:  Initializing tracing
2020-07-14 09:28:38,405 - seldon_core.microservice:setup_tracing:166 - INFO:  Loading tracing config from /workspace/source/python/tests/resources/tracing_config/tracing.yaml
/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/seldon_core/microservice.py:170: YAMLLoadWarning: calling yaml.load() without Loader=... is deprecated, as the default Loader is unsafe. Please read https://msg.pyyaml.org/load for full details.
  config_dict = yaml.load(stream)
2020-07-14 09:28:38,407 - jaeger_tracing:_create_local_agent_channel:446 - INFO:  Initializing Jaeger Tracer with UDP reporter
2020-07-14 09:28:38,410 - jaeger_tracing:new_tracer:384 - INFO:  Using sampler ConstSampler(True)
2020-07-14 09:28:38,411 - jaeger_tracing:_initialize_global_tracer:436 - INFO:  opentracing.tracer initialized to <jaeger_client.tracer.Tracer object at 0x7fda381ea6a0>[app_name=MyModel]
2020-07-14 09:28:38,575 - seldon_core.microservice:main:374 - INFO:  REST gunicorn microservice running on port 5000
2020-07-14 09:28:38,577 - seldon_core.microservice:main:432 - INFO:  REST metrics microservice running on port 6005
2020-07-14 09:28:38,577 - seldon_core.microservice:main:442 - INFO:  Starting servers
[2020-07-14 09:28:38 +0000] [18757] [INFO] Starting gunicorn 20.0.4
[2020-07-14 09:28:38 +0000] [18757] [INFO] Listening at: http://0.0.0.0:5000 (18757)
[2020-07-14 09:28:38 +0000] [18757] [INFO] Using worker: threads
[2020-07-14 09:28:38 +0000] [18792] [INFO] Booting worker with pid: 18792
[2020-07-14 09:28:38 +0000] [18791] [INFO] Starting gunicorn 20.0.4
[2020-07-14 09:28:38 +0000] [18791] [INFO] Listening at: http://0.0.0.0:6005 (18791)
[2020-07-14 09:28:38 +0000] [18791] [INFO] Using worker: sync
[2020-07-14 09:28:38 +0000] [18799] [INFO] Booting worker with pid: 18799
DEBUG:root:=== trying again
INFO:root:microservice ready
------------------------------ Captured log setup ------------------------------
INFO     root:helpers.py:65 starting: seldon-core-microservice MyModel REST --service-type MODEL --persistence 0 --tracing
DEBUG    root:helpers.py:80 === trying again
DEBUG    root:helpers.py:80 === trying again
INFO     root:helpers.py:88 microservice ready
----------------------------- Captured stdout call -----------------------------
127.0.0.1 - - [14/Jul/2020:09:28:42 +0000] "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65 "-" "python-requests/2.24.0"
127.0.0.1 - - [14/Jul/2020:09:28:42 +0000] "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45 "-" "python-requests/2.24.0"
----------------------------- Captured stderr call -----------------------------
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): 127.0.0.1:5000
2020-07-14 09:28:42,253 - MyModel:predict:26 - INFO:  Predict called - will run idenity function
DEBUG:urllib3.connectionpool:http://127.0.0.1:5000 "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): 127.0.0.1:5000
2020-07-14 09:28:42,265 - MyModel:send_feedback:40 - INFO:  Send feedback called
DEBUG:urllib3.connectionpool:http://127.0.0.1:5000 "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45
------------------------------ Captured log call -------------------------------
DEBUG    urllib3.connectionpool:connectionpool.py:230 Starting new HTTP connection (1): 127.0.0.1:5000
DEBUG    urllib3.connectionpool:connectionpool.py:442 http://127.0.0.1:5000 "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65
DEBUG    urllib3.connectionpool:connectionpool.py:230 Starting new HTTP connection (1): 127.0.0.1:5000
DEBUG    urllib3.connectionpool:connectionpool.py:442 http://127.0.0.1:5000 "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45
--------------------------- Captured stderr teardown ---------------------------
[2020-07-14 09:28:42 +0000] [18799] [INFO] Worker exiting (pid: 18799)
[2020-07-14 09:28:42 +0000] [18757] [INFO] Handling signal: term
[2020-07-14 09:28:42 +0000] [18791] [INFO] Handling signal: term
_______________________ test_unimplemented_feedback_raw ________________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_model_microservice.py", line 988, in test_unimplemented_feedback_raw
    j = json.loads(rv.data)
  File "/opt/conda/lib/python3.7/json/__init__.py", line 348, in loads
    return _default_decoder.decode(s)
  File "/opt/conda/lib/python3.7/json/decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "/opt/conda/lib/python3.7/json/decoder.py", line 355, in raw_decode
    raise JSONDecodeError("Expecting value", s, err.value) from None
json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22ndarray%22:%5B%5D%7D%7D,%22reward%22:1.0%7D' [GET]>
ERROR:seldon_core.wrapper:Exception on /send-feedback [GET]
Traceback (most recent call last):
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask/app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask_cors/extension.py", line 161, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask/app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/workspace/source/python/seldon_core/wrapper.py", line 75, in SendFeedback
    user_model, requestJson, PRED_UNIT_ID, seldon_metrics
  File "/workspace/source/python/seldon_core/seldon_methods.py", line 183, in send_feedback
    raise Exception("TODO: Not implemented")
Exception: TODO: Not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:73 REST Request: <Request 'http://localhost/send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22ndarray%22:%5B%5D%7D%7D,%22reward%22:1.0%7D' [GET]>
ERROR    seldon_core.wrapper:app.py:1892 Exception on /send-feedback [GET]
Traceback (most recent call last):
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask/app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask_cors/extension.py", line 161, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask/app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "/workspace/source/python/.tox/gcs/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/workspace/source/python/seldon_core/wrapper.py", line 75, in SendFeedback
    user_model, requestJson, PRED_UNIT_ID, seldon_metrics
  File "/workspace/source/python/seldon_core/seldon_methods.py", line 183, in send_feedback
    raise Exception("TODO: Not implemented")
Exception: TODO: Not implemented
___________________________ test_router_feedback_ok ____________________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_router_microservice.py", line 227, in test_router_feedback_ok
    assert rv.status_code == 200
AssertionError: assert 400 == 200
 +  where 400 = <Response 146 bytes [400 BAD REQUEST]>.status_code
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22ndarray%22:%5B%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%221%22:1%7D%7D%7D,%22reward%22:1.0%7D' [GET]>
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
INFO:root:Feedback called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
ERROR:seldon_core.wrapper:{'status': {'status': 1, 'info': 'Unknown data type returned as payload (must be list or np array):None', 'code': -1, 'reason': 'MICROSERVICE_BAD_DATA'}}
INFO:root:{'status': {'code': -1, 'info': 'Unknown data type returned as payload (must be list or np array):None', 'reason': 'MICROSERVICE_BAD_DATA', 'status': 1}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:73 REST Request: <Request 'http://localhost/send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22ndarray%22:%5B%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%221%22:1%7D%7D%7D,%22reward%22:1.0%7D' [GET]>
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
INFO     root:test_router_microservice.py:30 Feedback called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
ERROR    seldon_core.wrapper:wrapper.py:44 {'status': {'status': 1, 'info': 'Unknown data type returned as payload (must be list or np array):None', 'code': -1, 'reason': 'MICROSERVICE_BAD_DATA'}}
INFO     root:test_router_microservice.py:226 {'status': {'code': -1, 'info': 'Unknown data type returned as payload (must be list or np array):None', 'reason': 'MICROSERVICE_BAD_DATA', 'status': 1}}
_____________________________ test_proto_feedback ______________________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_router_microservice.py", line 315, in test_proto_feedback
    resp = app.SendFeedback(feedback, None)
  File "/workspace/source/python/seldon_core/wrapper.py", line 203, in SendFeedback
    self.user_model, feedback_grpc, PRED_UNIT_ID, self.seldon_metrics
  File "/workspace/source/python/seldon_core/seldon_methods.py", line 160, in send_feedback
    request_proto
UnboundLocalError: local variable 'request_proto' referenced before assignment
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}

----------- coverage: platform linux, python 3.7.1-final-0 -----------
Name                                                                                                      Stmts   Miss  Cover
-----------------------------------------------------------------------------------------------------------------------------
.tox/gcs/lib/python3.7/site-packages/seldon_core/__init__.py                                                  2      0   100%
.tox/gcs/lib/python3.7/site-packages/seldon_core/api_tester.py                                               81     81     0%
.tox/gcs/lib/python3.7/site-packages/seldon_core/app.py                                                      36      3    92%
.tox/gcs/lib/python3.7/site-packages/seldon_core/batch_processor.py                                          94     94     0%
.tox/gcs/lib/python3.7/site-packages/seldon_core/flask_utils.py                                              44     24    45%
.tox/gcs/lib/python3.7/site-packages/seldon_core/imports_helper.py                                           19      5    74%
.tox/gcs/lib/python3.7/site-packages/seldon_core/metadata.py                                                 32      3    91%
.tox/gcs/lib/python3.7/site-packages/seldon_core/metrics.py                                                 119     72    39%
.tox/gcs/lib/python3.7/site-packages/seldon_core/microservice.py                                            199     65    67%
.tox/gcs/lib/python3.7/site-packages/seldon_core/microservice_tester.py                                     140    140     0%
.tox/gcs/lib/python3.7/site-packages/seldon_core/persistence.py                                              45     23    49%
.tox/gcs/lib/python3.7/site-packages/seldon_core/proto/__init__.py                                            0      0   100%
.tox/gcs/lib/python3.7/site-packages/seldon_core/proto/prediction_pb2.py                                    160      0   100%
.tox/gcs/lib/python3.7/site-packages/seldon_core/proto/prediction_pb2_grpc.py                               137     89    35%
.tox/gcs/lib/python3.7/site-packages/seldon_core/proto/tensorflow/core/framework/__init__.py                  3      1    67%
.tox/gcs/lib/python3.7/site-packages/seldon_core/proto/tensorflow/core/framework/resource_handle_pb2.py      22      0   100%
.tox/gcs/lib/python3.7/site-packages/seldon_core/proto/tensorflow/core/framework/tensor_pb2.py               36      0   100%
.tox/gcs/lib/python3.7/site-packages/seldon_core/proto/tensorflow/core/framework/tensor_shape_pb2.py         18      0   100%
.tox/gcs/lib/python3.7/site-packages/seldon_core/proto/tensorflow/core/framework/types_pb2.py                62      0   100%
.tox/gcs/lib/python3.7/site-packages/seldon_core/seldon_client.py                                           599    599     0%
.tox/gcs/lib/python3.7/site-packages/seldon_core/seldon_methods.py                                          244    190    22%
.tox/gcs/lib/python3.7/site-packages/seldon_core/serving_test_gen.py                                         40     40     0%
.tox/gcs/lib/python3.7/site-packages/seldon_core/storage.py                                                 154    124    19%
.tox/gcs/lib/python3.7/site-packages/seldon_core/user_model.py                                              162     92    43%
.tox/gcs/lib/python3.7/site-packages/seldon_core/utils.py                                                   282    177    37%
.tox/gcs/lib/python3.7/site-packages/seldon_core/version.py                                                   1      0   100%
.tox/gcs/lib/python3.7/site-packages/seldon_core/wrapper.py                                                 145     75    48%
seldon_core/__init__.py                                                                                       2      0   100%
seldon_core/api_tester.py                                                                                    81     38    53%
seldon_core/app.py                                                                                           36     22    39%
seldon_core/batch_processor.py                                                                               94     94     0%
seldon_core/flask_utils.py                                                                                   44      3    93%
seldon_core/imports_helper.py                                                                                19      5    74%
seldon_core/metadata.py                                                                                      32      0   100%
seldon_core/metrics.py                                                                                      119      1    99%
seldon_core/microservice.py                                                                                 199    120    40%
seldon_core/microservice_tester.py                                                                          140     43    69%
seldon_core/persistence.py                                                                                   45     23    49%
seldon_core/proto/__init__.py                                                                                 0      0   100%
seldon_core/proto/prediction_pb2.py                                                                         160      0   100%
seldon_core/proto/prediction_pb2_grpc.py                                                                    137     65    53%
seldon_core/proto/tensorflow/core/framework/__init__.py                                                       3      1    67%
seldon_core/proto/tensorflow/core/framework/resource_handle_pb2.py                                           22      0   100%
seldon_core/proto/tensorflow/core/framework/tensor_pb2.py                                                    36      0   100%
seldon_core/proto/tensorflow/core/framework/tensor_shape_pb2.py                                              18      0   100%
seldon_core/proto/tensorflow/core/framework/types_pb2.py                                                     62      0   100%
seldon_core/seldon_client.py                                                                                599    284    53%
seldon_core/seldon_methods.py                                                                               244     10    96%
seldon_core/serving_test_gen.py                                                                              40     40     0%
seldon_core/storage.py                                                                                      154     28    82%
seldon_core/user_model.py                                                                                   162     30    81%
seldon_core/utils.py                                                                                        282     43    85%
seldon_core/version.py                                                                                        1      0   100%
seldon_core/wrapper.py                                                                                      145     11    92%
-----------------------------------------------------------------------------------------------------------------------------
TOTAL                                                                                                      5752   2758    52%

=========================== short test summary info ============================
FAILED tests/test_metrics.py::test_seldon_metrics_predict[True-UserObject] - ...
FAILED tests/test_metrics.py::test_seldon_metrics_predict[True-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_predict[False-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_predict[False-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_aggregate[True-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_aggregate[True-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_aggregate[False-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_aggregate[False-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_input[True-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_input[True-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_input[False-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_input[False-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_output[True-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_output[True-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_output[False-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_output[False-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_route[True-UserObject] - Ke...
FAILED tests/test_metrics.py::test_seldon_metrics_route[True-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_route[False-UserObject] - K...
FAILED tests/test_metrics.py::test_seldon_metrics_route[False-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_predict[True-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_predict[True-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_predict[False-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_predict[False-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_aggregate[True-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_aggregate[True-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_aggregate[False-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_aggregate[False-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_input[True-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_input[True-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_input[False-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_input[False-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_output[True-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_output[True-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_output[False-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_output[False-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_route[True-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_route[True-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_route[False-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_route[False-UserObjectLowLevelGrpc]
FAILED tests/test_microservice.py::test_model_template_app_rest - AssertionEr...
FAILED tests/test_microservice.py::test_model_template_app_rest_submodule[microservice0]
FAILED tests/test_microservice.py::test_model_template_app_grpc[microservice0]
FAILED tests/test_microservice.py::test_model_template_app_tracing_config[microservice0]
FAILED tests/test_model_microservice.py::test_unimplemented_feedback_raw - js...
FAILED tests/test_router_microservice.py::test_router_feedback_ok - assert 40...
FAILED tests/test_router_microservice.py::test_proto_feedback - UnboundLocalE...
============ 47 failed, 317 passed, 5 skipped in 103.89s (0:01:43) =============
ERROR: InvocationError for command /workspace/source/python/.tox/gcs/bin/pytest (exited with code 1)
all create: /workspace/source/python/.tox/all
all installdeps: tenacity, pytest, pytest-cov, Pillow
all inst: /workspace/source/python/.tox/.tmp/package/1/seldon-core-1.2.2.dev0.zip
all installed: absl-py==0.9.0,astunparse==1.6.3,attrs==19.3.0,azure-common==1.1.25,azure-storage-blob==2.1.0,azure-storage-common==2.1.0,cachetools==4.1.1,certifi==2020.6.20,cffi==1.14.0,chardet==3.0.4,click==7.1.2,configparser==5.0.0,coverage==5.2,cryptography==2.9.2,Flask==1.1.2,Flask-Cors==3.0.8,Flask-OpenTracing==1.1.0,flatbuffers==1.12,gast==0.3.3,google-api-core==1.21.0,google-auth==1.19.0,google-auth-oauthlib==0.4.1,google-cloud-core==1.3.0,google-cloud-storage==1.29.0,google-pasta==0.2.0,google-resumable-media==0.5.1,googleapis-common-protos==1.52.0,grpcio==1.30.0,grpcio-opentracing==1.1.4,gunicorn==20.0.4,h5py==2.10.0,idna==2.10,importlib-metadata==1.7.0,itsdangerous==1.1.0,jaeger-client==4.1.0,Jinja2==2.11.2,jsonschema==3.2.0,Keras-Preprocessing==1.1.2,Markdown==3.2.2,MarkupSafe==1.1.1,minio==5.0.10,more-itertools==8.4.0,numpy==1.19.0,oauthlib==3.1.0,opentracing==2.2.0,opt-einsum==3.2.1,packaging==20.4,Pillow==7.2.0,pluggy==0.13.1,prometheus-client==0.8.0,protobuf==3.12.2,py==1.9.0,pyasn1==0.4.8,pyasn1-modules==0.2.8,pycparser==2.20,pyparsing==2.4.7,pyrsistent==0.16.0,pytest==5.4.3,pytest-cov==2.10.0,python-dateutil==2.8.1,pytz==2020.1,PyYAML==5.3.1,redis==3.5.3,requests==2.24.0,requests-oauthlib==1.3.0,rsa==4.6,scipy==1.4.1,seldon-core @ file:///workspace/source/python/.tox/.tmp/package/1/seldon-core-1.2.2.dev0.zip,six==1.15.0,tenacity==6.2.0,tensorboard==2.2.2,tensorboard-plugin-wit==1.7.0,tensorflow==2.2.0,tensorflow-estimator==2.2.0,termcolor==1.1.0,threadloop==1.0.2,thrift==0.13.0,tornado==5.1.1,urllib3==1.25.9,wcwidth==0.2.5,Werkzeug==1.0.1,wrapt==1.12.1,zipp==3.1.0
all run-test-pre: PYTHONHASHSEED='1076758190'
all run-test: commands[0] | pytest
============================= test session starts ==============================
platform linux -- Python 3.7.1, pytest-5.4.3, py-1.9.0, pluggy-0.13.1
cachedir: .tox/all/.pytest_cache
rootdir: /workspace/source/python, inifile: setup.cfg
plugins: cov-2.10.0
collected 369 items

tests/test_api_tester.py ..                                              [  0%]
tests/test_application_exception_microservice.py ..                      [  1%]
tests/test_azure_storage.py ......                                       [  2%]
tests/test_combiner_microservice.py .....................                [  8%]
tests/test_metadata.py ................................................. [ 21%]
...                                                                      [ 22%]
tests/test_metrics.py ...................FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF [ 36%]
FFFFFFFFF........                                                        [ 40%]
tests/test_microservice.py .F...FF..F...                                 [ 44%]
tests/test_microservice_tester.py .....                                  [ 45%]
tests/test_model_microservice.py ....................................... [ 56%]
.......F                                                                 [ 58%]
tests/test_router_microservice.py ........F....F...                      [ 62%]
tests/test_s3_storage.py ...                                             [ 63%]
tests/test_seldon_client.py ..................................           [ 72%]
tests/test_storage.py ........                                           [ 75%]
tests/test_transformer_microservice.py ................................. [ 84%]
........                                                                 [ 86%]
tests/test_user_model.py ....                                            [ 87%]
tests/test_utils.py ...............................................      [100%]

=================================== FAILURES ===================================
_________________ test_seldon_metrics_predict[True-UserObject] _________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 345, in test_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Predict called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:57 REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:159 Predict called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:65 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
_____________ test_seldon_metrics_predict[True-UserObjectLowLevel] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 345, in test_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Predict raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:57 REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:207 Predict raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:65 REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
________________ test_seldon_metrics_predict[False-UserObject] _________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 345, in test_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Predict called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:57 REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:159 Predict called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:65 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
____________ test_seldon_metrics_predict[False-UserObjectLowLevel] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 345, in test_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Predict raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:57 REST Request: <Request 'http://localhost/predict?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:207 Predict raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:65 REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
________________ test_seldon_metrics_aggregate[True-UserObject] ________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 370, in test_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO:root:Aggregate called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:112 REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO     root:test_metrics.py:163 Aggregate called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:116 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
____________ test_seldon_metrics_aggregate[True-UserObjectLowLevel] ____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 370, in test_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO:root:Aggregate raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:112 REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO     root:test_metrics.py:214 Aggregate raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:116 REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
_______________ test_seldon_metrics_aggregate[False-UserObject] ________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 370, in test_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO:root:Aggregate called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:112 REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO     root:test_metrics.py:163 Aggregate called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:116 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
___________ test_seldon_metrics_aggregate[False-UserObjectLowLevel] ____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 370, in test_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO:root:Aggregate raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:112 REST Request: <Request 'http://localhost/aggregate?json=%7B%22seldonMessages%22:%20%5B%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D%5D%7D' [GET]>
INFO     root:test_metrics.py:214 Aggregate raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:116 REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
_____________ test_seldon_metrics_transform_input[True-UserObject] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 397, in test_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform input called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:82 REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:167 Transform input called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:86 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
_________ test_seldon_metrics_transform_input[True-UserObjectLowLevel] _________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 397, in test_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform input raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:82 REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:221 Transform input raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:86 REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
____________ test_seldon_metrics_transform_input[False-UserObject] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 397, in test_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform input called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:82 REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:167 Transform input called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:86 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
________ test_seldon_metrics_transform_input[False-UserObjectLowLevel] _________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 397, in test_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform input raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:82 REST Request: <Request 'http://localhost/transform-input?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:221 Transform input raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:86 REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
____________ test_seldon_metrics_transform_output[True-UserObject] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 424, in test_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform output called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:92 REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:171 Transform output called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:96 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
________ test_seldon_metrics_transform_output[True-UserObjectLowLevel] _________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 424, in test_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform output raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:92 REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:228 Transform output raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:96 REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': ['output']}}
____________ test_seldon_metrics_transform_output[False-UserObject] ____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 424, in test_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform output called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:92 REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:171 Transform output called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:96 REST Response: {'data': {'ndarray': ['data'], 'names': []}, 'meta': {}}
________ test_seldon_metrics_transform_output[False-UserObjectLowLevel] ________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 424, in test_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Transform output raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:92 REST Request: <Request 'http://localhost/transform-output?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:228 Transform output raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:96 REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': ['output']}}
__________________ test_seldon_metrics_route[True-UserObject] __________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 449, in test_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Route called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:class_names is not implemented
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': [[22]], 'names': ['t:0']}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:102 REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:175 Route called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:106 REST Response: {'data': {'ndarray': [[22]], 'names': ['t:0']}, 'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}}
______________ test_seldon_metrics_route[True-UserObjectLowLevel] ______________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 449, in test_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Route raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': [22]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:102 REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:235 Route raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:106 REST Response: {'meta': {'metrics': [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]}, 'data': {'names': ['input'], 'data': [22]}}
_________________ test_seldon_metrics_route[False-UserObject] __________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 449, in test_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Route called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:class_names is not implemented
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.wrapper:REST Response: {'data': {'ndarray': [[22]], 'names': ['t:0']}, 'meta': {}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:102 REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:175 Route called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.wrapper:wrapper.py:106 REST Response: {'data': {'ndarray': [[22]], 'names': ['t:0']}, 'meta': {}}
_____________ test_seldon_metrics_route[False-UserObjectLowLevel] ______________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 449, in test_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO:root:Route raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.wrapper:REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': [22]}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:102 REST Request: <Request 'http://localhost/route?json=%7B%22data%22:%20%7B%22names%22:%20%5B%22input%22%5D,%20%22ndarray%22:%20%5B%22data%22%5D%7D%7D' [GET]>
INFO     root:test_metrics.py:235 Route raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.wrapper:wrapper.py:106 REST Response: {'meta': {}, 'data': {'names': ['input'], 'data': [22]}}
______________ test_proto_seldon_metrics_predict[True-UserObject] ______________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 477, in test_proto_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Predict called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:159 Predict called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
________ test_proto_seldon_metrics_predict[True-UserObjectLowLevelGrpc] ________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 477, in test_proto_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Predict raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:256 Predict raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
_____________ test_proto_seldon_metrics_predict[False-UserObject] ______________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 477, in test_proto_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Predict called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:159 Predict called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
_______ test_proto_seldon_metrics_predict[False-UserObjectLowLevelGrpc] ________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 477, in test_proto_seldon_metrics_predict
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Predict raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:256 Predict raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
_____________ test_proto_seldon_metrics_aggregate[True-UserObject] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 511, in test_proto_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Aggregate called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:163 Aggregate called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
_______ test_proto_seldon_metrics_aggregate[True-UserObjectLowLevelGrpc] _______
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 511, in test_proto_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Aggregate raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:269 Aggregate raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
____________ test_proto_seldon_metrics_aggregate[False-UserObject] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 511, in test_proto_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Aggregate called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:163 Aggregate called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
______ test_proto_seldon_metrics_aggregate[False-UserObjectLowLevelGrpc] _______
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 511, in test_proto_seldon_metrics_aggregate
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Aggregate raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:269 Aggregate raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
__________ test_proto_seldon_metrics_transform_input[True-UserObject] __________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 538, in test_proto_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform input called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:167 Transform input called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
____ test_proto_seldon_metrics_transform_input[True-UserObjectLowLevelGrpc] ____
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 538, in test_proto_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform input raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:282 Transform input raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
_________ test_proto_seldon_metrics_transform_input[False-UserObject] __________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 538, in test_proto_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform input called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:167 Transform input called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
___ test_proto_seldon_metrics_transform_input[False-UserObjectLowLevelGrpc] ____
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 538, in test_proto_seldon_metrics_transform_input
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform input raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:282 Transform input raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
_________ test_proto_seldon_metrics_transform_output[True-UserObject] __________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 565, in test_proto_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform output called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:171 Transform output called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
___ test_proto_seldon_metrics_transform_output[True-UserObjectLowLevelGrpc] ____
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 565, in test_proto_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform output raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:295 Transform output raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
_________ test_proto_seldon_metrics_transform_output[False-UserObject] _________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 565, in test_proto_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform output called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:171 Transform output called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
___ test_proto_seldon_metrics_transform_output[False-UserObjectLowLevelGrpc] ___
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 565, in test_proto_seldon_metrics_transform_output
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Transform output raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:295 Transform output raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
_______________ test_proto_seldon_metrics_route[True-UserObject] _______________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 592, in test_proto_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Route called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:175 Route called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
_________ test_proto_seldon_metrics_route[True-UserObjectLowLevelGrpc] _________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 592, in test_proto_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Route raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:308 Route raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
______________ test_proto_seldon_metrics_route[False-UserObject] _______________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 592, in test_proto_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Route called
INFO:root:Metrics called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
DEBUG:seldon_core.user_model:custom_tags is not implemented
DEBUG:seldon_core.user_model:class_names is not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:175 Route called
INFO     root:test_metrics.py:179 Metrics called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}, {'type': 'GAUGE', 'key': 'mygauge', 'value': 100}, {'type': 'TIMER', 'key': 'mytimer', 'value': 20.2}, {'type': 'GAUGE', 'key': 'customtag', 'value': 200, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
DEBUG    seldon_core.user_model:user_model.py:144 custom_tags is not implemented
DEBUG    seldon_core.user_model:user_model.py:176 class_names is not implemented
________ test_proto_seldon_metrics_route[False-UserObjectLowLevelGrpc] _________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_metrics.py", line 592, in test_proto_seldon_metrics_route
    verify_seldon_metrics(data, 1, [0.0202])
  File "/workspace/source/python/tests/test_metrics.py", line 322, in verify_seldon_metrics
    assert data["GAUGE", "mygauge"]["value"] == 100
KeyError: ('GAUGE', 'mygauge')
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO:root:Route raw called
DEBUG:seldon_core.metrics:Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
INFO     root:test_metrics.py:308 Route raw called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'key': 'mycounter', 'value': 1.0}, {'key': 'mygauge', 'type': 'GAUGE', 'value': 100.0}, {'key': 'mytimer', 'type': 'TIMER', 'value': 20.2}, {'key': 'customtag', 'type': 'GAUGE', 'value': 200.0, 'tags': {'mytag': 'mytagvalue'}}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
_________________________ test_model_template_app_rest _________________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_microservice.py", line 56, in test_model_template_app_rest
    assert response.json() == {"data": {"ndarray": []}, "meta": {}}
AssertionError: assert {'data': {'na...}, 'meta': {}} == {'data': {'nd...}, 'meta': {}}
  Omitting 1 identical items, use -vv to show
  Differing items:
  {'data': {'names': [], 'ndarray': []}} != {'data': {'ndarray': []}}
  Use -v to get the full diff
---------------------------- Captured stderr setup -----------------------------
INFO:root:starting: seldon-core-microservice MyModel REST --service-type MODEL --persistence 0
DEBUG:root:=== trying again
2020-07-14 09:32:12,009 - seldon_core.microservice:main:207 - INFO:  Starting microservice.py:main
2020-07-14 09:32:12,009 - seldon_core.microservice:main:208 - INFO:  Seldon Core version: 1.2.2-dev
2020-07-14 09:32:12,012 - seldon_core.microservice:main:294 - INFO:  Parse JAEGER_EXTRA_TAGS []
2020-07-14 09:32:12,012 - seldon_core.microservice:main:297 - INFO:  Annotations: {}
2020-07-14 09:32:12,012 - seldon_core.microservice:main:301 - INFO:  Importing MyModel
2020-07-14 09:32:12,013 - MyModel:__init__:15 - INFO:  Initializing model
2020-07-14 09:32:12,348 - seldon_core.microservice:main:374 - INFO:  REST gunicorn microservice running on port 5000
2020-07-14 09:32:12,350 - seldon_core.microservice:main:432 - INFO:  REST metrics microservice running on port 6005
2020-07-14 09:32:12,350 - seldon_core.microservice:main:442 - INFO:  Starting servers
[2020-07-14 09:32:12 +0000] [25724] [INFO] Starting gunicorn 20.0.4
[2020-07-14 09:32:12 +0000] [25724] [INFO] Listening at: http://0.0.0.0:5000 (25724)
[2020-07-14 09:32:12 +0000] [25724] [INFO] Using worker: threads
[2020-07-14 09:32:12 +0000] [25773] [INFO] Booting worker with pid: 25773
[2020-07-14 09:32:12 +0000] [25772] [INFO] Starting gunicorn 20.0.4
[2020-07-14 09:32:12 +0000] [25772] [INFO] Listening at: http://0.0.0.0:6005 (25772)
[2020-07-14 09:32:12 +0000] [25772] [INFO] Using worker: sync
[2020-07-14 09:32:12 +0000] [25780] [INFO] Booting worker with pid: 25780
DEBUG:root:=== trying again
INFO:root:microservice ready
------------------------------ Captured log setup ------------------------------
INFO     root:helpers.py:65 starting: seldon-core-microservice MyModel REST --service-type MODEL --persistence 0
DEBUG    root:helpers.py:80 === trying again
DEBUG    root:helpers.py:80 === trying again
INFO     root:helpers.py:88 microservice ready
----------------------------- Captured stdout call -----------------------------
127.0.0.1 - - [14/Jul/2020:09:32:13 +0000] "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65 "-" "python-requests/2.24.0"
127.0.0.1 - - [14/Jul/2020:09:32:13 +0000] "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45 "-" "python-requests/2.24.0"
----------------------------- Captured stderr call -----------------------------
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): 127.0.0.1:5000
2020-07-14 09:32:13,877 - MyModel:predict:26 - INFO:  Predict called - will run idenity function
DEBUG:urllib3.connectionpool:http://127.0.0.1:5000 "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): 127.0.0.1:5000
2020-07-14 09:32:13,891 - MyModel:send_feedback:40 - INFO:  Send feedback called
DEBUG:urllib3.connectionpool:http://127.0.0.1:5000 "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45
------------------------------ Captured log call -------------------------------
DEBUG    urllib3.connectionpool:connectionpool.py:230 Starting new HTTP connection (1): 127.0.0.1:5000
DEBUG    urllib3.connectionpool:connectionpool.py:442 http://127.0.0.1:5000 "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65
DEBUG    urllib3.connectionpool:connectionpool.py:230 Starting new HTTP connection (1): 127.0.0.1:5000
DEBUG    urllib3.connectionpool:connectionpool.py:442 http://127.0.0.1:5000 "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45
--------------------------- Captured stderr teardown ---------------------------
[2020-07-14 09:32:13 +0000] [25780] [INFO] Worker exiting (pid: 25780)
[2020-07-14 09:32:13 +0000] [25772] [INFO] Handling signal: term
____________ test_model_template_app_rest_submodule[microservice0] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_microservice.py", line 106, in test_model_template_app_rest_submodule
    assert response.json() == {"data": {"ndarray": []}, "meta": {}}
AssertionError: assert {'data': {'na...}, 'meta': {}} == {'data': {'nd...}, 'meta': {}}
  Omitting 1 identical items, use -vv to show
  Differing items:
  {'data': {'names': [], 'ndarray': []}} != {'data': {'ndarray': []}}
  Use -v to get the full diff
---------------------------- Captured stdout setup -----------------------------
127.0.0.1 - - [14/Jul/2020:09:32:29 +0000] "GET /metrics-endpoint HTTP/1.1" 200 0 "-" "python-requests/2.24.0"
---------------------------- Captured stderr setup -----------------------------
 [2020-07-14 09:32:29 +0000] [25906] [INFO] Handling signal: term
[2020-07-14 09:32:29 +0000] [25962] [INFO] Worker exiting (pid: 25962)
INFO:root:starting: seldon-core-microservice mymodule.my_model.MyModel REST --service-type MODEL --persistence 0
[2020-07-14 09:32:29 +0000] [25954] [INFO] Shutting down: Master
[2020-07-14 09:32:30 +0000] [25955] [INFO] Worker exiting (pid: 25955)
Error in atexit._run_exitfuncs:
Traceback (most recent call last):
  File "/opt/conda/lib/python3.7/multiprocessing/util.py", line 322, in _exit_function
    p.join()
  File "/opt/conda/lib/python3.7/multiprocessing/process.py", line 138, in join
    assert self._parent_pid == os.getpid(), 'can only join a child process'
AssertionError: can only join a child process
DEBUG:root:=== trying again
[2020-07-14 09:32:30 +0000] [25906] [INFO] Shutting down: Master
2020-07-14 09:32:32,115 - seldon_core.microservice:main:207 - INFO:  Starting microservice.py:main
2020-07-14 09:32:32,115 - seldon_core.microservice:main:208 - INFO:  Seldon Core version: 1.2.2-dev
2020-07-14 09:32:32,117 - seldon_core.microservice:main:294 - INFO:  Parse JAEGER_EXTRA_TAGS []
2020-07-14 09:32:32,118 - seldon_core.microservice:main:297 - INFO:  Annotations: {}
2020-07-14 09:32:32,118 - seldon_core.microservice:main:305 - INFO:  Importing submodule ['mymodule.my_model', 'MyModel']
2020-07-14 09:32:32,119 - mymodule.my_model:__init__:15 - INFO:  Initializing model
2020-07-14 09:32:32,475 - seldon_core.microservice:main:374 - INFO:  REST gunicorn microservice running on port 5000
2020-07-14 09:32:32,477 - seldon_core.microservice:main:432 - INFO:  REST metrics microservice running on port 6005
2020-07-14 09:32:32,477 - seldon_core.microservice:main:442 - INFO:  Starting servers
[2020-07-14 09:32:32 +0000] [25965] [INFO] Starting gunicorn 20.0.4
[2020-07-14 09:32:32 +0000] [25965] [INFO] Listening at: http://0.0.0.0:5000 (25965)
[2020-07-14 09:32:32 +0000] [25965] [INFO] Using worker: threads
[2020-07-14 09:32:32 +0000] [26014] [INFO] Booting worker with pid: 26014
[2020-07-14 09:32:32 +0000] [26013] [INFO] Starting gunicorn 20.0.4
[2020-07-14 09:32:32 +0000] [26013] [INFO] Listening at: http://0.0.0.0:6005 (26013)
[2020-07-14 09:32:32 +0000] [26013] [INFO] Using worker: sync
[2020-07-14 09:32:32 +0000] [26021] [INFO] Booting worker with pid: 26021
DEBUG:root:=== trying again
INFO:root:microservice ready
------------------------------ Captured log setup ------------------------------
INFO     root:helpers.py:65 starting: seldon-core-microservice mymodule.my_model.MyModel REST --service-type MODEL --persistence 0
DEBUG    root:helpers.py:80 === trying again
DEBUG    root:helpers.py:80 === trying again
INFO     root:helpers.py:88 microservice ready
----------------------------- Captured stdout call -----------------------------
127.0.0.1 - - [14/Jul/2020:09:32:34 +0000] "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45 "-" "python-requests/2.24.0"
----------------------------- Captured stderr call -----------------------------
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): 127.0.0.1:5000
2020-07-14 09:32:34,090 - mymodule.my_model:predict:26 - INFO:  Predict called - will run idenity function
DEBUG:urllib3.connectionpool:http://127.0.0.1:5000 "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): 127.0.0.1:5000
2020-07-14 09:32:34,102 - mymodule.my_model:send_feedback:40 - INFO:  Send feedback called
DEBUG:urllib3.connectionpool:http://127.0.0.1:5000 "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45
------------------------------ Captured log call -------------------------------
DEBUG    urllib3.connectionpool:connectionpool.py:230 Starting new HTTP connection (1): 127.0.0.1:5000
DEBUG    urllib3.connectionpool:connectionpool.py:442 http://127.0.0.1:5000 "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65
DEBUG    urllib3.connectionpool:connectionpool.py:230 Starting new HTTP connection (1): 127.0.0.1:5000
DEBUG    urllib3.connectionpool:connectionpool.py:442 http://127.0.0.1:5000 "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45
--------------------------- Captured stdout teardown ---------------------------
127.0.0.1 - - [14/Jul/2020:09:32:34 +0000] "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65 "-" "python-requests/2.24.0"
--------------------------- Captured stderr teardown ---------------------------
[2020-07-14 09:32:34 +0000] [26021] [INFO] Worker exiting (pid: 26021)
[2020-07-14 09:32:34 +0000] [26014] [INFO] Worker exiting (pid: 26014)
[2020-07-14 09:32:34 +0000] [26013] [INFO] Handling signal: term
[2020-07-14 09:32:34 +0000] [25965] [INFO] Handling signal: term
_________________ test_model_template_app_grpc[microservice0] __________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_microservice.py", line 130, in test_model_template_app_grpc
    response = stub.SendFeedback(request=request)
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/grpc/_channel.py", line 826, in __call__
    return _end_unary_response_blocking(state, call, False, None)
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/grpc/_channel.py", line 729, in _end_unary_response_blocking
    raise _InactiveRpcError(state)
grpc._channel._InactiveRpcError: <_InactiveRpcError of RPC that terminated with:
	status = StatusCode.UNKNOWN
	details = "Exception calling application: local variable 'request_proto' referenced before assignment"
	debug_error_string = "{"created":"@1594719159.152468221","description":"Error received from peer ipv4:0.0.0.0:5000","file":"src/core/lib/surface/call.cc","file_line":1055,"grpc_message":"Exception calling application: local variable 'request_proto' referenced before assignment","grpc_status":2}"
>
---------------------------- Captured stderr setup -----------------------------
INFO:root:starting: seldon-core-microservice MyModel GRPC --service-type MODEL --persistence 0
Error in atexit._run_exitfuncs:
Traceback (most recent call last):
  File "/opt/conda/lib/python3.7/multiprocessing/util.py", line 322, in _exit_function
    p.join()
  File "/opt/conda/lib/python3.7/multiprocessing/process.py", line 138, in join
    assert self._parent_pid == os.getpid(), 'can only join a child process'
AssertionError: can only join a child process
[2020-07-14 09:32:34 +0000] [26013] [INFO] Shutting down: Master
[2020-07-14 09:32:34 +0000] [25965] [INFO] Shutting down: Master
DEBUG:root:=== trying again
2020-07-14 09:32:37,327 - seldon_core.microservice:main:207 - INFO:  Starting microservice.py:main
2020-07-14 09:32:37,327 - seldon_core.microservice:main:208 - INFO:  Seldon Core version: 1.2.2-dev
2020-07-14 09:32:37,330 - seldon_core.microservice:main:294 - INFO:  Parse JAEGER_EXTRA_TAGS []
2020-07-14 09:32:37,330 - seldon_core.microservice:main:297 - INFO:  Annotations: {}
2020-07-14 09:32:37,330 - seldon_core.microservice:main:301 - INFO:  Importing MyModel
2020-07-14 09:32:37,331 - MyModel:__init__:15 - INFO:  Initializing model
2020-07-14 09:32:37,653 - seldon_core.microservice:main:432 - INFO:  REST metrics microservice running on port 6005
2020-07-14 09:32:37,655 - seldon_core.microservice:main:442 - INFO:  Starting servers
2020-07-14 09:32:37,702 - seldon_core.microservice:grpc_prediction_server:408 - INFO:  GRPC microservice Running on port 5000
[2020-07-14 09:32:38 +0000] [26074] [INFO] Starting gunicorn 20.0.4
[2020-07-14 09:32:38 +0000] [26074] [INFO] Listening at: http://0.0.0.0:6005 (26074)
[2020-07-14 09:32:38 +0000] [26074] [INFO] Using worker: sync
[2020-07-14 09:32:38 +0000] [26085] [INFO] Booting worker with pid: 26085
DEBUG:root:=== trying again
INFO:root:microservice ready
------------------------------ Captured log setup ------------------------------
INFO     root:helpers.py:65 starting: seldon-core-microservice MyModel GRPC --service-type MODEL --persistence 0
DEBUG    root:helpers.py:80 === trying again
DEBUG    root:helpers.py:80 === trying again
INFO     root:helpers.py:88 microservice ready
----------------------------- Captured stderr call -----------------------------
INFO:root:Calling method... try: 1
2020-07-14 09:32:39,148 - MyModel:predict:26 - INFO:  Predict called - will run idenity function
2020-07-14 09:32:39,150 - grpc._server:_call_behavior:445 - ERROR:  Exception calling application: local variable 'request_proto' referenced before assignment
Traceback (most recent call last):
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/grpc/_server.py", line 435, in _call_behavior
    response_or_iterator = behavior(argument, context)
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/seldon_core/wrapper.py", line 203, in SendFeedback
    self.user_model, feedback_grpc, PRED_UNIT_ID, self.seldon_metrics
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/seldon_core/seldon_methods.py", line 160, in send_feedback
    request_proto
UnboundLocalError: local variable 'request_proto' referenced before assignment
------------------------------ Captured log call -------------------------------
INFO     root:test_microservice.py:27 Calling method... try: 1
--------------------------- Captured stderr teardown ---------------------------
[2020-07-14 09:32:39 +0000] [26085] [INFO] Worker exiting (pid: 26085)
____________ test_model_template_app_tracing_config[microservice0] _____________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_microservice.py", line 212, in test_model_template_app_tracing_config
    assert response.json() == {"data": {"ndarray": []}, "meta": {}}
AssertionError: assert {'data': {'na...}, 'meta': {}} == {'data': {'nd...}, 'meta': {}}
  Omitting 1 identical items, use -vv to show
  Differing items:
  {'data': {'names': [], 'ndarray': []}} != {'data': {'ndarray': []}}
  Use -v to get the full diff
---------------------------- Captured stderr setup -----------------------------
INFO:root:starting: seldon-core-microservice MyModel REST --service-type MODEL --persistence 0 --tracing
[2020-07-14 09:32:49 +0000] [26198] [INFO] Handling signal: term
[2020-07-14 09:32:49 +0000] [26209] [INFO] Worker exiting (pid: 26209)
[2020-07-14 09:32:49 +0000] [26198] [INFO] Shutting down: Master
DEBUG:root:=== trying again
2020-07-14 09:32:52,288 - seldon_core.microservice:main:207 - INFO:  Starting microservice.py:main
2020-07-14 09:32:52,288 - seldon_core.microservice:main:208 - INFO:  Seldon Core version: 1.2.2-dev
2020-07-14 09:32:52,290 - seldon_core.microservice:main:294 - INFO:  Parse JAEGER_EXTRA_TAGS []
2020-07-14 09:32:52,291 - seldon_core.microservice:main:297 - INFO:  Annotations: {}
2020-07-14 09:32:52,291 - seldon_core.microservice:main:301 - INFO:  Importing MyModel
2020-07-14 09:32:52,291 - MyModel:__init__:15 - INFO:  Initializing model
2020-07-14 09:32:52,292 - seldon_core.microservice:setup_tracing:145 - INFO:  Initializing tracing
2020-07-14 09:32:52,340 - seldon_core.microservice:setup_tracing:166 - INFO:  Loading tracing config from /workspace/source/python/tests/resources/tracing_config/tracing.yaml
/workspace/source/python/.tox/all/lib/python3.7/site-packages/seldon_core/microservice.py:170: YAMLLoadWarning: calling yaml.load() without Loader=... is deprecated, as the default Loader is unsafe. Please read https://msg.pyyaml.org/load for full details.
  config_dict = yaml.load(stream)
2020-07-14 09:32:52,344 - jaeger_tracing:_create_local_agent_channel:446 - INFO:  Initializing Jaeger Tracer with UDP reporter
2020-07-14 09:32:52,346 - jaeger_tracing:new_tracer:384 - INFO:  Using sampler ConstSampler(True)
2020-07-14 09:32:52,348 - jaeger_tracing:_initialize_global_tracer:436 - INFO:  opentracing.tracer initialized to <jaeger_client.tracer.Tracer object at 0x7f6003114908>[app_name=MyModel]
2020-07-14 09:32:52,765 - seldon_core.microservice:main:374 - INFO:  REST gunicorn microservice running on port 5000
2020-07-14 09:32:52,767 - seldon_core.microservice:main:432 - INFO:  REST metrics microservice running on port 6005
2020-07-14 09:32:52,767 - seldon_core.microservice:main:442 - INFO:  Starting servers
[2020-07-14 09:32:52 +0000] [26212] [INFO] Starting gunicorn 20.0.4
[2020-07-14 09:32:52 +0000] [26212] [INFO] Listening at: http://0.0.0.0:5000 (26212)
[2020-07-14 09:32:52 +0000] [26212] [INFO] Using worker: threads
[2020-07-14 09:32:52 +0000] [26262] [INFO] Booting worker with pid: 26262
[2020-07-14 09:32:53 +0000] [26261] [INFO] Starting gunicorn 20.0.4
[2020-07-14 09:32:53 +0000] [26261] [INFO] Listening at: http://0.0.0.0:6005 (26261)
[2020-07-14 09:32:53 +0000] [26261] [INFO] Using worker: sync
[2020-07-14 09:32:53 +0000] [26269] [INFO] Booting worker with pid: 26269
DEBUG:root:=== trying again
INFO:root:microservice ready
------------------------------ Captured log setup ------------------------------
INFO     root:helpers.py:65 starting: seldon-core-microservice MyModel REST --service-type MODEL --persistence 0 --tracing
DEBUG    root:helpers.py:80 === trying again
DEBUG    root:helpers.py:80 === trying again
INFO     root:helpers.py:88 microservice ready
----------------------------- Captured stdout call -----------------------------
127.0.0.1 - - [14/Jul/2020:09:32:54 +0000] "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65 "-" "python-requests/2.24.0"
127.0.0.1 - - [14/Jul/2020:09:32:54 +0000] "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45 "-" "python-requests/2.24.0"
----------------------------- Captured stderr call -----------------------------
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): 127.0.0.1:5000
2020-07-14 09:32:54,287 - MyModel:predict:26 - INFO:  Predict called - will run idenity function
DEBUG:urllib3.connectionpool:http://127.0.0.1:5000 "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): 127.0.0.1:5000
2020-07-14 09:32:54,298 - MyModel:send_feedback:40 - INFO:  Send feedback called
DEBUG:urllib3.connectionpool:http://127.0.0.1:5000 "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45
------------------------------ Captured log call -------------------------------
DEBUG    urllib3.connectionpool:connectionpool.py:230 Starting new HTTP connection (1): 127.0.0.1:5000
DEBUG    urllib3.connectionpool:connectionpool.py:442 http://127.0.0.1:5000 "GET /predict?json=%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D HTTP/1.1" 200 65
DEBUG    urllib3.connectionpool:connectionpool.py:230 Starting new HTTP connection (1): 127.0.0.1:5000
DEBUG    urllib3.connectionpool:connectionpool.py:442 http://127.0.0.1:5000 "GET /send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%22router%22:0%7D%7D,%22data%22:%7B%22names%22:%5B%22a%22,%22b%22%5D,%22ndarray%22:%5B%5B1.0,2.0%5D%5D%7D%7D,%22reward%22:1%7D HTTP/1.1" 200 45
--------------------------- Captured stderr teardown ---------------------------
[2020-07-14 09:32:54 +0000] [26212] [INFO] Handling signal: term
[2020-07-14 09:32:54 +0000] [26261] [INFO] Handling signal: term
[2020-07-14 09:32:54 +0000] [26269] [INFO] Worker exiting (pid: 26269)
_______________________ test_unimplemented_feedback_raw ________________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_model_microservice.py", line 988, in test_unimplemented_feedback_raw
    j = json.loads(rv.data)
  File "/opt/conda/lib/python3.7/json/__init__.py", line 348, in loads
    return _default_decoder.decode(s)
  File "/opt/conda/lib/python3.7/json/decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "/opt/conda/lib/python3.7/json/decoder.py", line 355, in raw_decode
    raise JSONDecodeError("Expecting value", s, err.value) from None
json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22ndarray%22:%5B%5D%7D%7D,%22reward%22:1.0%7D' [GET]>
ERROR:seldon_core.wrapper:Exception on /send-feedback [GET]
Traceback (most recent call last):
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask/app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask_cors/extension.py", line 161, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask/app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/workspace/source/python/seldon_core/wrapper.py", line 75, in SendFeedback
    user_model, requestJson, PRED_UNIT_ID, seldon_metrics
  File "/workspace/source/python/seldon_core/seldon_methods.py", line 183, in send_feedback
    raise Exception("TODO: Not implemented")
Exception: TODO: Not implemented
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:73 REST Request: <Request 'http://localhost/send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22ndarray%22:%5B%5D%7D%7D,%22reward%22:1.0%7D' [GET]>
ERROR    seldon_core.wrapper:app.py:1892 Exception on /send-feedback [GET]
Traceback (most recent call last):
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask/app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask_cors/extension.py", line 161, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask/app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "/workspace/source/python/.tox/all/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/workspace/source/python/seldon_core/wrapper.py", line 75, in SendFeedback
    user_model, requestJson, PRED_UNIT_ID, seldon_metrics
  File "/workspace/source/python/seldon_core/seldon_methods.py", line 183, in send_feedback
    raise Exception("TODO: Not implemented")
Exception: TODO: Not implemented
___________________________ test_router_feedback_ok ____________________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_router_microservice.py", line 227, in test_router_feedback_ok
    assert rv.status_code == 200
AssertionError: assert 400 == 200
 +  where 400 = <Response 146 bytes [400 BAD REQUEST]>.status_code
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG:seldon_core.wrapper:REST Request: <Request 'http://localhost/send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22ndarray%22:%5B%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%221%22:1%7D%7D%7D,%22reward%22:1.0%7D' [GET]>
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
INFO:root:Feedback called
DEBUG:seldon_core.metrics:Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}]
DEBUG:seldon_core.metrics:Read current metrics data from shared memory
DEBUG:seldon_core.metrics:Updated metrics in the shared memory.
ERROR:seldon_core.wrapper:{'status': {'status': 1, 'info': 'Unknown data type returned as payload (must be list or np array):None', 'code': -1, 'reason': 'MICROSERVICE_BAD_DATA'}}
INFO:root:{'status': {'code': -1, 'info': 'Unknown data type returned as payload (must be list or np array):None', 'reason': 'MICROSERVICE_BAD_DATA', 'status': 1}}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
DEBUG    seldon_core.wrapper:wrapper.py:73 REST Request: <Request 'http://localhost/send-feedback?json=%7B%22request%22:%7B%22data%22:%7B%22ndarray%22:%5B%5D%7D%7D,%22response%22:%7B%22meta%22:%7B%22routing%22:%7B%221%22:1%7D%7D%7D,%22reward%22:1.0%7D' [GET]>
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
INFO     root:test_router_microservice.py:30 Feedback called
DEBUG    seldon_core.metrics:metrics.py:91 Updating metrics: [{'type': 'COUNTER', 'key': 'mycounter', 'value': 1}]
DEBUG    seldon_core.metrics:metrics.py:94 Read current metrics data from shared memory
DEBUG    seldon_core.metrics:metrics.py:122 Updated metrics in the shared memory.
ERROR    seldon_core.wrapper:wrapper.py:44 {'status': {'status': 1, 'info': 'Unknown data type returned as payload (must be list or np array):None', 'code': -1, 'reason': 'MICROSERVICE_BAD_DATA'}}
INFO     root:test_router_microservice.py:226 {'status': {'code': -1, 'info': 'Unknown data type returned as payload (must be list or np array):None', 'reason': 'MICROSERVICE_BAD_DATA', 'status': 1}}
_____________________________ test_proto_feedback ______________________________
Traceback (most recent call last):
  File "/workspace/source/python/tests/test_router_microservice.py", line 315, in test_proto_feedback
    resp = app.SendFeedback(feedback, None)
  File "/workspace/source/python/seldon_core/wrapper.py", line 203, in SendFeedback
    self.user_model, feedback_grpc, PRED_UNIT_ID, self.seldon_metrics
  File "/workspace/source/python/seldon_core/seldon_methods.py", line 160, in send_feedback
    request_proto
UnboundLocalError: local variable 'request_proto' referenced before assignment
----------------------------- Captured stderr call -----------------------------
DEBUG:seldon_core.metadata:Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}
------------------------------ Captured log call -------------------------------
DEBUG    seldon_core.metadata:metadata.py:187 Successfully validated metadata:
{
  "name": "",
  "versions": [
    ""
  ],
  "platform": "",
  "inputs": [],
  "outputs": []
}

----------- coverage: platform linux, python 3.7.1-final-0 -----------
Name                                                                                           Stmts   Miss  Cover
------------------------------------------------------------------------------------------------------------------
.tox/all/lib/python3.7/site-packages/seldon_core/__init__.py                                       2      0   100%
.tox/all/lib/python3.7/site-packages/seldon_core/api_tester.py                                    81     81     0%
.tox/all/lib/python3.7/site-packages/seldon_core/app.py                                           36      3    92%
.tox/all/lib/python3.7/site-packages/seldon_core/batch_processor.py                               94     94     0%
.tox/all/lib/python3.7/site-packages/seldon_core/flask_utils.py                                   44     24    45%
.tox/all/lib/python3.7/site-packages/seldon_core/imports_helper.py                                19      8    58%
.tox/all/lib/python3.7/site-packages/seldon_core/metadata.py                                      32      3    91%
.tox/all/lib/python3.7/site-packages/seldon_core/metrics.py                                      119     72    39%
.tox/all/lib/python3.7/site-packages/seldon_core/microservice.py                                 199     65    67%
.tox/all/lib/python3.7/site-packages/seldon_core/microservice_tester.py                          140    140     0%
.tox/all/lib/python3.7/site-packages/seldon_core/persistence.py                                   45     23    49%
.tox/all/lib/python3.7/site-packages/seldon_core/proto/__init__.py                                 0      0   100%
.tox/all/lib/python3.7/site-packages/seldon_core/proto/prediction_pb2.py                         160      0   100%
.tox/all/lib/python3.7/site-packages/seldon_core/proto/prediction_pb2_grpc.py                    137     89    35%
.tox/all/lib/python3.7/site-packages/seldon_core/proto/tensorflow/core/framework/__init__.py       3      0   100%
.tox/all/lib/python3.7/site-packages/seldon_core/seldon_client.py                                599    599     0%
.tox/all/lib/python3.7/site-packages/seldon_core/seldon_methods.py                               244    190    22%
.tox/all/lib/python3.7/site-packages/seldon_core/serving_test_gen.py                              40     40     0%
.tox/all/lib/python3.7/site-packages/seldon_core/storage.py                                      154    124    19%
.tox/all/lib/python3.7/site-packages/seldon_core/user_model.py                                   162     92    43%
.tox/all/lib/python3.7/site-packages/seldon_core/utils.py                                        282    175    38%
.tox/all/lib/python3.7/site-packages/seldon_core/version.py                                        1      0   100%
.tox/all/lib/python3.7/site-packages/seldon_core/wrapper.py                                      145     75    48%
seldon_core/__init__.py                                                                            2      0   100%
seldon_core/api_tester.py                                                                         81     38    53%
seldon_core/app.py                                                                                36     22    39%
seldon_core/batch_processor.py                                                                    94     94     0%
seldon_core/flask_utils.py                                                                        44      3    93%
seldon_core/imports_helper.py                                                                     19      8    58%
seldon_core/metadata.py                                                                           32      0   100%
seldon_core/metrics.py                                                                           119      1    99%
seldon_core/microservice.py                                                                      199    120    40%
seldon_core/microservice_tester.py                                                               140     43    69%
seldon_core/persistence.py                                                                        45     23    49%
seldon_core/proto/__init__.py                                                                      0      0   100%
seldon_core/proto/prediction_pb2.py                                                              160      0   100%
seldon_core/proto/prediction_pb2_grpc.py                                                         137     65    53%
seldon_core/proto/tensorflow/core/framework/__init__.py                                            3      0   100%
seldon_core/seldon_client.py                                                                     599    284    53%
seldon_core/seldon_methods.py                                                                    244     10    96%
seldon_core/serving_test_gen.py                                                                   40     40     0%
seldon_core/storage.py                                                                           154     28    82%
seldon_core/user_model.py                                                                        162     30    81%
seldon_core/utils.py                                                                             282     31    89%
seldon_core/version.py                                                                             1      0   100%
seldon_core/wrapper.py                                                                           145     11    92%
------------------------------------------------------------------------------------------------------------------
TOTAL                                                                                           5476   2748    50%

=========================== short test summary info ============================
FAILED tests/test_metrics.py::test_seldon_metrics_predict[True-UserObject] - ...
FAILED tests/test_metrics.py::test_seldon_metrics_predict[True-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_predict[False-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_predict[False-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_aggregate[True-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_aggregate[True-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_aggregate[False-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_aggregate[False-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_input[True-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_input[True-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_input[False-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_input[False-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_output[True-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_output[True-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_output[False-UserObject]
FAILED tests/test_metrics.py::test_seldon_metrics_transform_output[False-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_route[True-UserObject] - Ke...
FAILED tests/test_metrics.py::test_seldon_metrics_route[True-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_seldon_metrics_route[False-UserObject] - K...
FAILED tests/test_metrics.py::test_seldon_metrics_route[False-UserObjectLowLevel]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_predict[True-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_predict[True-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_predict[False-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_predict[False-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_aggregate[True-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_aggregate[True-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_aggregate[False-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_aggregate[False-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_input[True-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_input[True-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_input[False-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_input[False-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_output[True-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_output[True-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_output[False-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_transform_output[False-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_route[True-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_route[True-UserObjectLowLevelGrpc]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_route[False-UserObject]
FAILED tests/test_metrics.py::test_proto_seldon_metrics_route[False-UserObjectLowLevelGrpc]
FAILED tests/test_microservice.py::test_model_template_app_rest - AssertionEr...
FAILED tests/test_microservice.py::test_model_template_app_rest_submodule[microservice0]
FAILED tests/test_microservice.py::test_model_template_app_grpc[microservice0]
FAILED tests/test_microservice.py::test_model_template_app_tracing_config[microservice0]
FAILED tests/test_model_microservice.py::test_unimplemented_feedback_raw - js...
FAILED tests/test_router_microservice.py::test_router_feedback_ok - assert 40...
FAILED tests/test_router_microservice.py::test_proto_feedback - UnboundLocalE...
================== 47 failed, 322 passed in 152.16s (0:02:32) ==================
ERROR: InvocationError for command /workspace/source/python/.tox/all/bin/pytest (exited with code 1)
___________________________________ summary ____________________________________
ERROR:   py3: commands failed
ERROR:   tensorflow: commands failed
ERROR:   gcs: commands failed
ERROR:   all: commands failed
make: *** [test] Error 1
Makefile:66: recipe for target 'test' failed
make: Leaving directory '/workspace/source/python'
[31m
Pipeline failed on stage 'test-python' : container 'step-test-python'. The execution of the pipeline has stopped.[0m

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-jhh2b-11[0m stage [32mseldon-executor[0m and container [32mstep-credential-initializer-9dzsw[0m
{"level":"info","ts":1594717804.8830361,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/refs/heads/0.8.0-ns-support: no such file or directory"}
{"level":"info","ts":1594717804.88396,"logger":"fallback-logger","caller":"creds-init/main.go:40","msg":"Credentials initialized."}

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-jhh2b-11[0m stage [32mseldon-executor[0m and container [32mstep-working-dir-initializer-b9hkm[0m
{"level":"info","ts":1594717805.69727,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/HEAD: no such file or directory"}
{"level":"info","ts":1594717805.6990771,"logger":"fallback-logger","caller":"bash/main.go:64","msg":"Successfully executed command \"sh -c mkdir -p /workspace/source\"; output "}

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-jhh2b-11[0m stage [32mseldon-executor[0m and container [32mstep-place-tools[0m

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-jhh2b-11[0m stage [32mseldon-executor[0m and container [32mstep-create-dir-workspace-2rsfk[0m
{"level":"info","ts":1594717817.2409499,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/HEAD: no such file or directory"}
{"level":"info","ts":1594717817.243007,"logger":"fallback-logger","caller":"bash/main.go:64","msg":"Successfully executed command \"sh -c mkdir -p /workspace/source\"; output "}

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-jhh2b-11[0m stage [32mseldon-executor[0m and container [32mstep-source-copy-workspace-d8jjr[0m
{"level":"info","ts":1594717817.5881548,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/HEAD: no such file or directory"}
{"level":"info","ts":1594717820.4724112,"logger":"fallback-logger","caller":"bash/main.go:64","msg":"Successfully executed command \"sh -c cp -r /pvc/pr-build-comment/workspace/. /workspace/source\"; output "}

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-jhh2b-11[0m stage [32mseldon-executor[0m and container [32mstep-setup-builder-home[0m

Showing logs for build [32mseldonio-seldon-core-pr-2110-pr-jhh2b-11[0m stage [32mseldon-executor[0m and container [32mstep-test-executor[0m
make: Entering directory '/workspace/source/executor'
go fmt ./...
go: downloading sigs.k8s.io/controller-runtime v0.5.0
go: downloading github.com/opentracing/opentracing-go v1.2.0
go: downloading github.com/grpc-ecosystem/go-grpc-middleware v1.2.0
go: downloading google.golang.org/grpc v1.30.0
go: downloading github.com/pkg/errors v0.9.1
go: downloading github.com/go-logr/logr v0.1.0
go: extracting github.com/pkg/errors v0.9.1
go: downloading github.com/ghodss/yaml v1.0.0
go: extracting github.com/go-logr/logr v0.1.0
go: downloading golang.org/x/xerrors v0.0.0-20191204190536-9bdfabe68543
go: extracting github.com/ghodss/yaml v1.0.0
go: downloading github.com/cloudevents/sdk-go v1.2.0
go: extracting github.com/opentracing/opentracing-go v1.2.0
go: extracting golang.org/x/xerrors v0.0.0-20191204190536-9bdfabe68543
go: downloading go.uber.org/zap v1.10.0
go: extracting github.com/grpc-ecosystem/go-grpc-middleware v1.2.0
go: downloading gopkg.in/yaml.v2 v2.3.0
go: extracting gopkg.in/yaml.v2 v2.3.0
go: downloading github.com/golang/protobuf v1.4.2
go: extracting github.com/golang/protobuf v1.4.2
go: extracting sigs.k8s.io/controller-runtime v0.5.0
go: extracting go.uber.org/zap v1.10.0
go: downloading github.com/seldonio/seldon-core/operator v0.0.0-20200401123312-d4c435ea5217
go: extracting google.golang.org/grpc v1.30.0
go: extracting github.com/cloudevents/sdk-go v1.2.0
go: downloading google.golang.org/protobuf v1.23.0
go: downloading github.com/google/uuid v1.1.1
go: extracting github.com/google/uuid v1.1.1
go: extracting github.com/seldonio/seldon-core/operator v0.0.0-20200401123312-d4c435ea5217
go: downloading github.com/prometheus/client_golang v1.7.1
go: extracting github.com/prometheus/client_golang v1.7.1
go: downloading k8s.io/api v0.17.2
go: extracting google.golang.org/protobuf v1.23.0
go: downloading k8s.io/apimachinery v0.17.2
go: downloading github.com/uber/jaeger-client-go v2.24.0+incompatible
go: downloading golang.org/x/net v0.0.0-20200520004742-59133d7f0dd7
go: extracting github.com/uber/jaeger-client-go v2.24.0+incompatible
go: extracting k8s.io/apimachinery v0.17.2
go: downloading github.com/prometheus/client_model v0.2.0
go: downloading github.com/prometheus/common v0.10.0
go: extracting github.com/prometheus/client_model v0.2.0
go: downloading github.com/beorn7/perks v1.0.1
go: downloading github.com/soheilhy/cmux v0.1.4
go: extracting github.com/beorn7/perks v1.0.1
go: extracting github.com/soheilhy/cmux v0.1.4
go: downloading go.uber.org/multierr v1.1.0
go: extracting github.com/prometheus/common v0.10.0
go: extracting go.uber.org/multierr v1.1.0
go: downloading go.uber.org/atomic v1.4.0
go: extracting golang.org/x/net v0.0.0-20200520004742-59133d7f0dd7
go: downloading k8s.io/client-go v0.17.2
go: extracting go.uber.org/atomic v1.4.0
go: downloading go.opencensus.io v0.22.0
go: downloading k8s.io/klog v1.0.0
go: extracting k8s.io/klog v1.0.0
go: extracting go.opencensus.io v0.22.0
go: downloading google.golang.org/genproto v0.0.0-20190916214212-f660b8655731
go: downloading golang.org/x/sys v0.0.0-20200615200032-f1bc736245b1
go: extracting k8s.io/api v0.17.2
go: extracting k8s.io/client-go v0.17.2
go: downloading github.com/cespare/xxhash/v2 v2.1.1
go: extracting github.com/cespare/xxhash/v2 v2.1.1
go: downloading github.com/gogo/protobuf v1.3.1
go: extracting golang.org/x/sys v0.0.0-20200615200032-f1bc736245b1
go: downloading golang.org/x/time v0.0.0-20190921001708-c4c64cad1fd0
go: downloading k8s.io/apiextensions-apiserver v0.17.2
go: extracting golang.org/x/time v0.0.0-20190921001708-c4c64cad1fd0
go: downloading github.com/prometheus/procfs v0.1.3
go: extracting github.com/gogo/protobuf v1.3.1
go: extracting github.com/prometheus/procfs v0.1.3
go: extracting k8s.io/apiextensions-apiserver v0.17.2
go: downloading github.com/go-logr/zapr v0.1.0
go: downloading gopkg.in/fsnotify.v1 v1.4.7
go: extracting github.com/go-logr/zapr v0.1.0
go: downloading github.com/google/go-cmp v0.4.0
go: downloading github.com/gorilla/mux v1.7.4
go: downloading github.com/spf13/pflag v1.0.5
go: downloading github.com/evanphx/json-patch v4.5.0+incompatible
go: downloading github.com/lightstep/tracecontext.go v0.0.0-20181129014701-1757c391b1ac
go: extracting gopkg.in/fsnotify.v1 v1.4.7
go: extracting github.com/spf13/pflag v1.0.5
go: extracting github.com/evanphx/json-patch v4.5.0+incompatible
go: downloading github.com/matttproud/golang_protobuf_extensions v1.0.1
go: extracting github.com/gorilla/mux v1.7.4
go: extracting github.com/google/go-cmp v0.4.0
go: extracting github.com/lightstep/tracecontext.go v0.0.0-20181129014701-1757c391b1ac
go: downloading github.com/json-iterator/go v1.1.10
go: downloading gomodules.xyz/jsonpatch/v2 v2.0.1
go: downloading github.com/hashicorp/golang-lru v0.5.4
go: extracting github.com/matttproud/golang_protobuf_extensions v1.0.1
go: extracting gomodules.xyz/jsonpatch/v2 v2.0.1
go: downloading github.com/modern-go/reflect2 v1.0.1
go: downloading golang.org/x/text v0.3.2
go: downloading k8s.io/utils v0.0.0-20191114184206-e782cd3c129f
go: extracting github.com/hashicorp/golang-lru v0.5.4
go: downloading github.com/davecgh/go-spew v1.1.1
go: extracting github.com/json-iterator/go v1.1.10
go: extracting github.com/modern-go/reflect2 v1.0.1
go: downloading golang.org/x/oauth2 v0.0.0-20190604053449-0f29369cfe45
go: extracting github.com/davecgh/go-spew v1.1.1
go: extracting golang.org/x/oauth2 v0.0.0-20190604053449-0f29369cfe45
go: downloading gopkg.in/inf.v0 v0.9.1
go: extracting k8s.io/utils v0.0.0-20191114184206-e782cd3c129f
go: extracting google.golang.org/genproto v0.0.0-20190916214212-f660b8655731
go: extracting gopkg.in/inf.v0 v0.9.1
go: downloading github.com/modern-go/concurrent v0.0.0-20180306012644-bacd9c7ef1dd
go: downloading github.com/google/gofuzz v1.0.0
go: extracting github.com/modern-go/concurrent v0.0.0-20180306012644-bacd9c7ef1dd
go: extracting github.com/google/gofuzz v1.0.0
go: downloading github.com/uber/jaeger-lib v2.2.0+incompatible
go: downloading github.com/imdario/mergo v0.3.7
go: downloading golang.org/x/crypto v0.0.0-20200204104054-c9f3fb736b72
go: downloading github.com/golang/groupcache v0.0.0-20190702054246-869f871628b6
go: extracting github.com/imdario/mergo v0.3.7
go: downloading sigs.k8s.io/yaml v1.1.0
go: extracting github.com/golang/groupcache v0.0.0-20190702054246-869f871628b6
go: extracting sigs.k8s.io/yaml v1.1.0
go: extracting github.com/uber/jaeger-lib v2.2.0+incompatible
go: downloading github.com/googleapis/gnostic v0.3.1
go: downloading k8s.io/kube-openapi v0.0.0-20191107075043-30be4d16710a
go: extracting github.com/googleapis/gnostic v0.3.1
go: extracting golang.org/x/crypto v0.0.0-20200204104054-c9f3fb736b72
go: extracting k8s.io/kube-openapi v0.0.0-20191107075043-30be4d16710a
go: extracting golang.org/x/text v0.3.2
go: finding github.com/go-logr/logr v0.1.0
go: finding github.com/cloudevents/sdk-go v1.2.0
go: finding github.com/golang/protobuf v1.4.2
go: finding github.com/pkg/errors v0.9.1
go: finding github.com/opentracing/opentracing-go v1.2.0
go: finding github.com/prometheus/client_golang v1.7.1
go: finding github.com/uber/jaeger-client-go v2.24.0+incompatible
go: finding github.com/seldonio/seldon-core/operator v0.0.0-20200401123312-d4c435ea5217
go: finding github.com/google/uuid v1.1.1
go: finding github.com/ghodss/yaml v1.0.0
go: finding github.com/grpc-ecosystem/go-grpc-middleware v1.2.0
go: finding google.golang.org/grpc v1.30.0
go: finding google.golang.org/protobuf v1.23.0
go: finding golang.org/x/xerrors v0.0.0-20191204190536-9bdfabe68543
go: finding sigs.k8s.io/controller-runtime v0.5.0
go: finding gopkg.in/yaml.v2 v2.3.0
go: finding google.golang.org/genproto v0.0.0-20190916214212-f660b8655731
go: finding go.opencensus.io v0.22.0
go: finding k8s.io/api v0.17.2
go: finding github.com/beorn7/perks v1.0.1
go: finding github.com/gorilla/mux v1.7.4
go: finding go.uber.org/zap v1.10.0
go: finding github.com/cespare/xxhash/v2 v2.1.1
go: finding k8s.io/apimachinery v0.17.2
go: finding github.com/uber/jaeger-lib v2.2.0+incompatible
go: finding golang.org/x/net v0.0.0-20200520004742-59133d7f0dd7
go: finding github.com/go-logr/zapr v0.1.0
go: finding github.com/prometheus/client_model v0.2.0
go: finding github.com/prometheus/common v0.10.0
go: finding github.com/gogo/protobuf v1.3.1
go: finding github.com/soheilhy/cmux v0.1.4
go: finding github.com/lightstep/tracecontext.go v0.0.0-20181129014701-1757c391b1ac
go: finding github.com/prometheus/procfs v0.1.3
go: finding go.uber.org/atomic v1.4.0
go: finding go.uber.org/multierr v1.1.0
go: finding github.com/evanphx/json-patch v4.5.0+incompatible
go: finding gopkg.in/inf.v0 v0.9.1
go: finding github.com/hashicorp/golang-lru v0.5.4
go: finding gomodules.xyz/jsonpatch/v2 v2.0.1
go: finding k8s.io/client-go v0.17.2
go: finding k8s.io/klog v1.0.0
go: finding github.com/matttproud/golang_protobuf_extensions v1.0.1
go: finding golang.org/x/sys v0.0.0-20200615200032-f1bc736245b1
go: finding github.com/google/gofuzz v1.0.0
go: finding golang.org/x/time v0.0.0-20190921001708-c4c64cad1fd0
go: finding gopkg.in/fsnotify.v1 v1.4.7
go: finding github.com/json-iterator/go v1.1.10
go: finding github.com/modern-go/reflect2 v1.0.1
go: finding github.com/googleapis/gnostic v0.3.1
go: finding github.com/golang/groupcache v0.0.0-20190702054246-869f871628b6
go: finding golang.org/x/text v0.3.2
go: finding golang.org/x/crypto v0.0.0-20200204104054-c9f3fb736b72
go: finding github.com/imdario/mergo v0.3.7
go: finding github.com/modern-go/concurrent v0.0.0-20180306012644-bacd9c7ef1dd
go: finding k8s.io/apiextensions-apiserver v0.17.2
go: finding github.com/spf13/pflag v1.0.5
go: finding sigs.k8s.io/yaml v1.1.0
go: finding k8s.io/kube-openapi v0.0.0-20191107075043-30be4d16710a
go: finding k8s.io/utils v0.0.0-20191114184206-e782cd3c129f
go: finding github.com/davecgh/go-spew v1.1.1
go: finding golang.org/x/oauth2 v0.0.0-20190604053449-0f29369cfe45
go: finding github.com/google/go-cmp v0.4.0
go vet ./...
go: downloading github.com/onsi/gomega v1.10.1
go: downloading gotest.tools v2.2.0+incompatible
go: extracting github.com/onsi/gomega v1.10.1
go: extracting gotest.tools v2.2.0+incompatible
go: finding github.com/onsi/gomega v1.10.1
go: finding gotest.tools v2.2.0+incompatible
# github.com/seldonio/seldon-core/executor/logger
logger/worker.go:86:20: Errorf call has arguments but no formatting directives
make: Leaving directory '/workspace/source/executor'
make: *** [Makefile:24: vet] Error 2
[31m
Pipeline failed on stage 'seldon-executor' : container 'step-test-executor'. The execution of the pipeline has stopped.[0m
